<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Node-#è½¬ï¼škoa-routeè·¯ç”±æºç è§£æ</title>
      <link href="/2019/02/03/Node-%E8%BD%AC%EF%BC%9Akoa-route%E8%B7%AF%E7%94%B1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
      <url>/2019/02/03/Node-%E8%BD%AC%EF%BC%9Akoa-route%E8%B7%AF%E7%94%B1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>koa-routeåœ¨koaä¸­è´Ÿè´£è·¯ç”±åˆ†å‘ï¼Œæ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ã€‚æœ¬æ‰“ç®—è‡ªå·±å†™ç¯‡æ–‡ç« æ€»ç»“ä¸‹çš„ï¼Œä½†åœ¨<code>segmentfault</code>ä¸Šçœ‹åˆ°äº†ä¸€ç¯‡æ€»ç»“å¾—å¾ˆåˆ°ä½çš„æ–‡ç« ã€‚æ„Ÿè§‰è‡ªå·±å†™ä¹Ÿå°±åªèƒ½å†™æˆè¿™æ ·äº†ï¼Œæ‰€ä»¥ç›´æ¥è½¬è½½äº†ğŸ˜‚</p><blockquote><p>æ–‡ç« åœ°å€ï¼š<a href="https://segmentfault.com/a/1190000007468233" target="_blank" rel="noopener">https://segmentfault.com/a/1190000007468233</a></p></blockquote><hr><h2 id="ä»£ç ç»“æ„"><a href="#ä»£ç ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„"></a>ä»£ç ç»“æ„</h2><p><img src="/image/koa_router_method_struct.png" alt=""></p><h2 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h2><p><img src="/image/koa_route_method_flow.png" alt=""></p><blockquote><p>ä¸Šé¢ä¸¤å¼ å›¾ä¸»è¦å°†koa-routerçš„æ•´ä½“ä»£ç ç»“æ„å’Œå¤§æ¦‚çš„æ‰§è¡Œæµç¨‹ç”»äº†å‡ºæ¥ï¼Œç”»çš„ä¸å¤Ÿå…·ä½“ã€‚é‚£ä¸‹é¢ä¸»è¦è®²koa-routerä¸­çš„å‡ å¤„çš„å…³é”®ä»£ç è§£è¯»ä¸€ä¸‹ã€‚</p></blockquote><p>è¯»ä»£ç é¦–å…ˆè¦æ‰¾åˆ°å…¥å£æ–‡ä»¶ï¼Œé‚£å‡ ä¹æ‰€æœ‰çš„nodeæ¨¡å—çš„å…¥å£æ–‡ä»¶éƒ½ä¼šåœ¨package.jsonæ–‡ä»¶ä¸­çš„mainå±æ€§æŒ‡æ˜äº†ã€‚koa-routerçš„å…¥å£æ–‡ä»¶å°±æ˜¯lib/router.jsã€‚</p><h2 id="ç¬¬ä¸‰æ–¹æ¨¡å—è¯´æ˜"><a href="#ç¬¬ä¸‰æ–¹æ¨¡å—è¯´æ˜" class="headerlink" title="ç¬¬ä¸‰æ–¹æ¨¡å—è¯´æ˜"></a>ç¬¬ä¸‰æ–¹æ¨¡å—è¯´æ˜</h2><p>é¦–å…ˆå…ˆè®²å‡ ä¸ªç¬¬ä¸‰æ–¹çš„nodeæ¨¡å—äº†è§£ä¸€ä¸‹ï¼Œå› ä¸ºåé¢çš„ä»£ç è®²è§£ä¸­ä¼šç”¨åˆ°ï¼Œä¸å»çœ‹å…·ä½“å®ç°ï¼Œåªè¦çŸ¥é“å…¶åŠŸèƒ½å°±è¡Œï¼š </p><ul><li><strong><a href="https://github.com/koajs/compose" target="_blank" rel="noopener">koa-compose</a></strong>ï¼š æä¾›ç»™å®ƒä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„ï¼Œ è¿”å›ä¸€ä¸ªé¡ºåºæ‰§è¡Œæ‰€æœ‰ä¸­é—´ä»¶çš„æ‰§è¡Œå‡½æ•°</li><li><strong><a href="https://github.com/jshttp/methods" target="_blank" rel="noopener">methods</a></strong>ï¼š nodeä¸­æ”¯æŒçš„httpåŠ¨è¯ï¼Œå°±æ˜¯http.METHODSï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å‡ºçœ‹çœ‹</li><li><strong><a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener">path-to-regexp</a></strong>ï¼š å°†è·¯å¾„å­—ç¬¦ä¸²è½¬æ¢æˆå¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜å¯ä»¥è¾“å‡ºè·¯å¾„å‚æ•°</li></ul><h2 id="Router-amp-Layer"><a href="#Router-amp-Layer" class="headerlink" title="Router &amp; Layer"></a>Router &amp; Layer</h2><p><img src="/image/koa_route_route_and_layer.png" alt=""></p><p>Router å’Œ Layer åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ†åˆ«åœ¨router.js å’Œ layer.jsä¸­ï¼Œkoa-routerçš„æ‰€æœ‰ä»£ç ä¹Ÿå°±åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥çŸ¥é“å®ƒçš„ä»£ç é‡å¹¶ä¸æ˜¯å¾ˆå¤šã€‚</p><h4 id="Router-åˆ›å»ºç®¡ç†æ•´ä¸ªè·¯ç”±æ¨¡å—çš„å®ä¾‹"><a href="#Router-åˆ›å»ºç®¡ç†æ•´ä¸ªè·¯ç”±æ¨¡å—çš„å®ä¾‹" class="headerlink" title="Router: åˆ›å»ºç®¡ç†æ•´ä¸ªè·¯ç”±æ¨¡å—çš„å®ä¾‹"></a>Router: åˆ›å»ºç®¡ç†æ•´ä¸ªè·¯ç”±æ¨¡å—çš„å®ä¾‹</h4><ul><li><strong>this.methods</strong>: åœ¨åé¢è¦è®²çš„allowedMethodsæ–¹æ³•ä¸­è¦ç”¨åˆ°çš„ï¼Œç›®çš„æ˜¯å“åº”optionsè¯·æ±‚å’Œè¯·æ±‚å‡ºé”™çš„å¤„ç†</li><li><strong>this.params</strong>: å…¨å±€çš„è·¯ç”±å‚æ•°å¤„ç†çš„ä¸­é—´ä»¶ç»„æˆçš„å¯¹è±¡</li><li><strong>this.stack</strong>: å…¶å®å°±æ˜¯å„ä¸ªè·¯ç”±(Layer)å®ä¾‹ç»„æˆçš„æ•°ç»„ã€‚æ¯æ¬¡å¤„ç†è¯·æ±‚æ—¶éƒ½éœ€è¦å¾ªç¯è¿™ä¸ªæ•°ç»„æ‰¾åˆ°åŒ¹é…çš„è·¯ç”±</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Router</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¸¸ç”¨çš„ å»new æ–¹å¼</span></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–Routeråªéœ€è¦è°ƒç”¨require('koa-router')()ï¼Œè€Œä¸éœ€è¦è°ƒç”¨new require('koa-router')()æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Router)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Router(opts);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.opts = opts || &#123;&#125;;</span><br><span class="line">  <span class="keyword">this</span>.methods = <span class="keyword">this</span>.opts.methods || [</span><br><span class="line">    <span class="string">'HEAD'</span>,</span><br><span class="line">    <span class="string">'OPTIONS'</span>,</span><br><span class="line">    <span class="string">'GET'</span>,</span><br><span class="line">    <span class="string">'PUT'</span>,</span><br><span class="line">    <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="string">'POST'</span>,</span><br><span class="line">    <span class="string">'DELETE'</span></span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.params = &#123;&#125;;</span><br><span class="line">  <span class="keyword">this</span>.stack = [];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="Layer-åˆ›å»ºå„ä¸ªè·¯ç”±å®ä¾‹"><a href="#Layer-åˆ›å»ºå„ä¸ªè·¯ç”±å®ä¾‹" class="headerlink" title="Layer: åˆ›å»ºå„ä¸ªè·¯ç”±å®ä¾‹"></a>Layer: åˆ›å»ºå„ä¸ªè·¯ç”±å®ä¾‹</h4><p>è¿™é‡Œçš„this.stackå’ŒRouterä¸­çš„ä¸åŒï¼Œè¿™é‡Œçš„æ˜¯è·¯ç”±æ‰€æœ‰çš„ä¸­é—´ä»¶çš„æ•°ç»„ã€‚ï¼ˆä¸€ä¸ªè·¯ç”±å¯ä»¥æœ‰å¤šä¸ªä¸­é—´ä»¶ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Layer</span>(<span class="params">path, methods, middleware, opts</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.stack = <span class="built_in">Array</span>.isArray(middleware) ? middleware : [middleware];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸ºç»™åé¢çš„allowedMthodså¤„ç†</span></span><br><span class="line">  methods.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">method</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> l = <span class="keyword">this</span>.methods.push(method.toUpperCase());</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.methods[l<span class="number">-1</span>] === <span class="string">'GET'</span>) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯getè¯·æ±‚ï¼Œåˆ™æ”¯æŒheadè¯·æ±‚</span></span><br><span class="line">      <span class="keyword">this</span>.methods.unshift(<span class="string">'HEAD'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¡®ä¿è·¯ç”±çš„æ¯ä¸ªä¸­é—´ä»¶éƒ½æ˜¯å‡½æ•°</span></span><br><span class="line">  <span class="keyword">this</span>.stack.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> type = (<span class="keyword">typeof</span> fn);</span><br><span class="line">    <span class="keyword">if</span> (type !== <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">        methods.toString() + <span class="string">" `"</span> + (<span class="keyword">this</span>.opts.name || path) +<span class="string">"`: `middleware` "</span></span><br><span class="line">        + <span class="string">"must be a function, not `"</span> + type + <span class="string">"`"</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.path = path;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨path-to-regeæ¨¡å—ç”Ÿäº§çš„è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">  <span class="keyword">this</span>.regexp = pathToRegExp(path, <span class="keyword">this</span>.paramNames, <span class="keyword">this</span>.opts);</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="router-register-æ³¨å†Œè·¯ç”±"><a href="#router-register-æ³¨å†Œè·¯ç”±" class="headerlink" title="router.register() æ³¨å†Œè·¯ç”±"></a>router.register() æ³¨å†Œè·¯ç”±</h2><p>ä»ä¸Šä¸€ç¯‡çš„ä»£ç ç»“æ„å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒRouterçš„å‡ ä¸ªå®ä¾‹æ–¹æ³•éƒ½ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨äº†registeræ–¹æ³•ï¼Œå¯è§ï¼Œå®ƒåº”è¯¥æ˜¯æ¯”è¾ƒæ ¸å¿ƒçš„å‡½æ•°, ä»£ç ä¸é•¿ï¼Œæˆ‘ä»¬ä¸€è¡Œè¡Œçœ‹ä¸€ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Router.prototype.register = <span class="function"><span class="keyword">function</span> (<span class="params">path, methods, middleware, opts</span>) </span>&#123;</span><br><span class="line">  opts = opts || &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> router = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¨éƒ¨è·¯ç”±</span></span><br><span class="line">  <span class="keyword">var</span> stack = <span class="keyword">this</span>.stack;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯´æ˜è·¯ç”±çš„pathæ˜¯æ”¯æŒæ•°ç»„çš„</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œéœ€è¦é€’å½’è°ƒç”¨registeræ¥æ³¨å†Œè·¯ç”±</span></span><br><span class="line">  <span class="comment">// å› ä¸ºä¸€ä¸ªpathå¯¹åº”ä¸€ä¸ªè·¯ç”±</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(path)) &#123;</span><br><span class="line">    path.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">      router.register.call(router, p, methods, middleware, opts);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºè·¯ç”±ï¼Œè·¯ç”±å°±æ˜¯Layerçš„å®ä¾‹</span></span><br><span class="line">  <span class="comment">// methods æ˜¯è·¯ç”±å¤„ç†çš„httpæ–¹æ³•</span></span><br><span class="line">  <span class="comment">// æœ€åä¸€ä¸ªå‚æ•°å¯¹è±¡æœ€ç»ˆæ˜¯ä¼ ç»™Layeræ¨¡å—ä¸­çš„path-to-regexpæ¨¡å—æ¥å£è°ƒç”¨çš„</span></span><br><span class="line">  <span class="keyword">var</span> route = <span class="keyword">new</span> Layer(path, methods, middleware, &#123;</span><br><span class="line">    end: opts.end === <span class="literal">false</span> ? opts.end : <span class="literal">true</span>,</span><br><span class="line">    name: opts.name,</span><br><span class="line">    sensitive: opts.sensitive || <span class="keyword">this</span>.opts.sensitive || <span class="literal">false</span>,</span><br><span class="line">    strict: opts.strict || <span class="keyword">this</span>.opts.strict || <span class="literal">false</span>,</span><br><span class="line">    prefix: opts.prefix || <span class="keyword">this</span>.opts.prefix || <span class="string">""</span>,</span><br><span class="line">    ignoreCaptures: opts.ignoreCaptures</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†è·¯å¾„å‰ç¼€</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.opts.prefix) &#123;</span><br><span class="line">    route.setPrefix(<span class="keyword">this</span>.opts.prefix);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†å…¨å±€çš„è·¯ç”±å‚æ•°æ·»åŠ åˆ°æ¯ä¸ªè·¯ç”±ä¸­</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.params).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">    route.param(param, <span class="keyword">this</span>.params[param]);</span><br><span class="line">  &#125;, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¾€è·¯ç”±æ•°ç»„ä¸­æ·»åŠ æ–°åˆ›å»ºçš„è·¯ç”±</span></span><br><span class="line">  stack.push(route);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> route;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="router-verb-æ³¨å†Œè·¯ç”±"><a href="#router-verb-æ³¨å†Œè·¯ç”±" class="headerlink" title="router.verb() æ³¨å†Œè·¯ç”±"></a>router.verb() æ³¨å†Œè·¯ç”±</h2><blockquote><p>verb =&gt; get|put|post|patch|delete </p></blockquote><p>è¿™æ˜¯koa-routeræä¾›çš„ç›´æ¥æ³¨å†Œç›¸åº”httpæ–¹æ³•çš„è·¯ç”±ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯ä¼šè°ƒç”¨registeræ–¹æ³•å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/user'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ctx, next</span>)</span>&#123;...&#125;)</span><br></pre></td></tr></table></figure><p>å’Œä¸‹é¢åˆ©ç”¨registeræ–¹æ³•ç­‰ä»·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.register(<span class="string">'/user'</span>, [<span class="string">'get'</span>], [<span class="function"><span class="keyword">function</span>(<span class="params">ctx, next</span>)</span>&#123;...&#125;])</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç›´æ¥ä½¿ç”¨router.verbæ³¨å†Œè·¯ç”±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚æ¥çœ‹çœ‹ä»£ç ï¼Œä½ ä¼šå‘ç°router.jsçš„ä»£ç é‡Œå¹¶æ²¡æœ‰Router.prototype.getçš„ä»£ç å‡ºç°ï¼ŒåŸå› æ˜¯å®ƒè¿˜ä¾èµ–äº†ä¸Šé¢æåˆ°çš„methodsæ¨¡å—æ¥å®ç°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œçš„methodså°±æ˜¯ä¸Šé¢çš„methodsæ¨¡å—æä¾›çš„æ•°ç»„</span></span><br><span class="line">methods.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">method</span>) </span>&#123;</span><br><span class="line">  Router.prototype[method] = <span class="function"><span class="keyword">function</span> (<span class="params">name, path, middleware</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> middleware;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™æ®µä»£ç åšäº†ä¸¤ä»¶äº‹ï¼š</span></span><br><span class="line">    <span class="comment">// 1.name å‚æ•°æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥è¦åšä¸€äº›å‚æ•°ç½®æ¢çš„å¤„ç†</span></span><br><span class="line">    <span class="comment">// 2.å°†æ‰€æœ‰è·¯ç”±ä¸­é—´ä»¶åˆå¹¶æˆä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> path === <span class="string">'string'</span> || path <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) &#123;</span><br><span class="line">      middleware = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">2</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      middleware = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">      path = name;</span><br><span class="line">      name = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨registeræ–¹æ³•</span></span><br><span class="line">    <span class="keyword">this</span>.register(path, [method], middleware, &#123;</span><br><span class="line">      name: name</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="router-routes-å¯åŠ¨è·¯ç”±"><a href="#router-routes-å¯åŠ¨è·¯ç”±" class="headerlink" title="router.routes() å¯åŠ¨è·¯ç”±"></a>router.routes() å¯åŠ¨è·¯ç”±</h2><p>è¿™æ˜¯åœ¨koaä¸­é…ç½®è·¯ç”±çš„é‡è¦ä¸€æ­¥ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)();</span><br><span class="line">...</span><br><span class="line">app.use(router.routes())</span><br></pre></td></tr></table></figure></p><p>å°±è¿™æ ·ï¼Œkoa-routerå°±å¯åŠ¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸€å®šä¼šå¾ˆå¥½å¥‡è¿™ä¸ªrouteså‡½æ•°åˆ°åº•åšäº†ä»€ä¹ˆ,ä½†å¯ä»¥è‚¯å®šrouter.routes()è¿”å›äº†ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚<br>å‡½æ•°ä½“é•¿äº†ä¸€ç‚¹ï¼Œç®€åŒ–ä¸€ä¸‹çœ‹ä¸‹æ•´ä½“è½®å»“ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Router.prototype.routes = Router.prototype.middleware = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> router = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> dispatch = <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch.router = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> dispatch;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œåœ¨routeså‡½æ•°å†…éƒ¨è¿”å›äº†ä¸€ä¸ªdispatchå‡½æ•°ä½œä¸ºä¸­é—´ä»¶ã€‚<br>æ¥ä¸‹æ¥çœ‹ä¸‹dispatchå‡½æ•°çš„å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dispatch = <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> path = router.opts.routerPath || ctx.routerPath || ctx.path;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// router.matchå‡½æ•°å†…éƒ¨éå†æ‰€æœ‰è·¯ç”±ï¼ˆthis.stachï¼‰,</span></span><br><span class="line">    <span class="comment">// æ ¹æ®è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•æ‰¾åˆ°å¯¹åº”çš„è·¯ç”±</span></span><br><span class="line">    <span class="comment">// è¿”å›çš„matchedå¯¹è±¡ä¸ºï¼š </span></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">      var matched = &#123;</span></span><br><span class="line"><span class="comment">        path: [], // ä¿å­˜äº†pathåŒ¹é…çš„è·¯ç”±æ•°ç»„</span></span><br><span class="line"><span class="comment">        pathAndMethod: [], // ä¿å­˜äº†pathå’Œmethodséƒ½åŒ¹é…çš„è·¯ç”±æ•°ç»„</span></span><br><span class="line"><span class="comment">        route: false // æ˜¯å¦æœ‰å¯¹åº”çš„è·¯ç”±</span></span><br><span class="line"><span class="comment">      &#125;;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">var</span> matched = router.match(path, ctx.method);</span><br><span class="line">    <span class="keyword">var</span> layerChain, layer, i;</span><br><span class="line">    <span class="keyword">if</span> (ctx.matched) &#123;</span><br><span class="line">      ctx.matched.push.apply(ctx.matched, matched.path);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ctx.matched = matched.path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰å¯¹åº”çš„è·¯ç”±ï¼Œåˆ™ç›´æ¥è¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (!matched.route) <span class="keyword">return</span> next();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æ­£ç¡®çš„è·¯ç”±çš„path</span></span><br><span class="line">    <span class="keyword">var</span> mostSpecificPath = matched.pathAndMethod[matched.pathAndMethod.length - <span class="number">1</span>].path;</span><br><span class="line">    ctx._matchedRoute = mostSpecificPath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨reduceæ–¹æ³•å°†è·¯ç”±çš„æ‰€æœ‰ä¸­é—´ä»¶å½¢æˆä¸€æ¡é“¾</span></span><br><span class="line">    layerChain = matched.pathAndMethod.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">memo, layer</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åœ¨æ¯ä¸ªè·¯ç”±çš„ä¸­é—´ä»¶æ‰§è¡Œä¹‹å‰ï¼Œæ ¹æ®å‚æ•°ä¸åŒï¼Œè®¾ç½® ctx.captures å’Œ ctx.params</span></span><br><span class="line">      <span class="comment">// è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸­é—´ä»¶å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ ctx.params æ¥è¯»å–è·¯ç”±å‚æ•°ä¿¡æ¯äº†</span></span><br><span class="line">      memo.push(<span class="function"><span class="keyword">function</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›è·¯ç”±çš„å‚æ•°çš„key </span></span><br><span class="line">        ctx.captures = layer.captures(path, ctx.captures);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›å‚æ•°çš„keyå’Œå¯¹åº”çš„valueç»„æˆçš„å¯¹è±¡</span></span><br><span class="line">        ctx.params = layer.params(path, ctx.captures, ctx.params);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">        <span class="keyword">return</span> next();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å°†ä¸Šé¢å¦å¤–åŠ çš„ä¸­é—´ä»¶å’Œå·²æœ‰çš„è·¯ç”±ä¸­é—´ä»¶åˆå¹¶åˆ°ä¸€èµ·</span></span><br><span class="line">      <span class="comment">// æ‰€ä»¥æœ€ç»ˆ layerChain å°†ä¼šæ˜¯ä¸€ä¸ªä¸­é—´ä»¶çš„æ•°ç»„</span></span><br><span class="line">      <span class="keyword">return</span> memo.concat(layer.stack);</span><br><span class="line">    &#125;, []);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€åè°ƒç”¨ä¸Šé¢æåˆ°çš„ compose æ¨¡å—æä¾›çš„æ–¹æ³•ï¼Œè¿”å›å°† layerChain (ä¸­é—´ä»¶çš„æ•°ç»„) </span></span><br><span class="line">    <span class="comment">// é¡ºåºæ‰§è¡Œæ‰€æœ‰ä¸­é—´ä»¶çš„æ‰§è¡Œå‡½æ•°ï¼Œ å¹¶ç«‹å³æ‰§è¡Œã€‚</span></span><br><span class="line">    <span class="keyword">return</span> compose(layerChain)(ctx, next);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></p><h2 id="router-allowMethods-å¤„ç†è¯·æ±‚å‡ºé”™é€»è¾‘"><a href="#router-allowMethods-å¤„ç†è¯·æ±‚å‡ºé”™é€»è¾‘" class="headerlink" title="router.allowMethods() å¤„ç†è¯·æ±‚å‡ºé”™é€»è¾‘"></a>router.allowMethods() å¤„ç†è¯·æ±‚å‡ºé”™é€»è¾‘</h2><p>åŒæ ·ä¹Ÿæ˜¯koaä¸­é…ç½®è·¯ç”±çš„ä¸­ä¸€æ­¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)();</span><br><span class="line">...</span><br><span class="line">app.use(router.routes())</span><br><span class="line">app.use(router.allowMethods())</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯é—­åŒ…å†…è¿”å›äº†ä¸­é—´ä»¶å‡½æ•°ã€‚æˆ‘ä»¬å°†ä»£ç ç®€åŒ–ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Router.prototype.allowedMethods = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  options = options || &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> implemented = <span class="keyword">this</span>.methods;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">allowedMethods</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> next().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> allowed = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!ctx.status || ctx.status === <span class="number">404</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!~implemented.indexOf(ctx.method)) &#123;</span><br><span class="line">          <span class="keyword">if</span> (options.throw) &#123;</span><br><span class="line">            ...</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ctx.status = <span class="number">501</span>;</span><br><span class="line">            ctx.set(<span class="string">'Allow'</span>, allowedArr);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (allowedArr.length) &#123;</span><br><span class="line">          <span class="keyword">if</span> (ctx.method === <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">            ctx.status = <span class="number">204</span>;</span><br><span class="line">            ctx.set(<span class="string">'Allow'</span>, allowedArr);</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!allowed[ctx.method]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (options.throw) &#123;</span><br><span class="line">              ...</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              ctx.status = <span class="number">405</span>;</span><br><span class="line">              ctx.set(<span class="string">'Allow'</span>, allowedArr);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>çœ¼å°–çš„åŒå­¦å¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›http code ï¼š 404, 501, 204, 405<br>é‚£è¿™ä¸ªå‡½æ•°å…¶å®å°±æ˜¯å½“æ‰€æœ‰ä¸­é—´ä»¶å‡½æ•°æ‰§è¡Œå®Œäº†ï¼Œå¹¶ä¸”è¯·æ±‚å‡ºé”™äº†è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼š</p><ul><li>å¦‚æœè¯·æ±‚çš„æ–¹æ³•koa-routerä¸æ”¯æŒå¹¶ä¸”æ²¡æœ‰è®¾ç½®throwé€‰é¡¹ï¼Œåˆ™è¿”å› 501(æœªå®ç°)</li><li>å¦‚æœæ˜¯optionsè¯·æ±‚ï¼Œåˆ™è¿”å› 204(æ— å†…å®¹)</li><li>å¦‚æœè¯·æ±‚çš„æ–¹æ³•æ”¯æŒä½†æ²¡æœ‰è®¾ç½®throwé€‰é¡¹ï¼Œåˆ™è¿”å› 405(ä¸å…è®¸æ­¤æ–¹æ³• )</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> åå° </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Node-Koaä¸­é—´ä»¶çš„æ´‹è‘±åœˆæ¨¡å‹</title>
      <link href="/2019/01/29/Node-koa-compose%E6%B4%8B%E8%91%B1%E5%9C%88%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/"/>
      <url>/2019/01/29/Node-koa-compose%E6%B4%8B%E8%91%B1%E5%9C%88%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="Koaæ´‹è‘±åœˆæ¨¡å‹"><a href="#Koaæ´‹è‘±åœˆæ¨¡å‹" class="headerlink" title="Koaæ´‹è‘±åœˆæ¨¡å‹"></a>Koaæ´‹è‘±åœˆæ¨¡å‹</h2><p>Koaçš„ä¸­é—´ä»¶é€‰æ‹©äº†æ´‹è‘±åœˆæ¨¡å‹ã€‚ä¸­é—´ä»¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/image/koa_middleware.png" alt=""></p><p>æ‰€æœ‰çš„è¯·æ±‚ç»è¿‡ä¸€ä¸ªä¸­é—´ä»¶çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼ŒKoa çš„æ´‹è‘±åœˆæ¨¡å‹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°åç½®å¤„ç†é€»è¾‘ã€‚</p><h2 id="Koaæ´‹è‘±åœˆå®ä¾‹"><a href="#Koaæ´‹è‘±åœˆå®ä¾‹" class="headerlink" title="Koaæ´‹è‘±åœˆå®ä¾‹"></a>Koaæ´‹è‘±åœˆå®ä¾‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºkoaå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä¸­é—´ä»¶</span></span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1-start'</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1-end'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2-start'</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2-end'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'3-start'</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'3-end'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœåŠ¡</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">----&gt; æ‰“å°ç»“æœï¼š</span><br><span class="line">----&gt; <span class="number">1</span>-start</span><br><span class="line">----&gt; <span class="number">2</span>-start</span><br><span class="line">----&gt; <span class="number">3</span>-start</span><br><span class="line">----&gt; <span class="number">3</span>-end</span><br><span class="line">----&gt; <span class="number">2</span>-end</span><br><span class="line">----&gt; <span class="number">1</span>-end</span><br></pre></td></tr></table></figure><h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><p>æœ¬æ–‡é‡ç‚¹åœ¨äºè®²è§£koaä¸­é—´ä»¶çš„æ´‹è‘±åœˆæ¨¡å‹ã€‚å› æ­¤ï¼Œä¼šçœç•¥éƒ¨åˆ†æ— å…³ä»£ç ã€‚</p><h4 id="koa-useæ–¹æ³•"><a href="#koa-useæ–¹æ³•" class="headerlink" title="koa.useæ–¹æ³•"></a>koa.useæ–¹æ³•</h4><p>useæ–¹æ³•ï¼Œä¸ºå£°æ˜ä¸­é—´ä»¶çš„æ–¹æ³•ï¼Œå°†ä¸­é—´ä»¶å­˜å‚¨åœ¨middlewareæ•°ç»„ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use(fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'middleware must be a function!'</span>);</span><br><span class="line"></span><br><span class="line">    debug(<span class="string">'use %s'</span>, fn._name || fn.name || <span class="string">'-'</span>);</span><br><span class="line">    <span class="keyword">this</span>.middleware.push(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="koa-listenæ–¹æ³•"><a href="#koa-listenæ–¹æ³•" class="headerlink" title="koa.listenæ–¹æ³•"></a>koa.listenæ–¹æ³•</h4><p>listenæ–¹æ³•ï¼Œä¸ºå¯åŠ¨http-serverçš„ç®€ä¾¿æ“ä½œã€‚å…³é”®æ“ä½œè¿˜æ˜¯åœ¨callbackæ–¹æ³•ä¸Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">listen(...args) &#123;</span><br><span class="line">    debug(<span class="string">'listen'</span>);</span><br><span class="line">    <span class="keyword">const</span> server = http.createServer(<span class="keyword">this</span>.callback());</span><br><span class="line">    <span class="keyword">return</span> server.listen(...args);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="koa-callbackæ–¹æ³•"><a href="#koa-callbackæ–¹æ³•" class="headerlink" title="koa.callbackæ–¹æ³•"></a>koa.callbackæ–¹æ³•</h4><p>callbackæ–¹æ³•ï¼Œè¿”å›å‚æ•°ä¸º(req, res)çš„æ–¹æ³•ï¼Œæ¯æ¬¡http-serverå‘ç”Ÿå›è°ƒæ—¶ï¼Œéƒ½ä¼šè°ƒç”¨callbackæ–¹æ³•ã€‚å› æ­¤ï¼Œcallbackæ–¹æ³•æ‰æ˜¯çœŸæ­£çš„koaæ‰§è¡Œhttp-serverçš„æºå¤´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">callback() &#123;</span><br><span class="line"><span class="comment">// å®ç°æ´‹è‘±åœˆçš„å…³é”®ä»£ç ï¼Œä»useæ–¹æ³•å¯çŸ¥ï¼Œæˆ‘ä»¬å°†ä¸­é—´ä»¶pushåˆ°äº†middlewareæ•°ç»„ä¸­ã€‚é‚£ä¹ˆcomposeæ–¹æ³•å¦‚ä½•å°†middlewareçš„æ•°ç»„è½¬æ¢ä¸ºäº†æ´‹è‘±åœˆæ¨¡å‹çš„æ–¹æ³•fnã€‚å°±æ˜¯å®ç°æ´‹è‘±åœˆæ¨¡å‹çš„å…³é”®äº†ã€‚</span></span><br><span class="line">    <span class="keyword">const</span> fn = compose(<span class="keyword">this</span>.middleware);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> handleRequest = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> ctx = <span class="keyword">this</span>.createContext(req, res);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.handleRequest(ctx, fn);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> handleRequest;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="koa-composeçš„composeæ–¹æ³•"><a href="#koa-composeçš„composeæ–¹æ³•" class="headerlink" title="koa-composeçš„composeæ–¹æ³•"></a>koa-composeçš„composeæ–¹æ³•</h4><p>composeæ–¹æ³•ï¼Œä¸»è¦ä½œç”¨æ˜¯å°†ä¸­é—´ä»¶æ•°ç»„ï¼ŒåŒ…è£…æˆäº†æ´‹è‘±åœˆæ¨¡å‹ä¸­é—´ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span> (<span class="params">middleware</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒmiddlewareæ ¼å¼ï¼Œå¿…é¡»ä¸ºæ•°ç»„ï¼Œå­å…ƒç´ å¿…é¡»ä¸ºæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(middleware)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Middleware stack must be an array!'</span>)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> fn <span class="keyword">of</span> middleware) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Middleware must be composed of functions!'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * @param &#123;Object&#125; context</span></span><br><span class="line"><span class="comment">   * @return &#123;Promise&#125;</span></span><br><span class="line"><span class="comment">   * @api public</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">context, next</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// last called middleware #</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="number">0</span>)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æ­£å¸¸æƒ…å†µä¸‹ï¼Œ index æ°¸è¿œå°äº iï¼Œé™¤énext()è¢«å¤šæ¬¡è°ƒç”¨ã€‚</span></span><br><span class="line">      <span class="keyword">if</span> (i &lt;= index) <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'next() called multiple times'</span>))</span><br><span class="line">      index = i</span><br><span class="line">      <span class="keyword">let</span> fn = middleware[i]</span><br><span class="line">      <span class="comment">// å¦‚æœnextå‚æ•°å­˜åœ¨ï¼Œåˆ™nextæ–¹æ³•åœ¨æœ€åè°ƒç”¨ã€‚</span></span><br><span class="line">      <span class="keyword">if</span> (i === middleware.length) fn = next</span><br><span class="line">      <span class="keyword">if</span> (!fn) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve()</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// é€’å½’è°ƒç”¨dispatchæ–¹æ³•å®ç°ä»ä¸­é—´ä»¶æ•°ç»„åˆ°æ´‹è‘±åœˆæ¨¡å‹ä¸­é—´ä»¶çš„è½¬å˜ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(fn(context, dispatch.bind(<span class="literal">null</span>, i + <span class="number">1</span>)));</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="koa-handleRequestæ–¹æ³•"><a href="#koa-handleRequestæ–¹æ³•" class="headerlink" title="koa.handleRequestæ–¹æ³•"></a>koa.handleRequestæ–¹æ³•</h4><p>handleRequestæ–¹æ³•ï¼Œæ¶ˆè´¹æ´‹è‘±åœˆæ¨¡å‹ä¸­é—´ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">handleRequest(ctx, fnMiddleware) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = ctx.res;</span><br><span class="line">    res.statusCode = <span class="number">404</span>;</span><br><span class="line">    <span class="keyword">const</span> onerror = <span class="function"><span class="params">err</span> =&gt;</span> ctx.onerror(err);</span><br><span class="line">    <span class="keyword">const</span> handleResponse = <span class="function"><span class="params">()</span> =&gt;</span> respond(ctx);</span><br><span class="line">    onFinished(res, onerror);</span><br><span class="line">    <span class="comment">// æ´‹è‘±åœˆæ¨¡å‹ä¸­é—´ä»¶ï¼Œè¿”å›çš„éƒ½æ˜¯Promiseï¼Œé€šè¿‡ä¸‹é¢ä»£ç æ¶ˆè´¹ä¸­é—´ä»¶</span></span><br><span class="line">    <span class="keyword">return</span> fnMiddleware(ctx).then(handleResponse).catch(onerror);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://eggjs.org/zh-cn/intro/egg-and-koa.html" target="_blank" rel="noopener">https://eggjs.org/zh-cn/intro/egg-and-koa.html</a><br><a href="https://www.jianshu.com/p/5d0f1d9ef746" target="_blank" rel="noopener">https://www.jianshu.com/p/5d0f1d9ef746</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> åå° </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ•°æ®åº“-MySqlæ“ä½œå¤§å…¨</title>
      <link href="/2019/01/24/%E6%95%B0%E6%8D%AE%E5%BA%93-MySql%E6%93%8D%E4%BD%9C%E5%A4%A7%E5%85%A8/"/>
      <url>/2019/01/24/%E6%95%B0%E6%8D%AE%E5%BA%93-MySql%E6%93%8D%E4%BD%9C%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®ç±»å‹ä»‹ç»"><a href="#æ•°æ®ç±»å‹ä»‹ç»" class="headerlink" title="æ•°æ®ç±»å‹ä»‹ç»"></a>æ•°æ®ç±»å‹ä»‹ç»</h2><h3 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>èŒƒå›´</th><th>è¯¦æƒ…</th></tr></thead><tbody><tr><td>TINYINT</td><td>1 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-128ï¼Œ127) <br>æ— ç¬¦å·:(0ï¼Œ255)</td><td>æå°æ•´æ•°å€¼</td></tr><tr><td>SMALLINT</td><td>2 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-32 768ï¼Œ32 767) <br>æ— ç¬¦å·:(0ï¼Œ65 535)</td><td>å°æ•´æ•°å€¼</td></tr><tr><td>MEDIUMINT</td><td>3 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-8 388 608ï¼Œ8 388 607) <br>æ— ç¬¦å·:(0ï¼Œ16 777 215)</td><td>ä¸­ç­‰æ•´æ•°å€¼</td></tr><tr><td>INTæˆ–INTEGER</td><td>4 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-2 147 483 648ï¼Œ2 147 483 647) <br>æ— ç¬¦å·:(0ï¼Œ4 294 967 295)</td><td>å¤§æ•´æ•°å€¼</td></tr><tr><td>BIGINT</td><td>8 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-9,223,372,036,854,775,808ï¼Œ9 223 372 036 854 775 807) <br>æ— ç¬¦å·:(0ï¼Œ18 446 744 073 709 551 615)</td><td>æå¤§æ•´æ•°å€¼</td></tr><tr><td>FLOAT</td><td>4 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-3.402 823 466 E+38ï¼Œ-1.175 494 351 E-38)ï¼Œ0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466 351 E+38) <br>æ— ç¬¦å·:0ï¼Œ(1.175 494 351 E-38ï¼Œ3.402 823 466 E+38)</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td>DOUBLE</td><td>8 å­—èŠ‚</td><td>æœ‰ç¬¦å·:(-1.797 693 134 862 315 7 E+308ï¼Œ-2.225 073 858 507 201 4 E-308)ï¼Œ0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797 693 134 862 315 7 E+308) <br>æ— ç¬¦å·:0ï¼Œ(2.225 073 858 507 201 4 E-308ï¼Œ1.797 693 134 862 315 7 E+308)</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td>DECIMAL</td><td>å¯¹DECIMAL(M,D) ï¼Œå¦‚æœM&gt;Dï¼Œä¸ºM+2å¦åˆ™ä¸ºD+2</td><td>ä¾èµ–äºMå’ŒDçš„å€¼</td><td>å°æ•°å€¼</td></tr></tbody></table><h3 id="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"><a href="#æ—¥æœŸå’Œæ—¶é—´ç±»å‹" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"></a>æ—¥æœŸå’Œæ—¶é—´ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>èŒƒå›´</th><th>æ ¼å¼</th><th>è¯¦æƒ…</th></tr></thead><tbody><tr><td>DATE</td><td>3å­—èŠ‚</td><td>1000-01-01 åˆ° 9999-12-31</td><td>YYYY-MM-DD</td><td>æ—¥æœŸå€¼</td></tr><tr><td>TIME</td><td>3å­—èŠ‚</td><td>-838:59:59 åˆ° 838:59:59</td><td>HH:MM:SS</td><td>æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td></tr><tr><td>YEAR</td><td>1å­—èŠ‚</td><td>1901 åˆ° 2155</td><td>YYYY</td><td>å¹´ä»½å€¼</td></tr><tr><td>DATETIME</td><td>8å­—èŠ‚</td><td>1000-01-01 00:00:00 åˆ° 9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td></tr><tr><td>TIMESTAMP</td><td>4å­—èŠ‚</td><td>1970-01-01 00:00:00 åˆ° 2038å¹´1æœˆ19æ—¥ å‡Œæ™¨ 03:14:07ï¼ˆæ ¼æ—å°¼æ²»æ—¶é—´ï¼‰</td><td>YYYYMMDD HHMMSS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td></tr></tbody></table><h3 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>è¯¦æƒ…</th></tr></thead><tbody><tr><td>CHAR</td><td>0 åˆ° 255B</td><td>å®šé•¿å­—ç¬¦ä¸²</td></tr><tr><td>VARCHAR</td><td>0 åˆ° 64K</td><td>å˜é•¿å­—ç¬¦ä¸²</td></tr><tr><td>TINYBLOB</td><td>0 åˆ° 255B</td><td>ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td></tr><tr><td>TINYTEXT</td><td>0 åˆ° 255B</td><td>çŸ­æ–‡æœ¬å­—ç¬¦ä¸²</td></tr><tr><td>BLOB</td><td>0 åˆ° 64K</td><td>äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td>TEXT</td><td>0 åˆ° 64K</td><td>é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td>MEDIUMBLOB</td><td>0 åˆ° 16K</td><td>äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td>MEDIUMTEXT</td><td>0 åˆ° 16K</td><td>ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td>LONGBLOB</td><td>0 åˆ° 4GB</td><td>äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®</td></tr><tr><td>LONGTEXT</td><td>0 åˆ° 4GB</td><td>æå¤§æ–‡æœ¬æ•°æ®</td></tr></tbody></table><h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¿æ¥åˆ°æ•°æ®åº“</span></span><br><span class="line">mysql -uroot -ppassword -hlocalhost -P3306;</span><br></pre></td></tr></table></figure><h2 id="åˆ‡æ¢æ•°æ®åº“æ“ä½œ"><a href="#åˆ‡æ¢æ•°æ®åº“æ“ä½œ" class="headerlink" title="åˆ‡æ¢æ•°æ®åº“æ“ä½œ"></a>åˆ‡æ¢æ•°æ®åº“æ“ä½œ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥çœ‹æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| daiyibo_test       |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| pakun              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">database</span>;</span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure><h2 id="è¡¨å•æ“ä½œ"><a href="#è¡¨å•æ“ä½œ" class="headerlink" title="è¡¨å•æ“ä½œ"></a>è¡¨å•æ“ä½œ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ˜¾ç¤ºè¡¨å•</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| Tables_in_daiyibo_test |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| test_1                 |</span><br><span class="line">| test_2                 |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ˜¾ç¤ºè¡¨å•åˆ—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> tablename;</span><br><span class="line"><span class="keyword">describe</span> tablename;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| name  | varchar(19) | YES  |     | NULL    |       |</span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| value | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾æ“ä½œ"><a href="#æŸ¥æ‰¾æ“ä½œ" class="headerlink" title="æŸ¥æ‰¾æ“ä½œ"></a>æŸ¥æ‰¾æ“ä½œ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥æ‰¾æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span></span><br><span class="line">| prod_id | vend_id | prod_name      | prod_price | prod_desc                                                      |</span><br><span class="line">+<span class="comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span></span><br><span class="line">| ANV01   |    1001 | .5 ton anvil   |       5.99 | .5 ton anvil, black, complete with handy hook                  |</span><br><span class="line">| ANV02   |    1001 | 1 ton anvil    |       9.99 | 1 ton anvil, black, complete with handy hook and carrying case |</span><br><span class="line">| ANV03   |    1001 | 2 ton anvil    |      14.99 | 2 ton anvil, black, complete with handy hook and carrying case |</span><br><span class="line">| DTNTR   |    1003 | Detonator      |      13.00 | Detonator (plunger powered), fuses not included                |</span><br><span class="line">| FB      |    1003 | Bird seed      |      10.00 | Large bag (suitable for road runners)                          |</span><br><span class="line">| FC      |    1003 | Carrots        |       2.50 | Carrots (rabbit hunting season only)                           |</span><br><span class="line">| FU1     |    1002 | Fuses          |       3.42 | 1 dozen, extra long                                            |</span><br><span class="line">| JP1000  |    1005 | JetPack 1000   |      35.00 | JetPack 1000, intended for single <span class="keyword">use</span>                          |</span><br><span class="line">| JP2000  |    <span class="number">1005</span> | JetPack <span class="number">2000</span>   |      <span class="number">55.00</span> | JetPack <span class="number">2000</span>, multi-<span class="keyword">use</span>                                        |</span><br><span class="line">| OL1     |    <span class="number">1002</span> | Oil can        |       <span class="number">8.99</span> | Oil can, red                                                   |</span><br><span class="line">| <span class="keyword">SAFE</span>    |    <span class="number">1003</span> | <span class="keyword">Safe</span>           |      <span class="number">50.00</span> | <span class="keyword">Safe</span> <span class="keyword">with</span> combination <span class="keyword">lock</span>                                     |</span><br><span class="line">| SLING   |    <span class="number">1003</span> | Sling          |       <span class="number">4.49</span> | Sling, one <span class="keyword">size</span> fits all                                       |</span><br><span class="line">| TNT1    |    <span class="number">1003</span> | TNT (<span class="number">1</span> stick)  |       <span class="number">2.50</span> | TNT, red, single stick                                         |</span><br><span class="line">| TNT2    |    <span class="number">1003</span> | TNT (<span class="number">5</span> sticks) |      <span class="number">10.00</span> | TNT, red, pack <span class="keyword">of</span> <span class="number">10</span> sticks                                    |</span><br><span class="line">+<span class="comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥æ‰¾æŒ‡å®šåˆ—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> vend_id, prod_name <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">---------+----------------+</span></span><br><span class="line">| vend_id | prod_name      |</span><br><span class="line">+<span class="comment">---------+----------------+</span></span><br><span class="line">|    1001 | .5 ton anvil   |</span><br><span class="line">|    1001 | 1 ton anvil    |</span><br><span class="line">|    1001 | 2 ton anvil    |</span><br><span class="line">|    1003 | Detonator      |</span><br><span class="line">|    1003 | Bird seed      |</span><br><span class="line">|    1003 | Carrots        |</span><br><span class="line">|    1002 | Fuses          |</span><br><span class="line">|    1005 | JetPack 1000   |</span><br><span class="line">|    1005 | JetPack 2000   |</span><br><span class="line">|    1002 | Oil can        |</span><br><span class="line">|    1003 | Safe           |</span><br><span class="line">|    1003 | Sling          |</span><br><span class="line">|    1003 | TNT (1 stick)  |</span><br><span class="line">|    1003 | TNT (5 sticks) |</span><br><span class="line">+<span class="comment">---------+----------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥æ‰¾å»é‡åçš„æŒ‡å®šåˆ—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> vend_id <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| vend_id |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">|    1001 |</span><br><span class="line">|    1002 |</span><br><span class="line">|    1003 |</span><br><span class="line">|    1005 |</span><br><span class="line">+<span class="comment">---------+</span></span><br></pre></td></tr></table></figure><h3 id="SELECTå­å¥é¡ºåº"><a href="#SELECTå­å¥é¡ºåº" class="headerlink" title="SELECTå­å¥é¡ºåº"></a>SELECTå­å¥é¡ºåº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é¡ºåºï¼š1      2              3                 4              5                  6              7</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tablename <span class="keyword">where</span> value1 &gt; <span class="number">0</span> <span class="keyword">group</span> <span class="keyword">by</span> value2 <span class="keyword">having</span> value3 &gt; <span class="number">0</span> <span class="keyword">order</span> <span class="keyword">by</span> value4 <span class="keyword">limit</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="æ§åˆ¶è¡Œæ•°"><a href="#æ§åˆ¶è¡Œæ•°" class="headerlink" title="æ§åˆ¶è¡Œæ•°"></a>æ§åˆ¶è¡Œæ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥æ‰¾ä¿¡æ¯åæŒ‡å®šæ£€ç´¢è¡Œæ•°</span></span><br><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">limit</span> <span class="number">5</span>;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| prod_name    |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| .5 ton anvil |</span><br><span class="line">| 1 ton anvil  |</span><br><span class="line">| 2 ton anvil  |</span><br><span class="line">| Detonator    |</span><br><span class="line">| Bird seed    |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥æ‰¾ä¿¡æ¯åæŒ‡å®šæ£€ç´¢çš„å¼€å§‹è¡Œå’Œè¡Œæ•°</span></span><br><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">limit</span> <span class="number">1</span>, <span class="number">5</span>;</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">| prod_name   |</span><br><span class="line">+<span class="comment">-------------+</span></span><br><span class="line">| 1 ton anvil |</span><br><span class="line">| 2 ton anvil |</span><br><span class="line">| Detonator   |</span><br><span class="line">| Bird seed   |</span><br><span class="line">| Carrots     |</span><br><span class="line">+<span class="comment">-------------+</span></span><br></pre></td></tr></table></figure><h3 id="æ’åºæ“ä½œ"><a href="#æ’åºæ“ä½œ" class="headerlink" title="æ’åºæ“ä½œ"></a>æ’åºæ“ä½œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥æ‰¾æ•°æ®åè¿›è¡Œæ’åº</span></span><br><span class="line"><span class="keyword">select</span> vend_id, prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">order</span> <span class="keyword">by</span> vend_id, prod_name <span class="keyword">desc</span>, prod_price <span class="keyword">desc</span>;</span><br><span class="line">+<span class="comment">---------+----------------+------------+</span></span><br><span class="line">| vend_id | prod_name      | prod_price |</span><br><span class="line">+<span class="comment">---------+----------------+------------+</span></span><br><span class="line">|    1001 | 2 ton anvil    |      14.99 |</span><br><span class="line">|    1001 | 1 ton anvil    |       9.99 |</span><br><span class="line">|    1001 | .5 ton anvil   |       5.99 |</span><br><span class="line">|    1002 | Oil can        |       8.99 |</span><br><span class="line">|    1002 | Fuses          |       3.42 |</span><br><span class="line">|    1003 | TNT (5 sticks) |      10.00 |</span><br><span class="line">|    1003 | TNT (1 stick)  |       2.50 |</span><br><span class="line">|    1003 | Sling          |       4.49 |</span><br><span class="line">|    1003 | Safe           |      50.00 |</span><br><span class="line">|    1003 | Detonator      |      13.00 |</span><br><span class="line">|    1003 | Carrots        |       2.50 |</span><br><span class="line">|    1003 | Bird seed      |      10.00 |</span><br><span class="line">|    1005 | JetPack 2000   |      55.00 |</span><br><span class="line">|    1005 | JetPack 1000   |      35.00 |</span><br><span class="line">+<span class="comment">---------+----------------+------------+</span></span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤æ“ä½œ"><a href="#è¿‡æ»¤æ“ä½œ" class="headerlink" title="è¿‡æ»¤æ“ä½œ"></a>è¿‡æ»¤æ“ä½œ</h3><p>å°†æŸ¥æ‰¾åçš„æ•°æ®ï¼Œè¿›è¡Œè¿‡æ»¤æ“ä½œã€‚</p><blockquote><p>è¿‡æ»¤æ“ä½œçš„æ“ä½œç¬¦å¦‚ä¸‹ï¼š<br>=ï¼Œ&lt;&gt;ï¼Œ!=ï¼Œ &lt;ï¼Œ &lt;=ï¼Œ &gt;ï¼Œ &gt;=ï¼Œ between andï¼Œis null</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œæ™®é€šæ“ä½œç¬¦ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_name = <span class="string">"fuses"</span>;</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line">| prod_name | prod_price |</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line">| Fuses     |       3.42 |</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œbetweenæ“ä½œç¬¦ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price <span class="keyword">between</span> <span class="number">10</span> <span class="keyword">and</span> <span class="number">14</span>;</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| prod_name      | prod_price |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| Bird seed      |      10.00 |</span><br><span class="line">| TNT (5 sticks) |      10.00 |</span><br><span class="line">| Detonator      |      13.00 |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œis nullæ“ä½œç¬¦ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> cust_email <span class="keyword">from</span> customers <span class="keyword">where</span> cust_email <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| cust_email |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| NULL       |</span><br><span class="line">| NULL       |</span><br><span class="line">+<span class="comment">------------+</span></span><br></pre></td></tr></table></figure><h3 id="å¤šæ¡ä»¶è¿‡æ»¤æ“ä½œç¬¦"><a href="#å¤šæ¡ä»¶è¿‡æ»¤æ“ä½œç¬¦" class="headerlink" title="å¤šæ¡ä»¶è¿‡æ»¤æ“ä½œç¬¦"></a>å¤šæ¡ä»¶è¿‡æ»¤æ“ä½œç¬¦</h3><p>å°†å¤šä¸ªæ¡ä»¶æ“ä½œç¬¦ç»„åˆèµ·æ¥ï¼Œè¿›è¡Œå¤šæ¡ä»¶è¿‡æ»¤æ“ä½œã€‚</p><ul><li>ANDï¼šå°±æ˜¯æ¡ä»¶â€œä¸”â€çš„æ„æ€</li><li>ORï¼šå°±æ˜¯æ¡ä»¶â€œæˆ–â€çš„æ„æ€</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œor æ“ä½œç¬¦ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1002</span> <span class="keyword">or</span> vend_id=<span class="number">1003</span>;</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| prod_name      | prod_price |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| Fuses          |       3.42 |</span><br><span class="line">| Oil can        |       8.99 |</span><br><span class="line">| Detonator      |      13.00 |</span><br><span class="line">| Bird seed      |      10.00 |</span><br><span class="line">| Carrots        |       2.50 |</span><br><span class="line">| Safe           |      50.00 |</span><br><span class="line">| Sling          |       4.49 |</span><br><span class="line">| TNT (1 stick)  |       2.50 |</span><br><span class="line">| TNT (5 sticks) |      10.00 |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œand æ“ä½œç¬¦ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1002</span> <span class="keyword">and</span> prod_price &gt; <span class="number">4</span>;</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line">| prod_name | prod_price |</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line">| Oil can   |       8.99 |</span><br><span class="line">+<span class="comment">-----------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œorã€and æ“ä½œç¬¦æ··åˆä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> (vend_id=<span class="number">1002</span> <span class="keyword">or</span> vend_id=<span class="number">1003</span>) <span class="keyword">and</span> prod_price &gt; <span class="number">4</span>;</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| prod_name      | prod_price |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line">| Oil can        |       8.99 |</span><br><span class="line">| Detonator      |      13.00 |</span><br><span class="line">| Bird seed      |      10.00 |</span><br><span class="line">| Safe           |      50.00 |</span><br><span class="line">| Sling          |       4.49 |</span><br><span class="line">| TNT (5 sticks) |      10.00 |</span><br><span class="line">+<span class="comment">----------------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œin è¡¨ç¤ºåªè¦å…è®¸å…¶ä¸­()ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ¡ä»¶ï¼Œæ“ä½œç¬¦ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price, vend_id <span class="keyword">from</span> products <span class="keyword">where</span> vend_id <span class="keyword">in</span> (<span class="number">1002</span>, <span class="number">1003</span>);</span><br><span class="line">+<span class="comment">----------------+------------+---------+</span></span><br><span class="line">| prod_name      | prod_price | vend_id |</span><br><span class="line">+<span class="comment">----------------+------------+---------+</span></span><br><span class="line">| Fuses          |       3.42 |    1002 |</span><br><span class="line">| Oil can        |       8.99 |    1002 |</span><br><span class="line">| Detonator      |      13.00 |    1003 |</span><br><span class="line">| Bird seed      |      10.00 |    1003 |</span><br><span class="line">| Carrots        |       2.50 |    1003 |</span><br><span class="line">| Safe           |      50.00 |    1003 |</span><br><span class="line">| Sling          |       4.49 |    1003 |</span><br><span class="line">| TNT (1 stick)  |       2.50 |    1003 |</span><br><span class="line">| TNT (5 sticks) |      10.00 |    1003 |</span><br><span class="line">+<span class="comment">----------------+------------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿‡æ»¤æ•°æ®ï¼Œnot è¡¨ç¤ºå¯¹å‰é¢æ“ä½œå–åï¼Œä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">select</span> prod_name, prod_price, vend_id <span class="keyword">from</span> products <span class="keyword">where</span> vend_id <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">1002</span>, <span class="number">1003</span>);</span><br><span class="line">+<span class="comment">--------------+------------+---------+</span></span><br><span class="line">| prod_name    | prod_price | vend_id |</span><br><span class="line">+<span class="comment">--------------+------------+---------+</span></span><br><span class="line">| .5 ton anvil |       5.99 |    1001 |</span><br><span class="line">| 1 ton anvil  |       9.99 |    1001 |</span><br><span class="line">| 2 ton anvil  |      14.99 |    1001 |</span><br><span class="line">| JetPack 1000 |      35.00 |    1005 |</span><br><span class="line">| JetPack 2000 |      55.00 |    1005 |</span><br><span class="line">+<span class="comment">--------------+------------+---------+</span></span><br></pre></td></tr></table></figure><h3 id="é€šé…ç¬¦è¿‡æ»¤"><a href="#é€šé…ç¬¦è¿‡æ»¤" class="headerlink" title="é€šé…ç¬¦è¿‡æ»¤"></a>é€šé…ç¬¦è¿‡æ»¤</h3><p>é€šé…ç¬¦è¿‡æ»¤æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ¨¡ç³Šè¿‡æ»¤æ“ä½œã€‚ä¸‹é¢ä¸»è¦ä»‹ç»%å’Œ_ä¸¤ä¸ªæ“ä½œç¬¦ã€‚</p><ul><li>â€œ%â€ æ“ä½œç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…å‡ºç°ä»»ä½•æ¬¡æ•°çš„ä»»æ„å­—ç¬¦ã€‚</li><li>â€œ_â€ æ“ä½œç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…ä»»ä½•å‡ºç°çš„å•ä¸ªå­—ç¬¦ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- â€œ%â€ æ“ä½œç¬¦ä½¿ç”¨ä»‹ç»</span></span><br><span class="line"><span class="keyword">select</span> prod_id, prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name <span class="keyword">like</span> <span class="string">"%anvil"</span>;</span><br><span class="line">+<span class="comment">---------+--------------+</span></span><br><span class="line">| prod_id | prod_name    |</span><br><span class="line">+<span class="comment">---------+--------------+</span></span><br><span class="line">| ANV01   | .5 ton anvil |</span><br><span class="line">| ANV02   | 1 ton anvil  |</span><br><span class="line">| ANV03   | 2 ton anvil  |</span><br><span class="line">+<span class="comment">---------+--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- â€œ_â€ æ“ä½œç¬¦ä½¿ç”¨ä»‹ç»</span></span><br><span class="line"><span class="keyword">select</span> cust_contact, cust_id <span class="keyword">from</span> customers <span class="keyword">where</span> cust_contact <span class="keyword">like</span> <span class="string">"___am"</span>;</span><br><span class="line">+<span class="comment">--------------+---------+</span></span><br><span class="line">| cust_contact | cust_id |</span><br><span class="line">+<span class="comment">--------------+---------+</span></span><br><span class="line">| Y Sam        |   10004 |</span><br><span class="line">+<span class="comment">--------------+---------+</span></span><br></pre></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤"><a href="#æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤"></a>æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤</h3><p>mysqlæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚è‹¥è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™ç”¨regexpä½œä¸ºæ“ä½œç¬¦ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> customers <span class="keyword">where</span> cust_address regexp <span class="string">"^2."</span>;</span><br><span class="line">+<span class="comment">---------+-------------+----------------+-----------+------------+----------+--------------+--------------+-----------------+</span></span><br><span class="line">| cust_id | cust_name   | cust_address   | cust_city | cust_state | cust_zip | cust_country | cust_contact | cust_email      |</span><br><span class="line">+<span class="comment">---------+-------------+----------------+-----------+------------+----------+--------------+--------------+-----------------+</span></span><br><span class="line">|   10001 | Coyote Inc. | 200 Maple Lane | Detroit   | MI         | 44444    | USA          | Y Lee        | ylee@coyote.com |</span><br><span class="line">+<span class="comment">---------+-------------+----------------+-----------+------------+----------+--------------+--------------+-----------------+</span></span><br></pre></td></tr></table></figure><h3 id="æ‹¼æ¥å­—æ®µ"><a href="#æ‹¼æ¥å­—æ®µ" class="headerlink" title="æ‹¼æ¥å­—æ®µ"></a>æ‹¼æ¥å­—æ®µ</h3><p>å¯ä»¥é€šè¿‡concatæ–¹æ³•å¯¹å­—æ®µå†…å®¹è¿›è¡Œæ‹¼æ¥æ“ä½œã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(vend_name, <span class="string">'('</span>, vend_country, <span class="string">')'</span>) <span class="keyword">from</span> vendors <span class="keyword">order</span> <span class="keyword">by</span> vend_name;</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br><span class="line">| concat(vend_name, '(', vend_country, ')') |</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br><span class="line">| ACME(USA)                                 |</span><br><span class="line">| Anvils R Us(USA)                          |</span><br><span class="line">| Furball Inc.(USA)                         |</span><br><span class="line">| Jet <span class="keyword">Set</span>(England)                          |</span><br><span class="line">| Jouets Et Ours(France)                    |</span><br><span class="line">| LT Supplies(USA)                          |</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨åˆ«å"><a href="#ä½¿ç”¨åˆ«å" class="headerlink" title="ä½¿ç”¨åˆ«å"></a>ä½¿ç”¨åˆ«å</h3><p>åˆ«åæ˜¯ä¸€ä¸ªå­—æ®µæˆ–å€¼çš„æ›¿ä»£åã€‚é€šè¿‡aså…³é”®å­—èµ‹äºˆåˆ«åã€‚å¦‚æœä½¿ç”¨äº†åˆ«åï¼Œç›¸å½“äºå¯ä»¥å¯¹å­—æ®µè¿›è¡Œé‡æ–°å‘½åã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(vend_name, <span class="string">'('</span>, vend_country, <span class="string">')'</span>) <span class="keyword">as</span> vend_title <span class="keyword">from</span> vendors <span class="keyword">order</span> <span class="keyword">by</span> vend_name;</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| vend_title             |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br><span class="line">| ACME(USA)              |</span><br><span class="line">| Anvils R Us(USA)       |</span><br><span class="line">| Furball Inc.(USA)      |</span><br><span class="line">| Jet <span class="keyword">Set</span>(England)       |</span><br><span class="line">| Jouets Et Ours(France) |</span><br><span class="line">| LT Supplies(USA)       |</span><br><span class="line">+<span class="comment">------------------------+</span></span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨ç®—æ•°è®¡ç®—"><a href="#ä½¿ç”¨ç®—æ•°è®¡ç®—" class="headerlink" title="ä½¿ç”¨ç®—æ•°è®¡ç®—"></a>ä½¿ç”¨ç®—æ•°è®¡ç®—</h3><p>å¯ä»¥é€šè¿‡ç®—æ•°è¿ç®—ç¬¦å¯¹å­—æ®µè¿›è¡Œè¿ç®—æ“ä½œã€‚æ”¯æŒçš„æ“ä½œç¬¦æœ‰+ï¼Œ-ï¼Œ*ï¼Œ/ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id, quantity, item_price, quantity*item_price <span class="keyword">as</span> expanded_price <span class="keyword">from</span> orderitems <span class="keyword">where</span> order_num = <span class="number">20005</span>;</span><br><span class="line">+<span class="comment">---------+----------+------------+----------------+</span></span><br><span class="line">| prod_id | quantity | item_price | expanded_price |</span><br><span class="line">+<span class="comment">---------+----------+------------+----------------+</span></span><br><span class="line">| ANV01   |       10 |       5.99 |          59.90 |</span><br><span class="line">| ANV02   |        3 |       9.99 |          29.97 |</span><br><span class="line">| TNT2    |        5 |      10.00 |          50.00 |</span><br><span class="line">| FB      |        1 |      10.00 |          10.00 |</span><br><span class="line">+<span class="comment">---------+----------+------------+----------------+</span></span><br></pre></td></tr></table></figure></p><h3 id="æ–‡æœ¬å¤„ç†å†…ç½®å‡½æ•°"><a href="#æ–‡æœ¬å¤„ç†å†…ç½®å‡½æ•°" class="headerlink" title="æ–‡æœ¬å¤„ç†å†…ç½®å‡½æ•°"></a>æ–‡æœ¬å¤„ç†å†…ç½®å‡½æ•°</h3><ul><li>Left()ï¼š è¿”å›ä¸²å·¦è¾¹çš„å­—ç¬¦</li><li>Length()ï¼šè¿”å›ä¸²çš„é•¿åº¦</li><li>Locate()ï¼šæ‰¾å‡ºä¸²çš„ä¸€ä¸ªå­ä¸²</li><li>Lower()ï¼šå°†ä¸²è½¬æ¢ä¸ºå°å†™</li><li>LTrim()ï¼šå»æ‰ä¸²å·¦è¾¹çš„ç©ºæ ¼</li><li>Right()ï¼šè¿”å›ä¸²å³è¾¹çš„å­—ç¬¦</li><li>RTrim()ï¼šå»æ‰ä¸²å³è¾¹çš„ç©ºæ ¼</li><li>Soundex()ï¼šè¿”å›ä¸²çš„SOUNDEXå€¼</li><li>SubString()ï¼šè¿”å›å­ä¸²çš„å­—ç¬¦</li><li>Upper()ï¼šå°†ä¸²è½¬æ¢ä¸ºå¤§å†™</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">upper</span>(prod_name) <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| upper(prod_name) |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| .5 TON ANVIL     |</span><br><span class="line">| 1 TON ANVIL      |</span><br><span class="line">| 2 TON ANVIL      |</span><br><span class="line">| DETONATOR        |</span><br><span class="line">| BIRD SEED        |</span><br><span class="line">| CARROTS          |</span><br><span class="line">| FUSES            |</span><br><span class="line">| JETPACK 1000     |</span><br><span class="line">| JETPACK 2000     |</span><br><span class="line">| OIL CAN          |</span><br><span class="line">| SAFE             |</span><br><span class="line">| SLING            |</span><br><span class="line">| TNT (1 STICK)    |</span><br><span class="line">| TNT (5 STICKS)   |</span><br><span class="line">+<span class="comment">------------------+</span></span><br></pre></td></tr></table></figure><h3 id="æ—¶é—´å¤„ç†å†…ç½®å‡½æ•°"><a href="#æ—¶é—´å¤„ç†å†…ç½®å‡½æ•°" class="headerlink" title="æ—¶é—´å¤„ç†å†…ç½®å‡½æ•°"></a>æ—¶é—´å¤„ç†å†…ç½®å‡½æ•°</h3><ul><li>AddDate()ï¼šå¢åŠ ä¸€ä¸ªæ—¥æœŸ(å¤©ã€å‘¨ç­‰)</li><li>AddTime()ï¼šå¢åŠ ä¸€ä¸ªæ—¶é—´(æ—¶ã€åˆ†ç­‰)</li><li>CurDate()ï¼šè¿”å›å½“å‰æ—¥æœŸ</li><li>CurTime()ï¼šè¿”å›å½“å‰æ—¶é—´</li><li>Date()ï¼šè¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ† </li><li>DateDiff()ï¼šè®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·®</li><li>Date_Add()ï¼šé«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•°</li><li>Date_Format()ï¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸²</li><li>Day()ï¼šè¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ†</li><li>DayOfWeek()ï¼šå¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡ </li><li>Hour()ï¼šè¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ† </li><li>Minute()ï¼šè¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ†</li><li>Month()ï¼šè¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ†</li><li>Now()ï¼šè¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</li><li>Second()ï¼šè¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ†</li><li>Time()ï¼šè¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ†</li><li>Year()ï¼šè¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ†</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- monthæ˜¾ç¤ºæ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(order_date) <span class="keyword">as</span> <span class="keyword">month</span> <span class="keyword">from</span> orders;</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| month |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">|     9 |</span><br><span class="line">|     9 |</span><br><span class="line">|     9 |</span><br><span class="line">|    10 |</span><br><span class="line">|    10 |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- monthæ¯”è¾ƒæ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(order_date) <span class="keyword">as</span> <span class="keyword">month</span> <span class="keyword">from</span> orders <span class="keyword">where</span> <span class="keyword">month</span>(order_date)&gt;<span class="number">9</span>;</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">| month |</span><br><span class="line">+<span class="comment">-------+</span></span><br><span class="line">|    10 |</span><br><span class="line">|    10 |</span><br><span class="line">+<span class="comment">-------+</span></span><br></pre></td></tr></table></figure><h3 id="æ•°å€¼å¤„ç†å‡½æ•°"><a href="#æ•°å€¼å¤„ç†å‡½æ•°" class="headerlink" title="æ•°å€¼å¤„ç†å‡½æ•°"></a>æ•°å€¼å¤„ç†å‡½æ•°</h3><ul><li>Abs()ï¼šè¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼</li><li>Cos()ï¼šè¿”å›ä¸€ä¸ªè§’åº¦çš„ä½™å¼¦</li><li>Exp()ï¼šè¿”å›ä¸€ä¸ªæ•°çš„æŒ‡æ•°å€¼ </li><li>Mod()ï¼šè¿”å›é™¤æ“ä½œçš„ä½™æ•°</li><li>Pi()ï¼šè¿”å›åœ†å‘¨ç‡</li><li>Rand()ï¼šè¿”å›ä¸€ä¸ªéšæœºæ•°</li><li>Sin()ï¼šè¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£å¼¦</li><li>Sqrt()ï¼šè¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹</li><li>Tan()ï¼šè¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£åˆ‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">abs</span>(<span class="number">-1</span>);</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| abs(-1) |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">|       1 |</span><br><span class="line">+<span class="comment">---------+</span></span><br></pre></td></tr></table></figure><h3 id="æ±‡æ€»æ•°æ®"><a href="#æ±‡æ€»æ•°æ®" class="headerlink" title="æ±‡æ€»æ•°æ®"></a>æ±‡æ€»æ•°æ®</h3><ul><li>AVG()ï¼šè¿”å›æŸåˆ—çš„å¹³å‡å€¼ </li><li>COUNT()ï¼šè¿”å›æŸåˆ—çš„è¡Œæ•°</li><li>MAX()ï¼šè¿”å›æŸåˆ—çš„æœ€å¤§å€¼</li><li>MIN()ï¼šè¿”å›æŸåˆ—çš„æœ€å°å€¼</li><li>SUM()ï¼šè¿”å›æŸåˆ—å€¼ä¹‹å’Œ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ±‡æ€»æ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(prod_price) <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| avg(prod_price) |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">|       16.133571 |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤æ‚æ±‡æ€»æ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> num_items, <span class="keyword">min</span>(prod_price) <span class="keyword">as</span> price_min, <span class="keyword">max</span>(prod_price) <span class="keyword">as</span> price_max, <span class="keyword">avg</span>(prod_price) <span class="keyword">as</span> price_avg <span class="keyword">from</span> products;</span><br><span class="line">+<span class="comment">-----------+-----------+-----------+-----------+</span></span><br><span class="line">| num_items | price_min | price_max | price_avg |</span><br><span class="line">+<span class="comment">-----------+-----------+-----------+-----------+</span></span><br><span class="line">|        14 |      2.50 |     55.00 | 16.133571 |</span><br><span class="line">+<span class="comment">-----------+-----------+-----------+-----------+</span></span><br></pre></td></tr></table></figure><h3 id="åˆ†ç»„æ•°æ®"><a href="#åˆ†ç»„æ•°æ®" class="headerlink" title="åˆ†ç»„æ•°æ®"></a>åˆ†ç»„æ•°æ®</h3><p>MySQLå…è®¸å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œåˆ†ç»„å…è®¸æŠŠæ•°æ®åˆ†ä¸ºå¤šä¸ªé€»è¾‘ç»„ï¼Œä»¥ä¾¿èƒ½å¯¹æ¯ä¸ªç»„è¿›è¡Œèšé›†è®¡ç®—ã€‚</p><ul><li>â€œgroup byâ€ æ“ä½œç¬¦ï¼Œæä¾›äº†å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„çš„èƒ½åŠ›ã€‚</li><li>â€œhavingâ€ æ“ä½œç¬¦ï¼Œæä¾›äº†å¯¹åˆ†ç»„æ•°æ®è¿›è¡Œè¿‡æ»¤çš„èƒ½åŠ›ã€‚ç”¨æ³•å’Œâ€œwhereâ€æ“ä½œç¬¦æ— å¼‚ï¼Œåªæ˜¯â€œwhereâ€æ“ä½œå¯¹è±¡ä¸ºæ‰€æœ‰æ•°æ®ï¼Œâ€œhavingâ€æ“ä½œå¯¹è±¡ä¸ºåˆ†ç»„åçš„æ•°æ®ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ†ç»„æŸ¥æ‰¾æ•°æ®</span></span><br><span class="line"><span class="keyword">select</span> vend_id, <span class="keyword">count</span>(*) <span class="keyword">as</span> num_prods <span class="keyword">from</span> products <span class="keyword">group</span> <span class="keyword">by</span> vend_id;</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br><span class="line">| vend_id | num_prods |</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br><span class="line">|    1001 |         3 |</span><br><span class="line">|    1002 |         2 |</span><br><span class="line">|    1003 |         7 |</span><br><span class="line">|    1005 |         2 |</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br><span class="line"><span class="comment">-- å¯¹åˆ†ç»„æŸ¥æ‰¾çš„æ•°æ®è¿›è¡Œè¿‡æ»¤æ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> vend_id, <span class="keyword">count</span>(*) <span class="keyword">as</span> num_prods <span class="keyword">from</span> products <span class="keyword">group</span> <span class="keyword">by</span> vend_id <span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;=<span class="number">2</span>;</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br><span class="line">| vend_id | num_prods |</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br><span class="line">|    1001 |         3 |</span><br><span class="line">|    1002 |         2 |</span><br><span class="line">|    1003 |         7 |</span><br><span class="line">|    1005 |         2 |</span><br><span class="line">+<span class="comment">---------+-----------+</span></span><br></pre></td></tr></table></figure><h3 id="å­å¥æŸ¥è¯¢"><a href="#å­å¥æŸ¥è¯¢" class="headerlink" title="å­å¥æŸ¥è¯¢"></a>å­å¥æŸ¥è¯¢</h3><p>mysqlæ”¯æŒå­æŸ¥è¯¢ï¼Œå°±æ˜¯å°†åµŒå¥—ä½¿ç”¨selectæ“ä½œã€‚åœ¨å¤æ‚çš„æ•°æ®åº“æ“ä½œä¸­ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ©ç”¨å­æŸ¥è¯¢è¿›è¡Œè¿‡æ»¤</span></span><br><span class="line"><span class="keyword">select</span> cust_name,  cust_contact <span class="keyword">from</span> customers <span class="keyword">where</span> cust_id <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> cust_id <span class="keyword">from</span> orders <span class="keyword">where</span> order_num <span class="keyword">in</span> (</span><br><span class="line">        <span class="keyword">select</span> order_num <span class="keyword">from</span> orderitems <span class="keyword">where</span> prod_id=<span class="string">'TNT2'</span>));</span><br><span class="line">+<span class="comment">----------------+--------------+</span></span><br><span class="line">| cust_name      | cust_contact |</span><br><span class="line">+<span class="comment">----------------+--------------+</span></span><br><span class="line">| Coyote Inc.    | Y Lee        |</span><br><span class="line">| Yosemite Place | Y Sam        |</span><br><span class="line">+<span class="comment">----------------+--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½œä¸ºè®¡ç®—å­—æ®µåˆ©ç”¨å­æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> cust_name, cust_state, (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> orders <span class="keyword">where</span> orders.cust_id=customers.cust_id) <span class="keyword">as</span> order_count</span><br><span class="line">    <span class="keyword">from</span> customers <span class="keyword">order</span> <span class="keyword">by</span> cust_name;</span><br><span class="line">+<span class="comment">----------------+------------+-------------+</span></span><br><span class="line">| cust_name      | cust_state | order_count |</span><br><span class="line">+<span class="comment">----------------+------------+-------------+</span></span><br><span class="line">| Coyote Inc.    | MI         |           2 |</span><br><span class="line">| E Fudd         | IL         |           1 |</span><br><span class="line">| Mouse House    | OH         |           0 |</span><br><span class="line">| Wascals        | IN         |           1 |</span><br><span class="line">| Yosemite Place | AZ         |           1 |</span><br><span class="line">+<span class="comment">----------------+------------+-------------+</span></span><br></pre></td></tr></table></figure><h3 id="è”ç»“è¡¨"><a href="#è”ç»“è¡¨" class="headerlink" title="è”ç»“è¡¨"></a>è”ç»“è¡¨</h3><p>å…³ç³»å‹æ•°æ®åº“ï¼Œä¼šå°†æ•°æ®ç»„åˆæˆå¤šä¸ªå…³ç³»è¡¨çš„å½¢å¼ã€‚æ­¤æ—¶ï¼Œå¦‚æœæƒ³è¦ä¸€æ¬¡æ€§æŸ¥æ‰¾å¤šä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œå°±éœ€è¦ç”¨åˆ°è”ç»“ã€‚è”ç»“æ“ä½œæœ‰å¦‚ä¸‹å‡ ç§å½¢å¼ï¼š</p><ul><li>å†…éƒ¨è”ç»“ï¼šæ­¤è”ç»“æ“ä½œåªå±•ç¤ºç›¸å…³è”çš„è¡Œã€‚å°†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„æ•°æ®ï¼Œé€šè¿‡è”ç»“æ“ä½œå°†å…³è”çš„æ•°æ®è¿‡æ»¤å‡ºæ¥ï¼Œå¹¶å±•ç¤ºå‡ºæ¥ã€‚</li><li>å¤–éƒ¨è”ç»“ï¼šæ­¤è”ç»“æ“ä½œé™¤äº†å±•ç¤ºç›¸å…³è”çš„è¡Œä»¥å¤–ï¼Œè¿˜ä¼šå±•ç¤ºæ²¡æœ‰å…³è”çš„é‚£äº›è¡Œã€‚å°†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„æ•°æ®ï¼Œé€šè¿‡è”ç»“æ“ä½œå°†ä¸ç›¸å…³çš„æ•°æ®æ’é™¤åœ¨å¤–ï¼Œå¹¶å±•ç¤ºä¿ç•™ä¸‹æ¥çš„æ•°æ®ã€‚</li><li>å¤šè¡¨è”ç»“ï¼šç®—æ˜¯å†…éƒ¨è”ç»“çš„ä¸€ç§ï¼Œä½†ä»–æŒ‡çš„æ˜¯å¤šä¸ªè¡¨ä¹‹é—´çš„è”ç»“æ“ä½œã€‚</li><li>è‡ªè”ç»“ï¼šç®—æ˜¯å†…éƒ¨è”ç»“çš„ä¸€ç§ï¼Œä½†ä»–æŒ‡çš„æ˜¯å•ä¸ªè¡¨è‡ªå·±å¯¹è‡ªå·±çš„è”ç»“æ“ä½œã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å†…éƒ¨è”ç»“ï¼Œä¸‹é¢ä¸¤ä¸ªsqlè¯­å¥ç­‰ä»·</span></span><br><span class="line"><span class="keyword">select</span> customers.cust_id, orders.* <span class="keyword">from</span> customers <span class="keyword">inner</span> <span class="keyword">join</span> orders <span class="keyword">on</span> customers.cust_id=orders.cust_id;</span><br><span class="line"><span class="keyword">select</span> customers.cust_id, orders.* <span class="keyword">from</span> customers, orders <span class="keyword">where</span> customers.cust_id=orders.cust_id;</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line">| cust_id | order_num | order_date          | cust_id |</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line">|   10001 |     20005 | 2005-09-01 00:00:00 |   10001 |</span><br><span class="line">|   10003 |     20006 | 2005-09-12 00:00:00 |   10003 |</span><br><span class="line">|   10004 |     20007 | 2005-09-30 00:00:00 |   10004 |</span><br><span class="line">|   10005 |     20008 | 2005-10-03 00:00:00 |   10005 |</span><br><span class="line">|   10001 |     20009 | 2005-10-08 00:00:00 |   10001 |</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤–éƒ¨çº§è”</span></span><br><span class="line"><span class="keyword">select</span> customers.cust_id, orders.* <span class="keyword">from</span> customers <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> orders <span class="keyword">on</span> customers.cust_id=orders.cust_id;</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line">| cust_id | order_num | order_date          | cust_id |</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line">|   10001 |     20005 | 2005-09-01 00:00:00 |   10001 |</span><br><span class="line">|   10001 |     20009 | 2005-10-08 00:00:00 |   10001 |</span><br><span class="line">|   10002 |      NULL | NULL                |    NULL |</span><br><span class="line">|   10003 |     20006 | 2005-09-12 00:00:00 |   10003 |</span><br><span class="line">|   10004 |     20007 | 2005-09-30 00:00:00 |   10004 |</span><br><span class="line">|   10005 |     20008 | 2005-10-03 00:00:00 |   10005 |</span><br><span class="line">+<span class="comment">---------+-----------+---------------------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤šè¡¨è”ç»“</span></span><br><span class="line"><span class="keyword">select</span> prod_name, vend_name, prod_price, quantity <span class="keyword">from</span> orderitems, products, vendors <span class="keyword">where</span> products.vend_id = vendors.vend_id <span class="keyword">and</span> orderitems.prod_id=products.prod_id <span class="keyword">and</span> order_num=<span class="number">20005</span>;</span><br><span class="line">+<span class="comment">----------------+-------------+------------+----------+</span></span><br><span class="line">| prod_name      | vend_name   | prod_price | quantity |</span><br><span class="line">+<span class="comment">----------------+-------------+------------+----------+</span></span><br><span class="line">| .5 ton anvil   | Anvils R Us |       5.99 |       10 |</span><br><span class="line">| 1 ton anvil    | Anvils R Us |       9.99 |        3 |</span><br><span class="line">| TNT (5 sticks) | ACME        |      10.00 |        5 |</span><br><span class="line">| Bird seed      | ACME        |      10.00 |        1 |</span><br><span class="line">+<span class="comment">----------------+-------------+------------+----------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è‡ªè”ç»“</span></span><br><span class="line"><span class="keyword">select</span> p1.* <span class="keyword">from</span> products <span class="keyword">as</span> p1, products <span class="keyword">as</span> p2 <span class="keyword">where</span> p1.vend_id=p2.vend_id <span class="keyword">and</span> p1.prod_id=<span class="string">'DTNTR'</span>;</span><br><span class="line">+<span class="comment">---------+---------+-----------+------------+-------------------------------------------------+</span></span><br><span class="line">| prod_id | vend_id | prod_name | prod_price | prod_desc                                       |</span><br><span class="line">+<span class="comment">---------+---------+-----------+------------+-------------------------------------------------+</span></span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">| DTNTR   |    1003 | Detonator |      13.00 | Detonator (plunger powered), fuses not included |</span><br><span class="line">+<span class="comment">---------+---------+-----------+------------+-------------------------------------------------+</span></span><br></pre></td></tr></table></figure><h3 id="ç»„åˆæŸ¥è¯¢"><a href="#ç»„åˆæŸ¥è¯¢" class="headerlink" title="ç»„åˆæŸ¥è¯¢"></a>ç»„åˆæŸ¥è¯¢</h3><p>ç»„åˆæŸ¥è¯¢é€šè¿‡unionæˆ–union allå…³é”®å­—å°†å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ç»„åˆèµ·æ¥ã€‚ä½¿ç”¨ç»„åˆæŸ¥è¯¢çš„è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>æ¯æ¡selectè¯­å¥ä¹‹é—´ï¼Œå¿…é¡»é€šè¿‡unionéš”ç¦»</li><li>æ¯æ¡selectè¯­å¥ï¼Œå¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—æ•°</li><li>union allï¼Œè¡¨ç¤ºåˆå¹¶å¤šæ¡selectè¯­å¥çš„æŸ¥è¯¢ç»“æœï¼Œä½†ä¸å¯¹é‡å¤æ•°æ®åšé¢å¤–å¤„ç†</li><li>unionï¼Œè¡¨ç¤ºåˆå¹¶å¤šæ¡selectè¯­å¥çš„æŸ¥è¯¢ç»“æœï¼Œå¹¶å¯¹é‡å¤æ•°æ®å»é‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- unionç»„åˆæ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> vend_id, prod_id, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price &lt;= <span class="number">5</span> <span class="keyword">union</span> <span class="keyword">select</span> vend_id,prod_id, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1001</span> <span class="keyword">or</span> vend_id=<span class="number">1002</span> <span class="keyword">order</span> <span class="keyword">by</span> vend_id;</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br><span class="line">| vend_id | prod_id | prod_price |</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br><span class="line">|    1001 | ANV01   |       5.99 |</span><br><span class="line">|    1001 | ANV02   |       9.99 |</span><br><span class="line">|    1001 | ANV03   |      14.99 |</span><br><span class="line">|    1002 | FU1     |       3.42 |</span><br><span class="line">|    1002 | OL1     |       8.99 |</span><br><span class="line">|    1003 | FC      |       2.50 |</span><br><span class="line">|    1003 | SLING   |       4.49 |</span><br><span class="line">|    1003 | TNT1    |       2.50 |</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- union all ç»„åˆæ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> vend_id, prod_id, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price &lt;= <span class="number">5</span> <span class="keyword">union</span> all <span class="keyword">select</span> vend_id,prod_id, prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1001</span> <span class="keyword">or</span> vend_id=<span class="number">1002</span> <span class="keyword">order</span> <span class="keyword">by</span> vend_id;</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br><span class="line">| vend_id | prod_id | prod_price |</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br><span class="line">|    1001 | ANV01   |       5.99 |</span><br><span class="line">|    1001 | ANV02   |       9.99 |</span><br><span class="line">|    1001 | ANV03   |      14.99 |</span><br><span class="line">|    1002 | FU1     |       3.42 |</span><br><span class="line">|    1002 | OL1     |       8.99 |</span><br><span class="line">|    1003 | FC      |       2.50 |</span><br><span class="line">|    1003 | SLING   |       4.49 |</span><br><span class="line">|    1003 | TNT1    |       2.50 |</span><br><span class="line">+<span class="comment">---------+---------+------------+</span></span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h2><p>æ’å…¥æ•°æ®ï¼Œåˆ†ä¸ºæ’å…¥å®Œæ•´çš„è¡Œï¼Œæ’å…¥éƒ¨åˆ†çš„è¡Œï¼Œæ’å…¥å¤šè¡Œï¼Œæ’å…¥æŸ¥è¯¢ç»“æœã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ’å…¥å®Œæ•´è¡Œ</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'Pep E. Lapew'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los angeles'</span>, <span class="string">'CA'</span>, <span class="string">'90046'</span>, <span class="string">'USA'</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥éƒ¨åˆ†è¡Œ</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers(cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country) <span class="keyword">values</span>(<span class="string">'Pep E. LaPew'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'CA'</span>, <span class="string">'90090'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥å¤šè¡Œ</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers(cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country) <span class="keyword">values</span>(<span class="string">'Pep E. LaPew'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'CA'</span>, <span class="string">'90090'</span>), (<span class="string">'Pep E. LaPew'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'CA'</span>, <span class="string">'90091'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers_new(cust_id, cust_name, cust_address) <span class="keyword">select</span> customers.cust_id, customers.cust_name, customers.cust_address <span class="keyword">from</span> customers;</span><br></pre></td></tr></table></figure><h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h2><p>æ›´æ–°æ•°æ®æ“ä½œï¼Œå¾ˆç®€å•ï¼Œç›´æ¥ä¸Šä»£ç ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ›´æ–°å•è¡Œæ•°æ®</span></span><br><span class="line"><span class="keyword">update</span> customers <span class="keyword">set</span> cust_email=<span class="string">'elmer@fudd.com'</span> <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ›´æ–°å¤šè¡Œæ•°æ®</span></span><br><span class="line"><span class="keyword">update</span> customers <span class="keyword">set</span> cust_email=<span class="string">'elmer@fudd.com'</span>, cust_name=<span class="string">'The Fudds'</span> <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h2><p>åˆ é™¤æ•°æ®æ“ä½œï¼Œå¾ˆç®€å•ï¼Œç›´æ¥ä¸Šä»£ç ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> customers <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure><h2 id="è¡¨æ“ä½œ"><a href="#è¡¨æ“ä½œ" class="headerlink" title="è¡¨æ“ä½œ"></a>è¡¨æ“ä½œ</h2><h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><p>ä½¿ç”¨create tableæ¥åˆ›å»ºcustomersè¡¨å•ã€‚åœ¨åˆ›å»ºè¡¨å•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨nullï¼Œprimary keyï¼Œauto_incrementï¼Œdefaultå…³é”®å­—æ¥å¯¹å­—æ®µè¿›è¡Œä¿®é¥°æ“ä½œã€‚</p><ul><li>nullï¼šæŒ‡å®šåˆ—æ˜¯å¦å…è®¸nullå€¼ï¼Œnot nullè¡¨ç¤ºè¯¥åˆ—ä¸å…è®¸å­˜åœ¨nullå€¼ã€‚</li><li>primary keyï¼šæŒ‡å®šè¡¨å•çš„ä¸»é”®ã€‚</li><li>foreign keyï¼šæŒ‡å®šå¤–é”®ã€‚</li><li>auto_incrementï¼šæŒ‡å®šä¸»é”®æ˜¯å¦è‡ªå¢ã€‚</li><li>defaultï¼šæŒ‡å®šå­—æ®µçš„é»˜è®¤å€¼ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºè¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customers (</span><br><span class="line">    cust_id      <span class="built_in">int</span>      <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">    cust_name    <span class="built_in">char</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    cust_address <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">null</span>,</span><br><span class="line">    cust_city    <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">null</span>,</span><br><span class="line">    cust_state   <span class="built_in">char</span>(<span class="number">5</span>)  <span class="literal">null</span>,</span><br><span class="line">    cust_zip     <span class="built_in">char</span>(<span class="number">10</span>) <span class="literal">null</span>,</span><br><span class="line">    cust_country <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">null</span>,</span><br><span class="line">    cust_contact <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">null</span>,</span><br><span class="line">    cust_email   <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">null</span>,</span><br><span class="line">    test_fk      <span class="built_in">int</span>      <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    primary <span class="keyword">key</span> (cust_id)</span><br><span class="line">    foreign <span class="keyword">key</span> (test_fk) <span class="keyword">REFERENCES</span> TestTable(test_fk)</span><br><span class="line">) <span class="keyword">engine</span>=<span class="keyword">InnoDB</span>;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤è¡¨æ“ä½œ</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> customers;</span><br></pre></td></tr></table></figure><h4 id="é‡å‘½åè¡¨"><a href="#é‡å‘½åè¡¨" class="headerlink" title="é‡å‘½åè¡¨"></a>é‡å‘½åè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é‡å‘½åè¡¨æ“ä½œ</span></span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> customers2 <span class="keyword">to</span> customers;</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°å­—æ®µ"><a href="#æ›´æ–°å­—æ®µ" class="headerlink" title="æ›´æ–°å­—æ®µ"></a>æ›´æ–°å­—æ®µ</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> customers <span class="keyword">add</span> new_id <span class="built_in">INT</span>;</span><br><span class="line"><span class="comment">-- åˆ é™¤å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> customers <span class="keyword">drop</span> new_id;</span><br><span class="line"><span class="comment">-- ä¿®æ”¹å­—æ®µï¼ˆå°†ç±»å‹è°ƒæ•´ä¸ºchar(10)ï¼‰</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> customers <span class="keyword">modify</span> new_id <span class="built_in">char</span>(<span class="number">10</span>) </span><br><span class="line"><span class="comment">-- ä¿®æ”¹å­—æ®µï¼ˆå°†å­—æ®µånew_idæ”¹ä¸ºnew_id_2ï¼Œå°†ç±»å‹è°ƒæ•´ä¸ºINTï¼‰</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> customers <span class="keyword">change</span> new_id new_id_2 <span class="built_in">int</span>;</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®å¤–é”®"><a href="#è®¾ç½®å¤–é”®" class="headerlink" title="è®¾ç½®å¤–é”®"></a>è®¾ç½®å¤–é”®</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ å¤–é”®</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> Orders <span class="keyword">add</span> foreign <span class="keyword">key</span>(fk_id) <span class="keyword">references</span> TestTable(primary_id);</span><br><span class="line"><span class="comment">-- åˆ é™¤å¤–é”®</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> Orders <span class="keyword">drop</span> foreign <span class="keyword">key</span> fk_id;</span><br></pre></td></tr></table></figure><h2 id="äº‹åŠ¡ç®€ä»‹"><a href="#äº‹åŠ¡ç®€ä»‹" class="headerlink" title="äº‹åŠ¡ç®€ä»‹"></a>äº‹åŠ¡ç®€ä»‹</h2><p>åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† Innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚å…³é”®å­—ä»‹ç»ï¼š</p><ul><li>beginï¼šæ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡</li><li>commitï¼šä¹Ÿå¯ä»¥ä½¿ç”¨commit workï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚commitä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„</li><li>rollbackï¼šæœ‰å¯ä»¥ä½¿ç”¨rollback workï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹</li><li>savepoint identifierï¼šsavepointå…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ªsavepoint</li><li>rollback to identifierï¼šæŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºæµ‹è¯•è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> runoob_transaction_test( <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">5</span>)) <span class="keyword">engine</span>=<span class="keyword">innodb</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_transaction_test;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- commitäº‹åŠ¡ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">begin</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">value</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">value</span>(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_transaction_test;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- rollbackäº‹åŠ¡ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">begin</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">values</span>(<span class="number">7</span>);</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_transaction_test;</span><br></pre></td></tr></table></figure><h2 id="å®éªŒæ•°æ®"><a href="#å®éªŒæ•°æ®" class="headerlink" title="å®éªŒæ•°æ®"></a>å®éªŒæ•°æ®</h2><p><a href="http://www.forta.com/books/0672327120/mysql_scripts.zip" target="_blank" rel="noopener">Mysqlå¿…çŸ¥å¿…ä¼š-å®ç°æ•°æ®</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç½‘ç»œ-Httpsçš„ç†è§£</title>
      <link href="/2019/01/20/%E7%BD%91%E7%BB%9C-Https%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/01/20/%E7%BD%91%E7%BB%9C-Https%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Httpæœ‰å•¥é—®é¢˜ï¼Ÿ"><a href="#Httpæœ‰å•¥é—®é¢˜ï¼Ÿ" class="headerlink" title="Httpæœ‰å•¥é—®é¢˜ï¼Ÿ"></a>Httpæœ‰å•¥é—®é¢˜ï¼Ÿ</h2><blockquote><ul><li>çªƒå¬é£é™©ï¼ˆeavesdroppingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥è·çŸ¥é€šä¿¡å†…å®¹</li><li>ç¯¡æ”¹é£é™©ï¼ˆtamperingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥ä¿®æ”¹é€šä¿¡å†…å®¹</li><li>å†’å……é£é™©ï¼ˆpretendingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……ä»–äººèº«ä»½å‚ä¸é€šä¿¡</li></ul></blockquote><p>SSL/TLSåè®®æ˜¯ä¸ºäº†è§£å†³è¿™ä¸‰å¤§é£é™©è€Œè®¾è®¡çš„ï¼Œå¸Œæœ›è¾¾åˆ°ï¼š</p><blockquote><ul><li>æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯åŠ å¯†ä¼ æ’­ï¼Œç¬¬ä¸‰æ–¹æ— æ³•çªƒå¬</li><li>å…·æœ‰æ ¡éªŒæœºåˆ¶ï¼Œä¸€æ—¦è¢«ç¯¡æ”¹ï¼Œé€šä¿¡åŒæ–¹ä¼šç«‹åˆ»å‘ç°</li><li>é…å¤‡èº«ä»½è¯ä¹¦ï¼Œé˜²æ­¢èº«ä»½è¢«å†’å……</li></ul></blockquote><h2 id="Httpsæ˜¯ä¸ªå•¥ï¼Ÿ"><a href="#Httpsæ˜¯ä¸ªå•¥ï¼Ÿ" class="headerlink" title="Httpsæ˜¯ä¸ªå•¥ï¼Ÿ"></a>Httpsæ˜¯ä¸ªå•¥ï¼Ÿ</h2><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ HTTPSï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹ HTTPS çš„é€šä¿¡æ­¥éª¤ã€‚</p><p><img src="/image/network_https.png" alt="sslæ¡æ‰‹å›¾"></p><h4 id="å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰"><a href="#å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰" class="headerlink" title="å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰"></a>å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰</h4><p>é¦–å…ˆï¼Œå®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å…ˆå‘æœåŠ¡å™¨å‘å‡ºåŠ å¯†é€šä¿¡çš„è¯·æ±‚ï¼Œè¿™è¢«å«åšClientHelloè¯·æ±‚ã€‚<br>åœ¨è¿™ä¸€æ­¥ï¼Œå®¢æˆ·ç«¯ä¸»è¦å‘æœåŠ¡å™¨æä¾›ä»¥ä¸‹ä¿¡æ¯ã€‚</p><blockquote><p>ï¼ˆ1ï¼‰ æ”¯æŒçš„åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆã€‚<br>ï¼ˆ2ï¼‰ ä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¨åç”¨äºç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ã€‚<br>ï¼ˆ3ï¼‰ æ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚<br>ï¼ˆ4ï¼‰ æ”¯æŒçš„å‹ç¼©æ–¹æ³•ã€‚</p></blockquote><h4 id="æœåŠ¡å™¨å›åº”ï¼ˆSeverHelloï¼‰"><a href="#æœåŠ¡å™¨å›åº”ï¼ˆSeverHelloï¼‰" class="headerlink" title="æœåŠ¡å™¨å›åº”ï¼ˆSeverHelloï¼‰"></a>æœåŠ¡å™¨å›åº”ï¼ˆSeverHelloï¼‰</h4><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºå›åº”ï¼Œè¿™å«åšSeverHelloã€‚æœåŠ¡å™¨çš„å›åº”åŒ…å«ä»¥ä¸‹å†…å®¹ã€‚</p><blockquote><p>ï¼ˆ1ï¼‰ ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆæœ¬ã€‚å¦‚æœæµè§ˆå™¨ä¸æœåŠ¡å™¨æ”¯æŒçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å…³é—­åŠ å¯†é€šä¿¡ã€‚<br>ï¼ˆ2ï¼‰ ä¸€ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¨åç”¨äºç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ã€‚<br>ï¼ˆ3ï¼‰ ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚<br>ï¼ˆ4ï¼‰ æœåŠ¡å™¨è¯ä¹¦ã€‚</p></blockquote><h4 id="å®¢æˆ·ç«¯å›åº”"><a href="#å®¢æˆ·ç«¯å›åº”" class="headerlink" title="å®¢æˆ·ç«¯å›åº”"></a>å®¢æˆ·ç«¯å›åº”</h4><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å›åº”ä»¥åï¼Œé¦–å…ˆéªŒè¯æœåŠ¡å™¨è¯ä¹¦ã€‚å¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å¸ƒã€æˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåä¸å®é™…åŸŸåä¸ä¸€è‡´ã€æˆ–è€…è¯ä¹¦å·²ç»è¿‡æœŸï¼Œå°±ä¼šå‘è®¿é—®è€…æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œç”±å…¶é€‰æ‹©æ˜¯å¦è¿˜è¦ç»§ç»­é€šä¿¡ã€‚<br>å¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå®¢æˆ·ç«¯å°±ä¼šä»è¯ä¹¦ä¸­å–å‡ºæœåŠ¡å™¨çš„å…¬é’¥ã€‚ç„¶åï¼Œå‘æœåŠ¡å™¨å‘é€ä¸‹é¢ä¸‰é¡¹ä¿¡æ¯ã€‚</p><blockquote><p>ï¼ˆ1ï¼‰ ä¸€ä¸ªéšæœºæ•°ã€‚è¯¥éšæœºæ•°ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼Œé˜²æ­¢è¢«çªƒå¬ã€‚<br>ï¼ˆ2ï¼‰ ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚<br>ï¼ˆ3ï¼‰ å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›æœåŠ¡å™¨æ ¡éªŒã€‚</p></blockquote><p>ä¸Šé¢ç¬¬ä¸€é¡¹çš„éšæœºæ•°ï¼Œæ˜¯æ•´ä¸ªæ¡æ‰‹é˜¶æ®µå‡ºç°çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°ï¼Œåˆç§°â€pre-master keyâ€ã€‚æœ‰äº†å®ƒä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±åŒæ—¶æœ‰äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œæ¥ç€åŒæ–¹å°±ç”¨äº‹å…ˆå•†å®šçš„åŠ å¯†æ–¹æ³•ï¼Œå„è‡ªç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨çš„åŒä¸€æŠŠâ€ä¼šè¯å¯†é’¥â€ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨3ä¸ªéšæœºæ•°ï¼Œæ¥ç”Ÿæˆâ€ä¼šè¯å¯†é’¥â€ï¼Œdog250è§£é‡Šå¾—å¾ˆå¥½(<a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="noopener">å‚è€ƒå‡ºå¤„</a>)ï¼š</p><blockquote><p>â€œä¸ç®¡æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œéƒ½éœ€è¦éšæœºæ•°ï¼Œè¿™æ ·ç”Ÿæˆçš„å¯†é’¥æ‰ä¸ä¼šæ¯æ¬¡éƒ½ä¸€æ ·ã€‚ç”±äºSSLåè®®ä¸­è¯ä¹¦æ˜¯é™æ€çš„ï¼Œå› æ­¤ååˆ†æœ‰å¿…è¦å¼•å…¥ä¸€ç§éšæœºå› ç´ æ¥ä¿è¯åå•†å‡ºæ¥çš„å¯†é’¥çš„éšæœºæ€§ã€‚</p><p>å¯¹äºRSAå¯†é’¥äº¤æ¢ç®—æ³•æ¥è¯´ï¼Œpre-master-keyæœ¬èº«å°±æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼Œå†åŠ ä¸Šhelloæ¶ˆæ¯ä¸­çš„éšæœºï¼Œ3ä¸ªéšæœºæ•°é€šè¿‡ä¸€ä¸ªå¯†é’¥å¯¼å‡ºå™¨æœ€ç»ˆå¯¼å‡ºä¸€ä¸ªå¯¹ç§°å¯†é’¥ã€‚</p><p>pre masterçš„å­˜åœ¨åœ¨äºSSLåè®®ä¸ä¿¡ä»»æ¯ä¸ªä¸»æœºéƒ½èƒ½äº§ç”Ÿå®Œå…¨éšæœºçš„éšæœºæ•°ï¼Œå¦‚æœéšæœºæ•°ä¸éšæœºï¼Œé‚£ä¹ˆpre master secretå°±æœ‰å¯èƒ½è¢«çŒœå‡ºæ¥ï¼Œé‚£ä¹ˆä»…é€‚ç”¨pre master secretä½œä¸ºå¯†é’¥å°±ä¸åˆé€‚äº†ï¼Œå› æ­¤å¿…é¡»å¼•å…¥æ–°çš„éšæœºå› ç´ ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŠ ä¸Špre master secretä¸‰ä¸ªéšæœºæ•°ä¸€åŒç”Ÿæˆçš„å¯†é’¥å°±ä¸å®¹æ˜“è¢«çŒœå‡ºäº†ï¼Œä¸€ä¸ªä¼ªéšæœºå¯èƒ½å®Œå…¨ä¸éšæœºï¼Œå¯æ˜¯æ˜¯ä¸‰ä¸ªä¼ªéšæœºå°±ååˆ†æ¥è¿‘éšæœºäº†ï¼Œæ¯å¢åŠ ä¸€ä¸ªè‡ªç”±åº¦ï¼Œéšæœºæ€§å¢åŠ çš„å¯ä¸æ˜¯ä¸€ã€‚â€</p></blockquote><h4 id="æœåŠ¡å™¨çš„æœ€åå›åº”"><a href="#æœåŠ¡å™¨çš„æœ€åå›åº”" class="headerlink" title="æœåŠ¡å™¨çš„æœ€åå›åº”"></a>æœåŠ¡å™¨çš„æœ€åå›åº”</h4><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°pre-master keyä¹‹åï¼Œè®¡ç®—ç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨çš„â€ä¼šè¯å¯†é’¥â€ã€‚ç„¶åï¼Œå‘å®¢æˆ·ç«¯æœ€åå‘é€ä¸‹é¢ä¿¡æ¯ã€‚</p><blockquote><p>ï¼ˆ1ï¼‰ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚<br>ï¼ˆ2ï¼‰æœåŠ¡å™¨æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºæœåŠ¡å™¨çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›å®¢æˆ·ç«¯æ ¡éªŒã€‚</p></blockquote><p>è‡³æ­¤ï¼Œæ•´ä¸ªæ¡æ‰‹é˜¶æ®µå…¨éƒ¨ç»“æŸã€‚æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›å…¥åŠ å¯†é€šä¿¡ï¼Œå°±å®Œå…¨æ˜¯ä½¿ç”¨æ™®é€šçš„HTTPåè®®ï¼Œåªä¸è¿‡ç”¨â€ä¼šè¯å¯†é’¥â€åŠ å¯†å†…å®¹ã€‚</p><h2 id="Httpså†…å®¹é˜²ç¯¡æ”¹"><a href="#Httpså†…å®¹é˜²ç¯¡æ”¹" class="headerlink" title="Httpså†…å®¹é˜²ç¯¡æ”¹"></a>Httpså†…å®¹é˜²ç¯¡æ”¹</h2><p>HTTPSå¯ä»¥é˜²æ­¢ä¸­é—´äººçš„ç¯¡æ”¹ã€‚åŠ å¯†ç®—æ³•çš„å®‰å…¨æ€§ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¿æŠ¤ä¿¡æ¯ä¸è¢«æ³„éœ²çš„èƒ½åŠ›ï¼ˆCPAå®‰å…¨ï¼‰ï¼Œä¸€ç§æ˜¯ä¿æŠ¤ä¿¡æ¯ä¸è¢«ç¯¡æ”¹çš„èƒ½åŠ›ï¼ˆCCAå®‰å…¨ï¼‰ã€‚<br>å•çº¯çš„åŠ å¯†ç®—æ³•æ˜¯ä¸å…·å¤‡é˜²æ­¢ç¯¡æ”¹çš„èƒ½åŠ›çš„ã€‚æ¯”å¦‚AES-CBCåŠ å¯†çš„æŸä¸€ä¸ªæ¶ˆæ¯â€œæ—©ä¸Š10ç‚¹20åˆ†å‘èµ·è¿›æ”»â€ï¼Œæˆ‘ä¸éœ€è¦çŸ¥é“è¿™æ¡æ¶ˆæ¯çš„å…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆï¼Œå´å¯ä»¥é€šè¿‡æŸç§æ‰‹æ®µéšæ„æŠŠå®ƒæ”¹æˆæˆ‘æŒ‡å®šçš„æ—¶é—´ï¼Œæ¯”å¦‚â€œæ—©ä¸Š11ç‚¹10åˆ†å‘èµ·è¿›æ”»â€ã€‚åªæœ‰ç»“åˆæ¶ˆæ¯éªŒè¯æœºåˆ¶çš„åŠ å¯†ç®—æ³•æ‰èƒ½é˜²æ­¢ç¯¡æ”¹ã€‚æ¯”å¦‚AES-CBC with HMAC-SHA256ã€AES-GCMã€ChaCha20-Poly1305ç­‰ç­‰ã€‚(<a href="https://www.zhihu.com/question/65464646" target="_blank" rel="noopener">å‚è€ƒå‡ºå¤„</a>)</p><h2 id="Httpsçš„å»¶è¿Ÿ"><a href="#Httpsçš„å»¶è¿Ÿ" class="headerlink" title="Httpsçš„å»¶è¿Ÿ"></a>Httpsçš„å»¶è¿Ÿ</h2><p>é€šè¿‡ä¸‹é¢å®éªŒï¼Œå¯ä»¥çœ‹åˆ°sslæ¡æ‰‹æ—¶é—´æ˜¯tcpæ¡æ‰‹çš„3å€ã€‚(<a href="http://www.ruanyifeng.com/blog/2014/09/ssl-latency.html" target="_blank" rel="noopener">å‚è€ƒå‡ºå¤„</a>)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> curl -w "TCP handshake: %&#123;time_connect&#125;, SSL handshake: %&#123;time_appconnect&#125;\n" -so /dev/null https://www.alipay.com</span><br><span class="line"></span><br><span class="line">TCP handshake: 0.022, SSL handshake: 0.064</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html</a><br><a href="http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html</a><br><a href="http://www.ruanyifeng.com/blog/2011/02/seven_myths_about_https.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/02/seven_myths_about_https.html</a><br><a href="http://www.ruanyifeng.com/blog/2016/08/migrate-from-http-to-https.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/08/migrate-from-http-to-https.html</a><br><a href="http://www.ruanyifeng.com/blog/2014/09/ssl-latency.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/09/ssl-latency.html</a><br><a href="https://blog.csdn.net/AloneSword/article/details/47059945" target="_blank" rel="noopener">https://blog.csdn.net/AloneSword/article/details/47059945</a></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­ç±»å‹è½¬æ¢çš„æ•´ç†</title>
      <link href="/2019/01/18/Node-JS%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E7%9A%84%E6%95%B4%E7%90%86/"/>
      <url>/2019/01/18/Node-JS%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E7%9A%84%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><p>JSä¸­å–å€¼ç±»å‹éå¸¸çµæ´»ï¼Œåœ¨è¿›è¡Œç®—æ•°è¿ç®—ç¬¦æˆ–æ¯”è¾ƒè¿ç®—ç¬¦æ“ä½œæ—¶ï¼Œå¸¸å¸¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢æ“ä½œã€‚æœ€è¿‘å¯¹ç±»å‹è½¬æ¢åšäº†ç³»ç»Ÿçš„æ¢³ç†ã€‚åŸå§‹å€¼ä¹‹é—´çš„è½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼š<br><img src="/image/js_type.png" alt="åŸå§‹å€¼ç±»å‹è½¬æ¢"></p><h3 id="å¯¹è±¡è½¬æ¢æ“ä½œ"><a href="#å¯¹è±¡è½¬æ¢æ“ä½œ" class="headerlink" title="å¯¹è±¡è½¬æ¢æ“ä½œ"></a>å¯¹è±¡è½¬æ¢æ“ä½œ</h3><p>å¯¹è±¡è½¬æ¢ï¼Œç›¸æ¯”äºåŸå§‹å€¼ç›¸äº’è½¬æ¢è¦ç¨å¾®å¤æ‚ç‚¹ã€‚åœ¨è®²è§£å¯¹è±¡è½¬æ¢å‰ï¼Œå…ˆè¯´ä¸¤ä¸ªå¯¹è±¡å†…ç½®çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤æƒ…å†µä¸‹ï¼ŒtoString() -&gt; "[object Object]"</span></span><br><span class="line"><span class="comment"> * è®¸å¤šç±»éƒ½ç»§æ‰¿äº†toString()æ–¹æ³•ï¼Œä¾‹å¦‚æ•°ç»„ï¼š</span></span><br><span class="line"><span class="comment"> * [1].toString() -&gt; "1"</span></span><br><span class="line"><span class="comment"> * ['1'].toString() -&gt; "1"</span></span><br><span class="line"><span class="comment"> * [1, 2].toString() -&gt; "1, 2"</span></span><br><span class="line"><span class="comment"> * @return è¿”å›ä¸€ä¸ªåæ˜ è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">toString() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤æƒ…å†µä¸‹ï¼Œ valueOf() -&gt; å¯¹è±¡æœ¬èº«ã€‚å› ä¸ºå¯¹è±¡æ˜¯å¤åˆå€¼ï¼Œè€Œä¸”å¤§å¤šæ•°å¯¹è±¡æ— æ³•çœŸæ­£çš„è¡¨ç¤ºä¸€ä¸ªåŸå§‹å€¼</span></span><br><span class="line"><span class="comment"> * è®¸å¤šç±»éƒ½ç»§æ‰¿äº†valueOf()æ–¹æ³•ï¼Œä¾‹å¦‚æ—¥æœŸç±»ï¼š</span></span><br><span class="line"><span class="comment"> * (new Date()).valueOf() -&gt; 1548296513124</span></span><br><span class="line"><span class="comment"> * @return å¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„åŸå§‹å€¼ã€‚</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">valueOf() &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢æµç¨‹"><a href="#å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢æµç¨‹" class="headerlink" title="å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢æµç¨‹"></a>å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢æµç¨‹</h4><ul><li>å¦‚æœå¯¹è±¡å…·æœ‰toString()æ–¹æ³•ï¼Œåˆ™è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœä»–è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ŒJSå°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚æœæœ¬èº«ä¸æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼‰ï¼Œå¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ç»“æœã€‚</li><li>å¦‚æœå¯¹è±¡æ²¡æœ‰toString()æ–¹æ³•ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•å¹¶ä¸è¿”å›è¿™ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆJSä¼šè°ƒç”¨valueOf()æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™JSè°ƒç”¨ä»–ã€‚å¦‚æœè¿”å›å€¼æ˜¯åŸå§‹å€¼ï¼ŒJSå°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚æœæœ¬èº«ä¸æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼‰ï¼Œå¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ç»“æœã€‚</li><li>å¦åˆ™ï¼ŒJSæ— æ³•ä»toString()æˆ–è€…valueOf()è·å–ä¸€ä¸ªåŸå§‹å€¼ï¼Œå› æ­¤è¿™æ—¶ä»–å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è±¡è½¬å­—ç¬¦ä¸²ä¼ªä»£ç </span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">obj2String</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (!!obj.toString) &#123;</span><br><span class="line">    temp = obj.toString();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> temp === åŸå§‹å€¼) &#123;</span><br><span class="line">      <span class="keyword">return</span> åŸå§‹å€¼è½¬åŒ–è§„åˆ™(temp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!!obj.valueOf) &#123;</span><br><span class="line">    temp = obj.valueOf();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> temp === åŸå§‹å€¼) &#123;</span><br><span class="line">      <span class="keyword">return</span> åŸå§‹å€¼è½¬åŒ–è§„åˆ™(temp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">'è½¬åŒ–å¤±è´¥'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡åˆ°æ•°å€¼çš„è½¬æ¢æµç¨‹"><a href="#å¯¹è±¡åˆ°æ•°å€¼çš„è½¬æ¢æµç¨‹" class="headerlink" title="å¯¹è±¡åˆ°æ•°å€¼çš„è½¬æ¢æµç¨‹"></a>å¯¹è±¡åˆ°æ•°å€¼çš„è½¬æ¢æµç¨‹</h4><ul><li>å¦‚æœå¯¹è±¡å…·æœ‰valueOf()æ–¹æ³•ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™JSå°†è¿™ä¸ªåŸå§‹å€¼è½¬æ¢ä¸ºæ•°å­—ï¼Œå¹¶è¿”å›è¿™ä¸ªæ•°å­—ã€‚</li><li>å¦åˆ™ï¼Œå¦‚æœå¯¹è±¡å…·æœ‰toString()æ–¹æ³•ï¼Œåè€…è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œåˆ™JSå°†å…¶è½¬æ¢å¹¶è¿”å›</li><li>å¦åˆ™ï¼ŒJSæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è±¡è½¬æ•°å€¼ä¼ªä»£ç </span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">obj2Number</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (!!obj.valueOf) &#123;</span><br><span class="line">    temp = obj.valueOf();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> temp === åŸå§‹å€¼) &#123;</span><br><span class="line">      <span class="keyword">return</span> åŸå§‹å€¼è½¬åŒ–è§„åˆ™(temp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!!obj.toString) &#123;</span><br><span class="line">    temp = obj.toString();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> temp === åŸå§‹å€¼) &#123;</span><br><span class="line">      <span class="keyword">return</span> åŸå§‹å€¼è½¬åŒ–è§„åˆ™(temp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">'è½¬åŒ–å¤±è´¥'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢æµç¨‹"><a href="#å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢æµç¨‹" class="headerlink" title="å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢æµç¨‹"></a>å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢æµç¨‹</h4><p>åœ¨ä½¿ç”¨â€œ+â€ï¼Œâ€œ==â€ï¼Œâ€œ!=â€å’Œå…³ç³»è¿ç®—ç¬¦æ˜¯å”¯ä¸€æ‰§è¡Œè¿™ç§ç‰¹æ®Šçš„å­—ç¬¦ä¸²åˆ°åŸå§‹å€¼çš„è½¬æ¢æ–¹å¼çš„è¿ç®—ç¬¦ã€‚å› ä¸ºè¿™äº›è¿ç®—ç¬¦ä¸å¤ªæ¸…æ¥šè¦å°†å¯¹è±¡è½¬æˆStringè¿˜æ˜¯Numberã€‚å°†å¯¹è±¡è½¬æˆåŸå§‹å€¼æ—¶ï¼Œä¼šé¦–å…ˆå°è¯•è°ƒç”¨valueOf()ï¼Œç„¶åè°ƒç”¨toString()ã€‚å”¯ä¸€ä¾‹å¤–çš„æ˜¯Dateç±»å‹ï¼ŒDateç±»å‹ä¼šé¦–å…ˆå°è¯•è°ƒç”¨toString()ï¼Œç„¶åè°ƒç”¨valueOf()ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è±¡è½¬åŸå§‹å€¼ä¼ªä»£ç </span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">obj2OriginalValue</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj == <span class="built_in">Date</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!!obj.toString) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!!obj.valueOf) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.valueOf();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!!obj.valueOf) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.valueOf();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!!obj.toString) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.toString();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h2><h3 id="â€œ-â€-æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹"><a href="#â€œ-â€-æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹" class="headerlink" title="â€œ+â€ æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹"></a>â€œ+â€ æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹</h3><p>æ“ä½œç¬¦çš„è¿ç®—ä¼˜å…ˆçº§ä¸ºï¼šstring &gt; å…¶ä»–ç±»å‹</p><ul><li>å­˜åœ¨stringç±»å‹æ—¶ï¼Œå…¶ä»–ç±»å‹éƒ½ä¼šè½¬æ¢æˆstringç±»å‹ï¼Œç„¶åè¿›è¡Œå­—ç¬¦ä¸²è¿æ¥</li><li>ä¸å­˜åœ¨stringç±»å‹æ—¶ï¼Œä¼šå°è¯•å°†å…¶ä»–ç±»å‹è½¬æ¢æˆæ•°å­—ï¼Œç„¶åè¿›è¡Œæ•°å­—ç›¸åŠ æ“ä½œ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜åœ¨stringç±»å‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str+'</span> + <span class="literal">undefined</span>);  <span class="comment">//str+undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str+'</span> + <span class="literal">null</span>);  <span class="comment">//str+null</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str+'</span> + <span class="literal">false</span>);  <span class="comment">//str+false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str+'</span> + <span class="literal">true</span>);  <span class="comment">//str+true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str+'</span> + <span class="number">123</span>);  <span class="comment">//str+123</span></span><br><span class="line"><span class="comment">// ä¸å­˜åœ¨stringç±»å‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> + <span class="number">123</span>);  <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> + <span class="literal">null</span>);  <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> + <span class="literal">false</span>);  <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> + <span class="literal">true</span>);  <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> + <span class="literal">null</span>);  <span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> + <span class="literal">false</span>);  <span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> + <span class="literal">true</span>);  <span class="comment">//124</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> + <span class="literal">true</span>);  <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> + <span class="literal">false</span>);  <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> + <span class="literal">false</span>);  <span class="comment">//1</span></span><br></pre></td></tr></table></figure><h3 id="â€œ-â€-æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹-1"><a href="#â€œ-â€-æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹-1" class="headerlink" title="â€œ-â€ æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹"></a>â€œ-â€ æ“ä½œç¬¦åŠŸèƒ½ç®€ä»‹</h3><p>åŸºæœ¬ç±»å‹è¿›è¡Œâ€œâ€”â€æ“ä½œç¬¦è¿ç®—æ—¶ï¼Œå°†åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åè¿›è¡Œæ•°å­—ç›¸å‡æ“ä½œã€‚â€œ*â€æ“ä½œç¬¦å’Œâ€œ/â€æ“ä½œç¬¦ç±»ä¼¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> - <span class="literal">null</span>);  <span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> - <span class="literal">undefined</span>);  <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> - <span class="literal">false</span>); <span class="number">123</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> - <span class="literal">true</span>);  <span class="comment">//122</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> - <span class="string">'1'</span>);  <span class="comment">//122</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­å¤šè¿›ç¨‹çš„åº”ç”¨</title>
      <link href="/2019/01/13/Node-JS%E4%B8%AD%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2019/01/13/Node-JS%E4%B8%AD%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç½‘ç»œ-RESTfulæ¥å£è®¾è®¡</title>
      <link href="/2019/01/07/%E7%BD%91%E7%BB%9C-RESTful%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1/"/>
      <url>/2019/01/07/%E7%BD%91%E7%BB%9C-RESTful%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="Http-Methodsæè¿°"><a href="#Http-Methodsæè¿°" class="headerlink" title="Http Methodsæè¿°"></a>Http Methodsæè¿°</h2><table><thead><tr><th>HTTP Methods</th><th>æ“ä½œæ–¹å¼</th></tr></thead><tbody><tr><td>POST</td><td>åˆ›å»ºæ•°æ® Create</td></tr><tr><td>GET</td><td>è¯»å–æ•°æ® Read</td></tr><tr><td>PUT</td><td>ä¿®æ”¹æ•°æ® Update æ•´æ¡ä¿®æ”¹ä¿®æ”¹é™¤IDå¤–çš„æ‰€æœ‰å±æ€§</td></tr><tr><td>PATCH</td><td>ä¿®æ”¹æ•°æ® Update éƒ¨åˆ†ä¿®æ”¹ ä¿®æ”¹ä¸€æ¡è®°å½•çš„éƒ¨åˆ†å±æ€§</td></tr><tr><td>DELETE</td><td>åˆ é™¤æ•°æ® Delete</td></tr></tbody></table><h2 id="RESTfulæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#RESTfulæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="RESTfulæ˜¯ä»€ä¹ˆï¼Ÿ"></a>RESTfulæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/05/restful_api.html</a><br><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/09/restful.html</a></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç®—æ³•-çº¢é»‘æ ‘çš„æ€è€ƒ</title>
      <link href="/2019/01/03/%E7%AE%97%E6%B3%95-%E7%BA%A2%E9%BB%91%E6%A0%91%E7%9A%84%E6%80%9D%E8%80%83/"/>
      <url>/2019/01/03/%E7%AE%97%E6%B3%95-%E7%BA%A2%E9%BB%91%E6%A0%91%E7%9A%84%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>çº¢é»‘æ ‘ï¼Œä¸€ç§è‡ªå¹³è¡¡çš„ äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä½†åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæœ‰ä¸€ä¸ªé¢å¤–çš„å­˜å‚¨ä½è¡¨ç¤ºèŠ‚ç‚¹çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯Redæˆ–è€…Blackã€‚è¿™äº›é¢œè‰²ä½ç”¨æ¥ç¡®ä¿çº¢é»‘æ ‘åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œåä»èƒ½è¿‘ä¹å¹³è¡¡ã€‚</p><h2 id="çº¢é»‘æ ‘çš„åº”ç”¨åœºæ™¯"><a href="#çº¢é»‘æ ‘çš„åº”ç”¨åœºæ™¯" class="headerlink" title="çº¢é»‘æ ‘çš„åº”ç”¨åœºæ™¯"></a>çº¢é»‘æ ‘çš„åº”ç”¨åœºæ™¯</h2><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å¯èƒ½å·²ç»å¯¹çº¢é»‘æ ‘æœ‰äº†ä¸€ç‚¹åˆæ­¥çš„è®¤è¯†äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦æœ‰çº¢é»‘æ ‘ï¼Œçº¢é»‘æ ‘æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜è¢«æå‡ºæ¥çš„å‘¢ï¼Ÿ<br>æˆ‘ä»¬çŸ¥é“ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æŸ¥æ‰¾å’Œæ’å…¥åœ¨æ•ˆç‡ä¸Šæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨æœ€åçš„æƒ…å†µä¸‹æ•ˆç‡æ¯”è¾ƒä½ï¼Œä½†æ˜¯å¹³è¡¡äºŒå‰æ ‘èƒ½å¤Ÿä¿è¯åœ¨æœ€åçš„æƒ…å†µä¸‹ä¹Ÿèƒ½è¾¾åˆ°lgNï¼Œè¦å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å°±è¦ä¿è¯åœ¨æ’å…¥å®Œæˆåå§‹ç»ˆä¿æŒå¹³è¡¡çŠ¶æ€ã€‚åœ¨ä¸€æ£µå…·æœ‰Nä¸ªèŠ‚ç‚¹çš„æ ‘ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›è¯¥æ ‘çš„é«˜åº¦èƒ½å¤Ÿç»´æŒåœ¨lgNå·¦å³ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ä¿è¯åªéœ€è¦lgNæ¬¡æ¯”è¾ƒæ“ä½œå°±å¯ä»¥æŸ¥æ‰¾åˆ°æƒ³è¦çš„å€¼ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ¯æ¬¡æ’å…¥å…ƒç´ ä¹‹åç»´æŒæ ‘çš„å¹³è¡¡çŠ¶æ€å¤ªæ˜‚è´µã€‚æ‰€ä»¥å°±å‡ºç°ä¸€äº›æ–°çš„æ•°æ®ç»“æ„æ¥ä¿è¯åœ¨æœ€åçš„æƒ…å†µä¸‹æ’å…¥å’ŒæŸ¥æ‰¾æ•ˆç‡éƒ½èƒ½ä¿è¯åœ¨å¯¹æ•°çš„æ—¶é—´å¤æ‚åº¦å†…å®Œæˆã€‚è€Œæˆ‘ä»¬æ‰€è®²çš„çº¢é»‘æ ‘å°±å±äºæ­¤æ–°çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰Bæ ‘ç­‰æ•°æ®ç»“æ„ã€‚</p><h2 id="çº¢é»‘æ ‘ä¸å…¶ä»–ç»“æ„å¯¹æ¯”"><a href="#çº¢é»‘æ ‘ä¸å…¶ä»–ç»“æ„å¯¹æ¯”" class="headerlink" title="çº¢é»‘æ ‘ä¸å…¶ä»–ç»“æ„å¯¹æ¯”"></a>çº¢é»‘æ ‘ä¸å…¶ä»–ç»“æ„å¯¹æ¯”</h2><p><strong>çº¢é»‘æ ‘ vs æ™®é€šäºŒå‰æ ‘</strong><br>çº¢é»‘æ ‘å†æ’å…¥æˆ–è€…åˆ é™¤èŠ‚ç‚¹åï¼Œä¼šå¯¹æ“ä½œåçš„æ ‘è¿›è¡Œé‡æ–°å¹³è¡¡æ“ä½œã€‚ä½¿å¾—æœ€åæƒ…å†µä¸‹ï¼Œå¯¹èŠ‚ç‚¹çš„æŸ¥è¯¢æ•ˆç‡è¿˜æ˜¯é«˜ã€‚è€Œæ™®é€šäºŒå‰æ ‘ï¼Œæœ‰å¯èƒ½ä¼šå¼•èµ·æ ‘å€¾æ–œçš„é—®é¢˜ï¼Œè¿™æ—¶åœ¨æŸ¥æ‰¾æ ‘ä¸­èŠ‚ç‚¹ï¼Œæ•ˆç‡å¯èƒ½å˜æˆäº†O(1)ã€‚<br><strong>çº¢é»‘æ ‘ vs AVLå¹³è¡¡äºŒå‰æ ‘</strong><br>AVLæ ‘éœ€è¦ä¸¥æ ¼ç»´æŠ¤äºŒå‰æ ‘å¹³è¡¡ã€‚è€Œçº¢é»‘æ ‘é€šè¿‡èŠ‚ç‚¹é¢œè‰²æ¥ç»´æŠ¤ä¸€ä¸ªç›¸å¯¹å¹³è¡¡çš„äºŒå‰æ ‘ã€‚</p><ul><li>åœ¨æœç´¢ä¸Šï¼ŒAVLæ•ˆç‡ä¸ºlog(O)ï¼Œè€Œçº¢é»‘æ ‘å¹³å‡æ•ˆç‡ä¸ºlog(O)ï¼Œæœ€å¤§æƒ…å†µä¸‹æ˜¯2log(O)ã€‚</li><li>åœ¨æ’å…¥ä¸Šï¼Œçº¢é»‘æ ‘å’ŒAVLæ ‘ï¼ŒèŠ‚ç‚¹æ—‹è½¬æ¬¡æ•°éƒ½æ˜¯O(1)ã€‚</li><li>åœ¨åˆ é™¤ä¸Šï¼Œçº¢é»‘æ ‘åœ¨åˆ é™¤æ—¶èŠ‚ç‚¹æ—‹è½¬æ¬¡æ•°æ˜¯O(1)ï¼ŒAVLæ ‘åœ¨åˆ é™¤æ—¶èŠ‚ç‚¹æ—‹è½¬æ¬¡æ•°æ˜¯O(logn)ã€‚</li></ul><p>çº¢é»‘æ ‘ï¼ˆRed-Black Treeï¼Œä»¥ä¸‹ç®€ç§°RBTreeï¼‰çš„å®é™…åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ¯”å¦‚Linuxå†…æ ¸ä¸­çš„å®Œå…¨å…¬å¹³è°ƒåº¦å™¨ã€é«˜ç²¾åº¦è®¡æ—¶å™¨ã€ext3æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ï¼Œå„ç§è¯­è¨€çš„å‡½æ•°åº“å¦‚Javaçš„TreeMapå’ŒTreeSetï¼ŒC++ STLçš„mapã€multimapã€multisetç­‰ã€‚<br>RBTreeä¹Ÿæ˜¯å‡½æ•°å¼è¯­è¨€ä¸­æœ€å¸¸ç”¨çš„æŒä¹…æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œåœ¨è®¡ç®—å‡ ä½•ä¸­ä¹Ÿæœ‰é‡è¦ä½œç”¨ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒJava 8ä¸­HashMapçš„å®ç°ä¹Ÿå› ä¸ºç”¨RBTreeå–ä»£é“¾è¡¨ï¼Œæ€§èƒ½æœ‰æ‰€æå‡ã€‚</p><h2 id="çº¢é»‘æ ‘ç‰¹æ€§"><a href="#çº¢é»‘æ ‘ç‰¹æ€§" class="headerlink" title="çº¢é»‘æ ‘ç‰¹æ€§"></a>çº¢é»‘æ ‘ç‰¹æ€§</h2><p>ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²ã€‚<br>ï¼ˆ2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚<br>ï¼ˆ3ï¼‰æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚ [æ³¨æ„ï¼šè¿™é‡Œå¶å­èŠ‚ç‚¹ï¼Œæ˜¯æŒ‡ä¸ºç©º(NILæˆ–NULL)çš„å¶å­èŠ‚ç‚¹ï¼]<br>ï¼ˆ4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚<br>ï¼ˆ5ï¼‰ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚</p><h2 id="å…³äºæ—¶é—´å¤æ‚åº¦çš„è¯æ˜"><a href="#å…³äºæ—¶é—´å¤æ‚åº¦çš„è¯æ˜" class="headerlink" title="å…³äºæ—¶é—´å¤æ‚åº¦çš„è¯æ˜"></a>å…³äºæ—¶é—´å¤æ‚åº¦çš„è¯æ˜</h2><blockquote><p>çº¢é»‘æ ‘çš„æ—¶é—´å¤æ‚åº¦ä¸º: O(lgn)<br>ä¸‹é¢é€šè¿‡â€œæ•°å­¦å½’çº³æ³•â€å¯¹çº¢é»‘æ ‘çš„æ—¶é—´å¤æ‚åº¦è¿›è¡Œè¯æ˜ã€‚<br>å®šç†ï¼šä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n+1).<br>è¯æ˜ï¼š<br>â€œä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n+1)â€ çš„é€†å¦å‘½é¢˜æ˜¯ â€œé«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„å†…èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2h/2-1ä¸ªâ€ã€‚<br>æˆ‘ä»¬åªéœ€è¦è¯æ˜é€†å¦å‘½é¢˜ï¼Œå³å¯è¯æ˜åŸå‘½é¢˜ä¸ºçœŸï¼›å³åªéœ€è¯æ˜ â€œé«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„å†…èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2h/2-1ä¸ªâ€ã€‚<br>ä»æŸä¸ªèŠ‚ç‚¹xå‡ºå‘ï¼ˆä¸åŒ…æ‹¬è¯¥èŠ‚ç‚¹ï¼‰åˆ°è¾¾ä¸€ä¸ªå¶èŠ‚ç‚¹çš„ä»»æ„ä¸€æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„é»‘é«˜åº¦(xâ€™s black height)ï¼Œè®°ä¸ºbh(x)ã€‚å…³äºbh(x)æœ‰ä¸¤ç‚¹éœ€è¦è¯´æ˜ï¼š<br>ç¬¬1ç‚¹ï¼šæ ¹æ®çº¢é»‘æ ‘çš„â€ç‰¹æ€§(5) ï¼Œå³ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹â€å¯çŸ¥ï¼Œä»èŠ‚ç‚¹xå‡ºå‘åˆ°è¾¾çš„æ‰€æœ‰çš„å¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œbh(x)çš„å€¼æ˜¯å”¯ä¸€çš„ï¼<br>ç¬¬2ç‚¹ï¼šæ ¹æ®çº¢é»‘è‰²çš„â€ç‰¹æ€§(4)ï¼Œå³å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„â€å¯çŸ¥ï¼Œä»èŠ‚ç‚¹xå‡ºå‘è¾¾åˆ°å¶èŠ‚ç‚¹â€æ‰€ç»å†çš„é»‘èŠ‚ç‚¹æ•°ç›®â€&gt;= â€œæ‰€ç»å†çš„çº¢èŠ‚ç‚¹çš„æ•°ç›®â€ã€‚å‡è®¾xæ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆ™å¯ä»¥å¾—å‡ºç»“è®ºâ€bh(x) &gt;= h/2â€ã€‚è¿›è€Œï¼Œæˆ‘ä»¬åªéœ€è¯æ˜ â€œé«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„é»‘èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2bh(x)-1ä¸ªâ€å³å¯ã€‚<br>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°†éœ€è¦è¯æ˜çš„å®šç†å·²ç»ç”±<br>â€œä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n+1)â€<br>è½¬å˜æˆåªéœ€è¦è¯æ˜<br>â€œé«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„å†…èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2bh(x)-1ä¸ªâ€ã€‚<br>ä¸‹é¢é€šè¿‡â€æ•°å­¦å½’çº³æ³•â€å¼€å§‹è®ºè¯é«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„å†…èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2bh(x)-1ä¸ªâ€ã€‚<br>(01) å½“æ ‘çš„é«˜åº¦h=0æ—¶ï¼Œ<br>å†…èŠ‚ç‚¹ä¸ªæ•°æ˜¯0ï¼Œbh(x) ä¸º0ï¼Œ2bh(x)-1 ä¹Ÿä¸º 0ã€‚æ˜¾ç„¶ï¼ŒåŸå‘½é¢˜æˆç«‹ã€‚<br>(02) å½“h&gt;0ï¼Œä¸”æ ‘çš„é«˜åº¦ä¸º h-1 æ—¶ï¼Œå®ƒåŒ…å«çš„èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2bh(x)-1-1ã€‚è¿™ä¸ªæ˜¯æ ¹æ®(01)æ¨æ–­å‡ºæ¥çš„ï¼<br>ä¸‹é¢ï¼Œç”±æ ‘çš„é«˜åº¦ä¸º h-1 çš„å·²çŸ¥æ¡ä»¶æ¨å‡ºâ€œæ ‘çš„é«˜åº¦ä¸º h æ—¶ï¼Œå®ƒæ‰€åŒ…å«çš„èŠ‚ç‚¹æ ‘ä¸º 2bh(x)-1â€ã€‚<br>å½“æ ‘çš„é«˜åº¦ä¸º h æ—¶ï¼Œ<br>å¯¹äºèŠ‚ç‚¹x(xä¸ºæ ¹èŠ‚ç‚¹)ï¼Œå…¶é»‘é«˜åº¦ä¸ºbh(x)ã€‚<br>å¯¹äºèŠ‚ç‚¹xçš„å·¦å³å­æ ‘ï¼Œå®ƒä»¬é»‘é«˜åº¦ä¸º bh(x) æˆ–è€… bh(x)-1ã€‚<br>æ ¹æ®(02)çš„å·²çŸ¥æ¡ä»¶ï¼Œæˆ‘ä»¬å·²çŸ¥ â€œxçš„å·¦å³å­æ ‘ï¼Œå³é«˜åº¦ä¸º h-1 çš„èŠ‚ç‚¹ï¼Œå®ƒåŒ…å«çš„èŠ‚ç‚¹è‡³å°‘ä¸º 2bh(x)-1-1 ä¸ªâ€ï¼›<br>æ‰€ä»¥ï¼ŒèŠ‚ç‚¹xæ‰€åŒ…å«çš„èŠ‚ç‚¹è‡³å°‘ä¸º ( 2bh(x)-1-1 ) + ( 2bh(x)-1-1 ) + 1 = 2^bh(x)-1ã€‚å³èŠ‚ç‚¹xæ‰€åŒ…å«çš„èŠ‚ç‚¹è‡³å°‘ä¸º 2bh(x)-1ã€‚<br>å› æ­¤ï¼ŒåŸå‘½é¢˜æˆç«‹ã€‚<br>ç”±(01)ã€(02)å¾—å‡ºï¼Œâ€é«˜åº¦ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå®ƒçš„åŒ…å«çš„å†…èŠ‚ç‚¹ä¸ªæ•°è‡³å°‘ä¸º 2^bh(x)-1ä¸ªâ€ã€‚<br>å› æ­¤ï¼Œâ€œä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n+1)â€ã€‚</p></blockquote><h2 id="å·¦æ—‹å’Œå³æ—‹"><a href="#å·¦æ—‹å’Œå³æ—‹" class="headerlink" title="å·¦æ—‹å’Œå³æ—‹"></a>å·¦æ—‹å’Œå³æ—‹</h2><p>æ—¶é—´å¤æ‚åº¦ï¼š O(1)<br>å·¦æ—‹å’Œå³æ—‹æ˜¯ç›¸äº’å¯¹ç§°çš„<br>å›¾ç¤ºï¼š<br><img src="/image/base_rbtree_1.png" alt=""></p><h2 id="çº¢é»‘æ ‘æ’å…¥èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ"><a href="#çº¢é»‘æ ‘æ’å…¥èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ" class="headerlink" title="çº¢é»‘æ ‘æ’å…¥èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ"></a>çº¢é»‘æ ‘æ’å…¥èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ</h2><p>çŸ«æ­£çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚åœ¨å•æ¬¡çŸ«æ­£æƒ…å†µä¸­ï¼Œæ—‹è½¬ä»ä¸è¶…è¿‡2æ¬¡ï¼Œå› ä¸ºåªè¦æ‰§è¡Œäº†æƒ…å†µ2å’Œæƒ…å†µ3ï¼Œwhileå¾ªç¯å°±ç»“æŸäº†ã€‚æ’ä»¶èŠ‚ç‚¹ï¼Œæ’å…¥çš„æ˜¯çº¢è‰²èŠ‚ç‚¹ã€‚å¹¶ä¸”æ˜¯æ’å…¥åˆ°æ ‘çš„å¶èŠ‚ç‚¹ä¸Šçš„ã€‚å› æ­¤åªä¼šç ´åï¼ˆâ€œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„â€ï¼‰ç‰¹æ€§ã€‚å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š</p><h3 id="æƒ…å†µ1"><a href="#æƒ…å†µ1" class="headerlink" title="æƒ…å†µ1"></a>æƒ…å†µ1</h3><p>å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä¸”å”å”èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²</p><h4 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>é€šè¿‡è°ƒæ•´é¢œè‰²ï¼Œåœ¨ä¸æ”¹å˜çº¢é»‘æ ‘5ä¸ªç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œå°†çº¢è‰²èŠ‚ç‚¹ä¸Šç§»ã€‚</p><h4 id="å¤„ç†ç­–ç•¥"><a href="#å¤„ç†ç­–ç•¥" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†â€œçˆ¶èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²</li><li>å°†â€œå”å”èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²</li><li>å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œçº¢è‰²â€</li><li>å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œå½“å‰èŠ‚ç‚¹â€(çº¢è‰²èŠ‚ç‚¹)ï¼›å³ï¼Œä¹‹åç»§ç»­å¯¹â€œå½“å‰èŠ‚ç‚¹â€è¿›è¡Œæ“ä½œ<br><img src="/image/base_rbtree_2.png" alt=""></li></ul><h3 id="æƒ…å†µ2"><a href="#æƒ…å†µ2" class="headerlink" title="æƒ…å†µ2"></a>æƒ…å†µ2</h3><p>å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œä¸”å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­</p><h4 id="ç›®çš„-1"><a href="#ç›®çš„-1" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>é€šè¿‡æ—‹è½¬ï¼Œåœ¨ä¸æ”¹å˜å½“å‰æ ‘åŸæœ‰ç‰¹ç‚¹çš„æƒ…å†µä¸‹ï¼ˆçº¢èŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿˜æ˜¯çº¢è‰²ï¼‰ï¼Œå°†æƒ…å†µ2è½¬å˜æˆæƒ…å†µ3</p><h4 id="å¤„ç†ç­–ç•¥-1"><a href="#å¤„ç†ç­–ç•¥-1" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†â€œçˆ¶èŠ‚ç‚¹â€ä½œä¸ºâ€œæ–°çš„å½“å‰èŠ‚ç‚¹â€</li><li>ä»¥â€œæ–°çš„å½“å‰èŠ‚ç‚¹â€ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹<br><img src="/image/base_rbtree_3.png" alt=""></li></ul><h3 id="æƒ…å†µ3"><a href="#æƒ…å†µ3" class="headerlink" title="æƒ…å†µ3"></a>æƒ…å†µ3</h3><p>å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œä¸”å½“å‰èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</p><h4 id="å¤„ç†ç­–ç•¥-2"><a href="#å¤„ç†ç­–ç•¥-2" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†â€œçˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œé»‘è‰²â€ã€‚</li><li>å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œçº¢è‰²â€ã€‚</li><li>ä»¥â€œç¥–çˆ¶èŠ‚ç‚¹â€ä¸ºæ”¯ç‚¹è¿›è¡Œå³æ—‹ã€‚<br><img src="/image/base_rbtree_4.png" alt=""></li></ul><h2 id="çº¢é»‘æ ‘åˆ é™¤èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ"><a href="#çº¢é»‘æ ‘åˆ é™¤èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ" class="headerlink" title="çº¢é»‘æ ‘åˆ é™¤èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ"></a>çº¢é»‘æ ‘åˆ é™¤èŠ‚ç‚¹åçŸ«æ­£æƒ…å†µ</h2><p>çŸ«æ­£çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚å•æ¬¡çŸ«æ­£ï¼Œæ—‹è½¬ä»ä¸è¶…è¿‡3æ¬¡ã€‚åˆ°æƒ…å†µ2æˆ–è€…æƒ…å†µ4å°±ç»ˆæ­¢äº†ã€‚ç§»é™¤èŠ‚ç‚¹ï¼Œå¦‚æœç§»é™¤çš„æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥åˆ é™¤å³å¯ã€‚å¦‚æœç§»é™¤çš„æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œä¼šç ´åï¼ˆâ€œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„â€å’Œâ€œæ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²â€ï¼‰ç‰¹æ€§ã€‚å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š</p><h3 id="æƒ…å†µ1-1"><a href="#æƒ…å†µ1-1" class="headerlink" title="æƒ…å†µ1"></a>æƒ…å†µ1</h3><p>xæ˜¯â€é»‘+é»‘â€èŠ‚ç‚¹ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ã€‚</p><h4 id="ç›®çš„-2"><a href="#ç›®çš„-2" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>å°†å½“å‰æ¨¡å¼è½¬åŒ–ä¸ºåç»­ä¸‰ç§æ¨¡å¼</p><h4 id="å¤„ç†ç­–ç•¥-3"><a href="#å¤„ç†ç­–ç•¥-3" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†xçš„å…„å¼ŸèŠ‚ç‚¹è®¾ä¸ºâ€œé»‘è‰²â€ã€‚</li><li>å°†xçš„çˆ¶èŠ‚ç‚¹è®¾ä¸ºâ€œçº¢è‰²â€ã€‚</li><li>å¯¹xçš„çˆ¶èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹ã€‚</li><li>å·¦æ—‹åï¼Œé‡æ–°è®¾ç½®xçš„å…„å¼ŸèŠ‚ç‚¹ã€‚<br><img src="/image/base_rbtree_5.png" alt=""></li></ul><h3 id="æƒ…å†µ2-1"><a href="#æƒ…å†µ2-1" class="headerlink" title="æƒ…å†µ2"></a>æƒ…å†µ2</h3><p>xæ˜¯â€œé»‘+é»‘â€èŠ‚ç‚¹ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­éƒ½æ˜¯é»‘è‰²ã€‚</p><h4 id="ç›®çš„-3"><a href="#ç›®çš„-3" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>å°†â€œé»‘+é»‘â€èŠ‚ç‚¹ï¼Œä¸­çš„å…¶ä¸­ä¸€ä¸ªé»‘è‰²å±æ€§æ¶ˆé™¤ï¼Œå¹¶ä¸Šç§»ã€‚</p><h4 id="å¤„ç†ç­–ç•¥-4"><a href="#å¤„ç†ç­–ç•¥-4" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†xçš„å…„å¼ŸèŠ‚ç‚¹è®¾ä¸ºâ€œçº¢è‰²â€ã€‚</li><li>è®¾ç½®â€œxçš„çˆ¶èŠ‚ç‚¹â€ä¸ºâ€œæ–°çš„xèŠ‚ç‚¹â€ï¼ŒåŸæ¥ä¸ºçº¢è‰²ï¼Œç°åœ¨å°±æ˜¯â€œé»‘+çº¢â€èŠ‚ç‚¹ï¼Œå°†çº¢è‰²ç§»é™¤åï¼Œâ€œæ–°çš„xèŠ‚ç‚¹â€ä¸ºé»‘è‰²ï¼Œå¹³è¡¡ç»“æŸã€‚å¦‚æœåŸæ¥æ˜¯é»‘è‰²ï¼Œç°åœ¨å°±æ˜¯â€œé»‘+é»‘â€èŠ‚ç‚¹ï¼Œæ ¹æ®æƒ…å†µæ‰§è¡Œå¤„ç†ç­–ç•¥ã€‚<br><img src="/image/base_rbtree_6.png" alt=""></li></ul><h3 id="æƒ…å†µ3-1"><a href="#æƒ…å†µ3-1" class="headerlink" title="æƒ…å†µ3"></a>æƒ…å†µ3</h3><p>xæ˜¯â€œé»‘+é»‘â€èŠ‚ç‚¹ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›xçš„å…„å¼ŸèŠ‚ç‚¹çš„å·¦å­©å­æ˜¯çº¢è‰²ï¼Œå³å­©å­æ˜¯é»‘è‰²çš„ã€‚</p><h4 id="ç›®çš„-4"><a href="#ç›®çš„-4" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>å°†å½“å‰çŠ¶æ€è½¬åŒ–ä¸ºæƒ…å†µ4</p><h4 id="å¤„ç†ç­–ç•¥-5"><a href="#å¤„ç†ç­–ç•¥-5" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†xå…„å¼ŸèŠ‚ç‚¹çš„å·¦å­©å­è®¾ä¸ºâ€œé»‘è‰²â€ã€‚</li><li>å°†xå…„å¼ŸèŠ‚ç‚¹è®¾ä¸ºâ€œçº¢è‰²â€ã€‚</li><li>å¯¹xçš„å…„å¼ŸèŠ‚ç‚¹è¿›è¡Œå³æ—‹ã€‚</li><li>å³æ—‹åï¼Œé‡æ–°è®¾ç½®xçš„å…„å¼ŸèŠ‚ç‚¹ã€‚<br><img src="/image/base_rbtree_7.png" alt=""></li></ul><h3 id="æƒ…å†µ4"><a href="#æƒ…å†µ4" class="headerlink" title="æƒ…å†µ4"></a>æƒ…å†µ4</h3><p>xæ˜¯â€œé»‘+é»‘â€èŠ‚ç‚¹ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›xçš„å…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­æ˜¯çº¢è‰²çš„ï¼Œxçš„å…„å¼ŸèŠ‚ç‚¹çš„å·¦å­©å­ä»»æ„é¢œè‰²ã€‚</p><h4 id="ç›®çš„-5"><a href="#ç›®çš„-5" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæˆ‘ä»¬è®¾ç½®â€œå½“å‰èŠ‚ç‚¹â€ä¸ºS(Original Son)ï¼Œâ€œå…„å¼ŸèŠ‚ç‚¹â€ä¸ºB(Brother)ï¼Œâ€œå…„å¼ŸèŠ‚ç‚¹çš„å·¦å­©å­â€ä¸ºBLS(Brotherâ€™s Left Son)ï¼Œâ€œå…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­â€ä¸ºBRS(Brotherâ€™s Right Son)ï¼Œâ€œçˆ¶èŠ‚ç‚¹â€ä¸ºF(Father)ã€‚<br>æˆ‘ä»¬è¦å¯¹Fè¿›è¡Œå·¦æ—‹ã€‚ä½†åœ¨å·¦æ—‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ¢Få’ŒBçš„é¢œè‰²ï¼Œå¹¶è®¾ç½®BRSä¸ºé»‘è‰²ã€‚ä¸ºä»€ä¹ˆéœ€è¦è¿™é‡Œå¤„ç†å‘¢ï¼Ÿå› ä¸ºå·¦æ—‹åï¼ŒFå’ŒBLSæ˜¯çˆ¶å­å…³ç³»ï¼Œè€Œæˆ‘ä»¬å·²çŸ¥BLæ˜¯çº¢è‰²ï¼Œå¦‚æœFæ˜¯çº¢è‰²ï¼Œåˆ™è¿èƒŒäº†â€œç‰¹æ€§(4)â€ï¼›ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å°†â€œFè®¾ç½®ä¸ºé»‘è‰²â€ã€‚ ä½†æ˜¯ï¼ŒFè®¾ç½®ä¸ºé»‘è‰²ä¹‹åï¼Œä¸ºäº†ä¿è¯æ»¡è¶³â€œç‰¹æ€§(5)â€ï¼Œå³ä¸ºäº†ä¿è¯å·¦æ—‹ä¹‹åï¼š</p><ul><li>ç¬¬ä¸€ï¼Œâ€œåŒæ—¶ç»è¿‡æ ¹èŠ‚ç‚¹å’ŒSçš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹ä¸ªæ•°ä¸å˜â€ã€‚<ul><li>è‹¥æ»¡è¶³â€œç¬¬ä¸€â€ï¼Œåªéœ€è¦Sä¸¢å¼ƒå®ƒå¤šä½™çš„é¢œè‰²å³å¯ã€‚å› ä¸ºSçš„é¢œè‰²æ˜¯â€œé»‘+é»‘â€ï¼Œè€Œå·¦æ—‹åâ€œåŒæ—¶ç»è¿‡æ ¹èŠ‚ç‚¹å’ŒSçš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹ä¸ªæ•°â€å¢åŠ äº†1ï¼›ç°åœ¨ï¼Œåªéœ€å°†Sç”±â€œé»‘+é»‘â€å˜æˆå•ç‹¬çš„â€œé»‘â€èŠ‚ç‚¹ï¼Œå³å¯æ»¡è¶³â€œç¬¬ä¸€â€ã€‚</li></ul></li><li>ç¬¬äºŒï¼Œâ€œåŒæ—¶ç»è¿‡æ ¹èŠ‚ç‚¹å’ŒBLSçš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹æ•°ä¸å˜â€ã€‚<ul><li>è‹¥æ»¡è¶³â€œç¬¬äºŒâ€ï¼Œåªéœ€è¦å°†â€œFçš„åŸå§‹é¢œè‰²â€èµ‹å€¼ç»™Bå³å¯ã€‚ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»å°†â€œFè®¾ç½®ä¸ºé»‘è‰²â€(å³ï¼Œå°†Bçš„é¢œè‰²â€é»‘è‰²â€ï¼Œèµ‹å€¼ç»™äº†F)ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬ç®—æ˜¯è°ƒæ¢äº†Få’ŒBçš„é¢œè‰²ã€‚</li></ul></li><li>ç¬¬ä¸‰ï¼Œâ€œåŒæ—¶ç»è¿‡æ ¹èŠ‚ç‚¹å’ŒBRSçš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹æ•°ä¸å˜â€ã€‚<ul><li>åœ¨â€œç¬¬äºŒâ€å·²ç»æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œè‹¥è¦æ»¡è¶³â€œç¬¬ä¸‰â€ï¼Œåªéœ€è¦å°†BRSè®¾ç½®ä¸ºâ€œé»‘è‰²â€å³å¯ã€‚</li></ul></li></ul><p>ç»è¿‡ï¼Œä¸Šé¢çš„å¤„ç†ä¹‹åã€‚çº¢é»‘æ ‘çš„ç‰¹æ€§å…¨éƒ¨å¾—åˆ°çš„æ»¡è¶³ï¼æ¥ç€ï¼Œæˆ‘ä»¬å°†xè®¾ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå°±å¯ä»¥è·³å‡ºwhileå¾ªç¯(å‚è€ƒä¼ªä»£ç )ï¼›å³å®Œæˆäº†å…¨éƒ¨å¤„ç†ã€‚</p><h4 id="å¤„ç†ç­–ç•¥-6"><a href="#å¤„ç†ç­–ç•¥-6" class="headerlink" title="å¤„ç†ç­–ç•¥"></a>å¤„ç†ç­–ç•¥</h4><ul><li>å°†xçˆ¶èŠ‚ç‚¹é¢œè‰² èµ‹å€¼ç»™ xçš„å…„å¼ŸèŠ‚ç‚¹ã€‚</li><li>å°†xçˆ¶èŠ‚ç‚¹è®¾ä¸ºâ€œé»‘è‰²â€ã€‚</li><li>å°†xå…„å¼ŸèŠ‚ç‚¹çš„å³å­èŠ‚è®¾ä¸ºâ€œé»‘è‰²â€ã€‚</li><li>å¯¹xçš„çˆ¶èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹ã€‚</li><li>è®¾ç½®â€œxâ€ä¸ºâ€œæ ¹èŠ‚ç‚¹â€ã€‚<br><img src="/image/base_rbtree_8.png" alt=""></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://tech.meituan.com/redblack_tree.html" target="_blank" rel="noopener">https://tech.meituan.com/redblack_tree.html</a><br><a href="https://zhuanlan.zhihu.com/p/34840762" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34840762</a></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­çš„EventEmitterè®¢é˜…å‘å¸ƒ</title>
      <link href="/2019/01/01/Node-JS%E4%B8%AD%E7%9A%84EventEmitter%E8%AE%A2%E9%98%85%E5%8F%91%E5%B8%83/"/>
      <url>/2019/01/01/Node-JS%E4%B8%AD%E7%9A%84EventEmitter%E8%AE%A2%E9%98%85%E5%8F%91%E5%B8%83/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Node ä¸­çš„è®¸å¤šæ ¸å¿ƒ API éƒ½æ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥æ¶æ„å®ç°çš„ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯å½“ emitters å‘é€äº‹ä»¶åï¼Œç›¸åº”çš„å“åº”å‡½æ•°ï¼ˆ listeners ï¼‰ä¼šè¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼šnet.Server ä¼šåœ¨æ¯æ¬¡æ”¶åˆ°è¿æ¥æ—¶å‘å‡ºäº‹ä»¶ï¼Œfs.ReadStram ä¼šåœ¨æ–‡ä»¶æ‰“å¼€æ—¶å‘å‡ºäº‹ä»¶ï¼Œstramä¼šåœ¨æœ‰æ•°æ®å¯è¯»æ—¶å‘å‡ºäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ï¼Œå®ƒä»¬é€šè¿‡å‘å¤–æš´éœ²çš„ eventEmitter.on() æ¥å£ä»è€Œè®©ä¸åŒçš„äº‹ä»¶å“åº”å‡½æ•°å¾—ä»¥æ‰§è¡Œã€‚</p><h2 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h2><h4 id="on-å’Œ-emit-æ–¹æ³•"><a href="#on-å’Œ-emit-æ–¹æ³•" class="headerlink" title="on å’Œ emit æ–¹æ³•"></a>on å’Œ emit æ–¹æ³•</h4><p>events æ¨¡å—æœ‰ä¸”åªæœ‰ä¸€ä¸ªå¯¹è±¡ events.EventEmitterï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯äº‹ä»¶çš„è§¦å‘ï¼ˆemitï¼‰å’Œäº‹ä»¶çš„ç›‘å¬ï¼ˆonï¼‰ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'hi'</span>, (name) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hi, my name is <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.emit(<span class="string">'hi'</span>, <span class="string">'elvin'</span>);</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ emitter.on(â€˜hiâ€™, func) çš„æ–¹å¼æ³¨å†Œäº† hi äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œé€šè¿‡ emitter.emit(â€˜hiâ€™, â€˜elvinâ€™) çš„æ–¹å¼è§¦å‘äº† hi äº‹ä»¶ï¼Œä¸”ä¼šå‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’å‚æ•° â€˜elvinâ€™ï¼Œæ‰€ä»¥æœ€åçš„æ‰§è¡Œç»“æœä¸º hi, my name is elvin!ã€‚ è¿™é‡Œéœ€è¦è¯´æ˜çš„æ—¶ï¼ŒEventEmitter è¿˜æœ‰ä¸€ä¸ª addeListener çš„æ–¹æ³•ï¼Œå®ƒåªä¸è¿‡æ˜¯ on æ–¹æ³•çš„åˆ«åï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><h4 id="once-æ–¹æ³•"><a href="#once-æ–¹æ³•" class="headerlink" title="once æ–¹æ³•"></a>once æ–¹æ³•</h4><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æŸäº›äº‹ä»¶å“åº”å‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ once() æ–¹æ³•ï¼Œå®ƒä¼šå’Œ on() ä¸€æ ·æ³¨å†Œäº‹ä»¶çš„å“åº”å‡½æ•°ï¼Œä¸è¿‡å½“å“åº”å‡½æ•°æ‰§è¡Œä¸€æ¬¡ä¹‹åï¼Œå°±ä¼šå°†å…¶ç§»é™¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line">emitter.once(<span class="string">'hi'</span>, (name) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hi, my name is <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.emit(<span class="string">'hi'</span>, <span class="string">'elvin'</span>);</span><br><span class="line">emitter.emit(<span class="string">'hi'</span>, <span class="string">'leonard'</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¸­åªä¼šè¾“å‡º hi, my name is elvin!ï¼ˆleonard å¾ˆé«˜å†·ï¼Œä¸å±‘äºå‘ä½ æ‰“æ‹›å‘¼â”—( â–”, â–” )â”›ï¼‰ã€‚</p><h4 id="prependListener-æ–¹æ³•"><a href="#prependListener-æ–¹æ³•" class="headerlink" title="prependListener æ–¹æ³•"></a>prependListener æ–¹æ³•</h4><p>å½“ä¸€ä¸ªäº‹ä»¶ç»‘å®šäº†å¤šä¸ªå“åº”å‡½æ•°æ—¶ï¼Œä¼šæŒ‰ç…§å‡½æ•°ç»‘å®šçš„é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œé™¤éå“åº”å‡½æ•°æ˜¯é€šè¿‡ prependListener() æ–¹æ³•ç»‘å®šçš„ï¼Œå®ƒä½¿ç”¨çš„æ–¹å¼å’Œ on() ç±»ä¼¼ï¼Œä¸è¿‡ä¼šå°†å“åº”å‡½æ•°æ’åˆ°å½“å‰è¯¥äº‹ä»¶å¤„ç†å‡½æ•°é˜Ÿåˆ—çš„å¤´éƒ¨ï¼Œå…·ä½“çš„ä¾‹å­å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'hi'</span>, (name) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`my name is <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'hi'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I\'m from Wuhan.'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.prependListener(<span class="string">'hi'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'nice to meet you!'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'hi'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'What\'s your name?'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.emit(<span class="string">'hi'</span>, <span class="string">'elvin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºä¸ºï¼š</span></span><br><span class="line"><span class="comment">// nice to meet you!</span></span><br><span class="line"><span class="comment">// my name is elvin.</span></span><br><span class="line"><span class="comment">// I'm from Wuhan.</span></span><br><span class="line"><span class="comment">// What\'s your name?</span></span><br></pre></td></tr></table></figure><h4 id="å“åº”å‡½æ•°çš„æ•°é‡"><a href="#å“åº”å‡½æ•°çš„æ•°é‡" class="headerlink" title="å“åº”å‡½æ•°çš„æ•°é‡"></a>å“åº”å‡½æ•°çš„æ•°é‡</h4><p>å› ä¸ºç»‘å®šè¿‡å¤šçš„å“åº”å‡½æ•°ä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…å†…å­˜æ³„æ¼ï¼Œåœ¨ Event.EventEmitterä¸­ä¸€ä¸ªäº‹ä»¶å¯ä»¥ç»‘å®šçš„å“åº”å‡½æ•°æ•°é‡æ˜¯å­˜åœ¨é™åˆ¶çš„ï¼Œç›¸å…³çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li><strong>EventEmitter.defaultMaxListeners</strong>ï¼š é»˜è®¤å€¼ä¸º10ï¼Œ è¡¨ç¤ºæ¯ä¸ªäº‹ä»¶çš„æœ€å¤šå¯ä»¥ç»‘å®šçš„å“åº”å‡½æ•°æ•°é‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä¿®æ”¹å®ƒæ—¶ï¼Œä¼šå½±å“æ‰€æœ‰ EventEmitter çš„å®ä¾‹ã€‚</li><li><strong>emitter.listenerCount(eventName)</strong>ï¼šè·å–äº‹ä»¶ eventName å·²ç»‘å®šçš„å“åº”å‡½æ•°ä¸ªæ•°ã€‚</li><li><strong>emitter.setMaxListeners(n)</strong>ï¼šä¿®æ”¹ emitter çš„æ¯ä¸ªäº‹ä»¶æœ€å¤šå¯ä»¥ç»‘å®šçš„å“åº”å‡½æ•°æ•°é‡ï¼Œè¯¥æ–¹æ³•ä¼šä¿®æ”¹ emitter._maxListeners çš„å€¼ï¼Œå…¶ä¼˜å…ˆçº§å¤§äº EventEmitter.defaultMaxListeners ã€‚</li><li><strong>emitter.getMaxListeners()</strong>ï¼šè·å– emitter æ¯ä¸ªäº‹ä»¶æœ€å¤šå¯ä»¥ç»‘å®šçš„å“åº”å‡½æ•°æ•°é‡ã€‚</li></ul><h4 id="å…¶ä»–ç›¸å…³æ–¹æ³•"><a href="#å…¶ä»–ç›¸å…³æ–¹æ³•" class="headerlink" title="å…¶ä»–ç›¸å…³æ–¹æ³•"></a>å…¶ä»–ç›¸å…³æ–¹æ³•</h4><p>EventEmitter è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•å’Œå±æ€§ï¼Œè¿™é‡Œå°±ä¸åšå…·ä½“ä»‹ç»ï¼Œç®€è¦åœ°è¯´ä¸€ä¸‹ã€‚</p><ul><li><strong>emitter.eventNames()</strong>ï¼šè¿”å›å½“å‰å·²ç»ç»‘å®šå“åº”å‡½æ•°çš„äº‹ä»¶åç»„æˆçš„æ•°ç»„ã€‚</li><li><strong>emitter.listeners(eventName)</strong>ï¼šè¿”å› eventName äº‹ä»¶çš„å“åº”å‡½æ•°ç»„æˆçš„æ•°ç»„ã€‚</li><li><strong>emitter.prependOnceListener(eventName, listener)</strong>ï¼šç±»ä¼¼äº once()ï¼Œä¸è¿‡ä¼šå°†å“åº”å‡½æ•°æ’åˆ°å½“å‰è¯¥äº‹ä»¶å¤„ç†å‡½æ•°é˜Ÿåˆ—çš„å¤´éƒ¨ã€‚</li><li><strong>emitter.removeAllListeners([eventName])</strong>ï¼šç§»é™¤ eventName äº‹ä»¶æ‰€æœ‰çš„å“åº”å‡½æ•°ã€‚å½“æœªä¼ å…¥ eventName å‚æ•°æ—¶ï¼Œæ‰€æœ‰äº‹ä»¶çš„å“åº”å‡½æ•°éƒ½ä¼šè¢«ç§»é™¤ã€‚</li><li><strong>emitter.removeListener(eventName, listener)</strong>ï¼šç§»é™¤ eventName äº‹ä»¶çš„å“åº”å‡½æ•° listenerã€‚</li></ul><h4 id="newListener-å’Œ-removeListener-äº‹ä»¶"><a href="#newListener-å’Œ-removeListener-äº‹ä»¶" class="headerlink" title="newListener å’Œ removeListener äº‹ä»¶"></a>newListener å’Œ removeListener äº‹ä»¶</h4><p>å½“ emitter è¢«æ³¨å†Œå“åº”å‡½æ•°æ—¶ï¼Œä¼šè§¦å‘ newListener äº‹ä»¶ï¼›è¢«ç§»é™¤å“åº”å‡½æ•°æ—¶ï¼Œä¼šè§¦å‘ removeListener äº‹ä»¶ã€‚ä¸¤ä¸ªäº‹ä»¶çš„å“åº”å‡½æ•°ä¼šè¢«ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šæ³¨å†Œçš„äº‹ä»¶åå’Œå“åº”çš„å“åº”å‡½æ•°ã€‚å…·ä½“çš„ä¾‹å­å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šæ­¤å¤„ä½¿ç”¨ emitter.on æ–¹æ³•çš„è¯ä¼šé™·å…¥å¾ªç¯è°ƒç”¨ï¼Œå¯¼è‡´æ ˆæº¢å‡º</span></span><br><span class="line">emitter.once(<span class="string">'newListener'</span>, (event, listener) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (event === <span class="string">'hi'</span>) &#123;</span><br><span class="line">        emitter.on(<span class="string">'hi'</span>, () =&gt; &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Nice to meet you.'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'hi'</span>, (name) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.emit(<span class="string">'hi'</span>, <span class="string">'elvin'</span>);</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœä¸º Nice to meet you. My name is elvin.ã€‚å®é™…ä¸Šï¼Œ newListener äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå“åº”å‡½æ•°è¿˜æœªè¢«æ³¨å†Œè‡³ emitterï¼Œå› è€Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åœ¨ç›®æ ‡å“åº”å‡½æ•°ä¹‹å‰æ’å…¥å…¶ä»–å“åº”å‡½æ•°ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ Nice to meet you. å°±åœ¨ My name is elvin. ä¹‹å‰è¿›è¡Œè¾“å‡ºã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://imweb.io/topic/5973722452e1c21811630609" target="_blank" rel="noopener">https://imweb.io/topic/5973722452e1c21811630609</a></p>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­çš„äº‹ä»¶å¾ªç¯æœºåˆ¶</title>
      <link href="/2018/12/31/Node-JS%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6/"/>
      <url>/2018/12/31/Node-JS%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Node.jsçš„å•çº¿ç¨‹å«ä¹‰ï¼Œå®é™…ä¸Šè¯´çš„æ˜¯æ‰§è¡ŒåŒæ­¥ä»£ç çš„ä¸»çº¿ç¨‹ã€‚ä¸€ä¸ªNodeç¨‹åºçš„å¯åŠ¨ï¼Œä¸æ­¢æ˜¯åˆ†é…äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯æˆ‘ä»¬åªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»£ç ã€‚å½“å‡ºç°I/Oèµ„æºè°ƒç”¨ï¼ŒTCPè¿æ¥ç­‰å¤–éƒ¨èµ„æºç”³è¯·çš„æ—¶å€™ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œè€Œæ˜¯å§”æ‰˜ç»™I/Oçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚ä¸€æ—¦ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæˆï¼Œå°†ä¼šæ¶ˆè´¹äº‹ä»¶é˜Ÿåˆ—(Event Queue)ã€‚å› ä¸ºåªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œåªå ç”¨CPUå†…æ ¸å¤„ç†é€»è¾‘è®¡ç®—ï¼Œå› æ­¤ä¸é€‚åˆåœ¨CPUå¯†é›†å‹è¿›è¡Œä½¿ç”¨ã€‚EventLoop æ˜¯ä¸€ç§å¸¸ç”¨çš„æœºåˆ¶ï¼Œé€šè¿‡å¯¹å†…éƒ¨æˆ–å¤–éƒ¨çš„äº‹ä»¶æä¾›è€…å‘å‡ºè¯·æ±‚ï¼Œå¦‚æ–‡ä»¶è¯»å†™ï¼Œç½‘ç»œè¿æ¥ ç­‰å¼‚æ­¥æ“ä½œï¼Œå®Œæˆåè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚æ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯å¼‚æ­¥é˜¶æ®µã€‚</p><h2 id="äº‹ä»¶å¾ªç¯æœºåˆ¶"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”Œâ”€&gt;â”‚        timers         â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  â”‚     I/O callbacks     â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  â”‚     idle, prepare     â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   incoming:   â”‚</span><br><span class="line">â”‚  â”‚         poll          â”‚&lt;â”€â”€connectionsâ”€â”€â”€     â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   data, etc.  â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”‚  â”‚        check          â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â””â”€â”€â”¤    close callbacks    â”‚</span><br><span class="line">   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">   </span><br><span class="line">æ³¨ï¼šæ¨¡å‹ä¸­çš„æ¯ä¸€ä¸ªæ–¹å—ä»£è¡¨äº‹ä»¶å¾ªç¯çš„ä¸€ä¸ªé˜¶æ®µ</span><br></pre></td></tr></table></figure><ul><li>timers é˜¶æ®µ: è¿™ä¸ªé˜¶æ®µæ‰§è¡Œé€šè¿‡setTimeout(callback)å’ŒsetInterval(callback)è®¾ç½®çš„callback;</li><li>i/o é˜¶æ®µ: æ‰§è¡Œé™¤äº†closeäº‹ä»¶ï¼Œå’ŒsetTimeoutï¼ŒsetIntervalï¼ŒsetImmediateæ–¹æ³•è®¾å®šçš„callbacksä¹‹å¤–çš„callbacks;</li><li>idle, prepare é˜¶æ®µ: ä»…nodeå†…éƒ¨ä½¿ç”¨;</li><li>poll é˜¶æ®µ: è½®è¯¢ï¼Œä¸æ–­æ£€æŸ¥æœ‰æ²¡æœ‰æ–°çš„I/Oäº‹ä»¶ï¼Œäº‹ä»¶ç¯å¯èƒ½ä¼šåœ¨è¿™é‡Œé˜»å¡;</li><li>check é˜¶æ®µ: æ‰§è¡ŒsetImmediate(callback)è®¾ç½®çš„callbacks;</li><li>close é˜¶æ®µ: æ‰§è¡Œcloseäº‹ä»¶çš„callbackï¼Œä¾‹å¦‚socket.on(â€˜closeâ€™, callback)çš„callbacks;</li></ul><h2 id="å„é˜¶æ®µè¯¦ç»†ä»‹ç»"><a href="#å„é˜¶æ®µè¯¦ç»†ä»‹ç»" class="headerlink" title="å„é˜¶æ®µè¯¦ç»†ä»‹ç»"></a>å„é˜¶æ®µè¯¦ç»†ä»‹ç»</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥é’ˆå¯¹Nodeäº‹ä»¶å¾ªç¯çš„æ¯ä¸ªé˜¶æ®µè¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p><h4 id="timers-é˜¶æ®µ"><a href="#timers-é˜¶æ®µ" class="headerlink" title="timers é˜¶æ®µ"></a>timers é˜¶æ®µ</h4><p>è¿™ä¸ªé˜¶æ®µä¸»è¦ç”¨æ¥å¤„ç†å®šæ—¶å™¨ç›¸å…³çš„å›è°ƒï¼Œå½“ä¸€ä¸ªå®šæ—¶å™¨è¶…æ—¶åï¼Œä¸€ä¸ªäº‹ä»¶å°±ä¼šåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œäº‹ä»¶å¾ªç¯è·³è½¬è‡³è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚å®šæ—¶å™¨çš„å›è°ƒä¼šåœ¨è§¦å‘åå°½å¯èƒ½æ—©åœ°è¢«è°ƒç”¨ï¼Œè¿™è¡¨ç¤ºå®é™…çš„å»¶æ—¶å¯èƒ½ä¼šæ¯”å®šæ—¶å™¨è§„å®šçš„æ—¶é—´è¦é•¿ã€‚å¦‚æœäº‹ä»¶å¾ªç¯ï¼Œæ­¤æ—¶æ­£åœ¨æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„callbackï¼Œä¾‹å¦‚å¤„ç†ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„å¾ªç¯ï¼Œé‚£ä¹ˆå®šæ—¶å™¨çš„å›è°ƒåªèƒ½ç­‰åˆ°å½“å‰å›è°ƒæ‰§è¡Œç»“æŸäº†æ‰èƒ½è¢«æ‰§è¡Œï¼Œå³è¢«é˜»å¡ã€‚äº‹å®ä¸Šï¼Œtimersé˜¶æ®µçš„æ‰§è¡Œå—åˆ°pollé˜¶æ®µçš„æ§åˆ¶ï¼Œåé¢ä¼šè®²åˆ°ã€‚</p><h4 id="IO-callbacks-é˜¶æ®µ"><a href="#IO-callbacks-é˜¶æ®µ" class="headerlink" title="IO callbacks é˜¶æ®µ"></a>IO callbacks é˜¶æ®µ</h4><p>Nodejså®˜ç½‘æ–‡æ¡£å¯¹è¿™ä¸ªé˜¶æ®µçš„è§£é‡Šä¸ºï¼šé™¤äº†timersã€setImmediateï¼Œä»¥åŠcloseæ“ä½œä¹‹å¤–çš„å¤§å¤šæ•°çš„å›è°ƒæ–¹æ³•éƒ½ä½äºè¿™ä¸ªé˜¶æ®µæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œä¸€äº›å¸¸è§çš„å›è°ƒï¼Œä¾‹å¦‚fs.readFileçš„å›è°ƒæ˜¯æ”¾åœ¨pollé˜¶æ®µæ¥æ‰§è¡Œçš„ã€‚æ ¹æ®libuvçš„æ–‡æ¡£ï¼Œä¸€äº›åº”è¯¥åœ¨ä¸Šè½®äº‹ä»¶å¾ªç¯pollé˜¶æ®µæ‰§è¡Œçš„callbackï¼Œå› ä¸ºæŸäº›åŸå› ä¸èƒ½æ‰§è¡Œï¼Œå°±ä¼šè¢«å»¶è¿Ÿåˆ°è¿™ä¸€è½®çš„äº‹ä»¶å¾ªç¯çš„I/O callbacksé˜¶æ®µæ‰§è¡Œã€‚æ¢å¥è¯è¯´è¿™ä¸ªé˜¶æ®µæ‰§è¡Œçš„callbacksæ˜¯ä¸Šè½®æ®‹ç•™çš„ã€‚</p><h4 id="poll-é˜¶æ®µ"><a href="#poll-é˜¶æ®µ" class="headerlink" title="poll é˜¶æ®µ"></a>poll é˜¶æ®µ</h4><p>pollé˜¶æ®µçš„ä¸»è¦ä»»åŠ¡æ˜¯ç­‰å¾…æ–°çš„äº‹ä»¶çš„å‡ºç°ï¼ˆè¯¥é˜¶æ®µä½¿ç”¨epollæ¥è·å–æ–°çš„äº‹ä»¶ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œäº‹ä»¶å¾ªç¯å¯èƒ½ä¼šåœ¨æ­¤é˜»å¡ã€‚è¿™äº›äº‹ä»¶å¯¹åº”çš„å›è°ƒæ–¹æ³•å¯èƒ½ä½äºtimersé˜¶æ®µï¼ˆå¦‚æœå®šä¹‰äº†å®šæ—¶å™¨ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯checké˜¶æ®µï¼ˆå¦‚æœè®¾ç½®äº†setImmediateæ–¹æ³•ï¼‰ã€‚pollé˜¶æ®µä¸»è¦æœ‰ä¸¤ä¸ªæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰å¦‚æœæœ‰åˆ°æœŸçš„å®šæ—¶å™¨ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œå®šæ—¶å™¨çš„å›è°ƒæ–¹æ³•ã€‚<br>ï¼ˆ2ï¼‰å¤„ç†pollé˜¶æ®µå¯¹åº”çš„äº‹ä»¶é˜Ÿåˆ—ï¼ˆä»¥ä¸‹ç®€ç§°pollé˜Ÿåˆ—ï¼‰é‡Œçš„äº‹ä»¶ã€‚<br>å½“äº‹ä»¶å¾ªç¯åˆ°è¾¾pollé˜¶æ®µæ—¶ï¼Œå¦‚æœè¿™æ—¶æ²¡æœ‰è¦å¤„ç†çš„å®šæ—¶å™¨çš„å›è°ƒæ–¹æ³•ï¼Œåˆ™ä¼šè¿›è¡Œä¸‹é¢çš„åˆ¤æ–­ï¼š<br>ï¼ˆ1ï¼‰å¦‚æœpollé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™äº‹ä»¶å¾ªç¯ä¼šæŒ‰ç…§é¡ºåºéå†æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åŒæ­¥çš„ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœpollé˜Ÿåˆ—ä¸ºç©ºï¼Œä¼šæ¥ç€è¿›è¡Œå¦‚ä¸‹çš„åˆ¤æ–­ï¼šâ‘ å¦‚æœå½“å‰ä»£ç å®šä¹‰äº†setImmediateæ–¹æ³•ï¼Œäº‹ä»¶å¾ªç¯ä¼šç¦»å¼€pollé˜¶æ®µï¼Œç„¶åè¿›å…¥checké˜¶æ®µå»æ‰§è¡ŒsetImmediateæ–¹æ³•å®šä¹‰çš„å›è°ƒæ–¹æ³•ã€‚â‘¡å¦‚æœå½“å‰ä»£ç å¹¶æ²¡æœ‰å®šä¹‰setImmediateæ–¹æ³•ï¼Œé‚£ä¹ˆäº‹ä»¶å¾ªç¯å¯èƒ½ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ç­‰å¾…æ–°çš„äº‹ä»¶å‡ºç°ï¼Œè¿™ä¹Ÿæ˜¯è¯¥é˜¶æ®µä¸ºä»€ä¹ˆä¼šè¢«å‘½åä¸ºpollï¼ˆè½®è¯¢ï¼‰çš„åŸå› ã€‚æ­¤å¤–ï¼Œè¿˜ä¼šä¸æ–­æ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„å®šæ—¶å™¨è¶…æ—¶ï¼Œå¦‚æœæœ‰ï¼Œå°±ä¼šè·³è½¬åˆ°timersé˜¶æ®µï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„å›è°ƒã€‚</p><h4 id="check-é˜¶æ®µ"><a href="#check-é˜¶æ®µ" class="headerlink" title="check é˜¶æ®µ"></a>check é˜¶æ®µ</h4><p>setImmediateæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®šæ—¶å™¨æ–¹æ³•ï¼Œå®ƒå æ®äº†äº‹ä»¶å¾ªç¯çš„ä¸€ä¸ªé˜¶æ®µï¼Œæ•´ä¸ªchecké˜¶æ®µå°±æ˜¯ä¸ºsetImmediateæ–¹æ³•è€Œè®¾ç½®çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“äº‹ä»¶å¾ªç¯åˆ°è¾¾pollé˜¶æ®µåï¼Œå°±ä¼šæ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è°ƒç”¨äº†setImmediateï¼Œä½†å¦‚æœä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯è¢«setImmediateæ–¹æ³•è°ƒç”¨çš„ï¼Œäº‹ä»¶å¾ªç¯å°±ä¼šè·³å‡ºpollé˜¶æ®µè€Œè¿›å…¥checké˜¶æ®µã€‚</p><h4 id="close-é˜¶æ®µ"><a href="#close-é˜¶æ®µ" class="headerlink" title="close é˜¶æ®µ"></a>close é˜¶æ®µ</h4><p>å¦‚æœä¸€ä¸ªsocketæˆ–è€…ä¸€ä¸ªå¥æŸ„è¢«å…³é—­ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿä¸€ä¸ªcloseäº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šè¢«åŠ å…¥åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚closeé˜¶æ®µæ‰§è¡Œå®Œæ¯•åï¼Œæœ¬è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œå¾ªç¯è¿›å…¥åˆ°ä¸‹ä¸€è½®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Java-åå‘ä»£ç†çš„æ€è€ƒ</title>
      <link href="/2018/12/18/Java-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E6%80%9D%E8%80%83/"/>
      <url>/2018/12/18/Java-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<h2 id="åŠ¨æ€ä»£ç†ä½¿ç”¨ä»‹ç»"><a href="#åŠ¨æ€ä»£ç†ä½¿ç”¨ä»‹ç»" class="headerlink" title="åŠ¨æ€ä»£ç†ä½¿ç”¨ä»‹ç»"></a>åŠ¨æ€ä»£ç†ä½¿ç”¨ä»‹ç»</h2><p>åŠ¨æ€ä»£ç†ï¼Œåˆ©ç”¨Javaçš„åå°„æŠ€æœ¯ï¼Œåœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°æŸäº›ç»™å®šæ¥å£çš„æ–°ç±»åŠå…¶å®ä¾‹ã€‚ä»£ç†çš„æ˜¯æ¥å£ï¼Œä¸æ˜¯ç±»ï¼Œæ›´ä¸æ˜¯æŠ½è±¡ç±»ã€‚æ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®ç°åŠ¨æ€ä»£ç†</span></span><br><span class="line">        IHello iHello = (IHello) Proxy.newProxyInstance(IHello.class.getClassLoader(), <span class="keyword">new</span> Class[]&#123;IHello.class&#125;, <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"before"</span>);</span><br><span class="line">                Object rs = method.invoke(<span class="keyword">new</span> Hello(), args);</span><br><span class="line">                System.out.println(<span class="string">"after"</span>);</span><br><span class="line">                <span class="keyword">return</span> rs;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        iHello.sayHello();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IHello</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">implements</span> <span class="title">IHello</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// print:</span></span><br><span class="line"><span class="comment">// Hello World</span></span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•ä»‹ç»"><a href="#æ–¹æ³•ä»‹ç»" class="headerlink" title="æ–¹æ³•ä»‹ç»"></a>æ–¹æ³•ä»‹ç»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ¨æ€åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loader å®šä¹‰äº†ç”±å“ªä¸ªClassLoaderå¯¹è±¡æ¥å¯¹ç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¿›è¡ŒåŠ è½½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> interfaces è¡¨ç¤ºçš„æ˜¯æˆ‘å°†è¦ç»™æˆ‘éœ€è¦ä»£ç†çš„å¯¹è±¡æä¾›ä¸€ç»„ä»€ä¹ˆæ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> h è¡¨ç¤ºçš„æ˜¯å½“æˆ‘è¿™ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šå…³è”åˆ°å“ªä¸€ä¸ªInvocationHandlerå¯¹è±¡ä¸Š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ä»£ç†å¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">newProxyInstance</span><span class="params">(ClassLoader loader, Class&lt;?&gt;[] interfaces,  InvocationHandler h)</span>  <span class="keyword">throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">/**</span></span></span><br><span class="line"><span class="function"><span class="comment"> * è°ƒç”¨ä»£ç†æ–¹æ³•</span></span></span><br><span class="line"><span class="function"><span class="comment"> */</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> interface InvocationHandler </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨ä»£ç†æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proxy æŒ‡ä»£æˆ‘ä»¬æ‰€ä»£ç†çš„é‚£ä¸ªçœŸå®å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method æŒ‡ä»£çš„æ˜¯æˆ‘ä»¬æ‰€è¦è°ƒç”¨çœŸå®å¯¹è±¡çš„æ–¹æ³•çš„Methodå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args æŒ‡ä»£çš„æ˜¯è°ƒç”¨çœŸå®å¯¹è±¡æŸä¸ªæ–¹æ³•æ—¶æ¥å—çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›çš„Objectæ˜¯æŒ‡çœŸå®å¯¹è±¡æ–¹æ³•çš„è¿”å›ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Throwable</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AOPçš„åœºæ™¯æ€è€ƒ"><a href="#AOPçš„åœºæ™¯æ€è€ƒ" class="headerlink" title="AOPçš„åœºæ™¯æ€è€ƒ"></a>AOPçš„åœºæ™¯æ€è€ƒ</h2><p>javaä¸­çš„æ³¨è§£ç”¨äºæè¿°ä»£ç è¾…åŠ©ä¿¡æ¯ã€‚æ³¨è§£çš„å¥½å¤„æ˜¯åœ¨ä¸å½±å“ä»£ç é€»è¾‘ï¼Œæ’å…¥ä»£ç æè¿°ä¿¡æ¯ã€‚<br>å¦‚ä½•è®©ä»£ç æ›´å¥½çš„è§£è€¦ï¼Œåº”è¯¥æ˜¯å¾ˆé‡è¦çš„é—®é¢˜ã€‚å°¤å…¶æ˜¯ç°åœ¨ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ç››è¡Œï¼Œå¦‚ä½•è®©ç»„ä»¶ä¹‹é—´å‡å°‘ä¾èµ–å…³ç³»ï¼Œå˜å¾—è¶Šæ¥è¶Šé‡è¦äº†ã€‚ä¸‹é¢è®²è§£ä¸‹ï¼Œæˆ‘æ‰€è®¤ä¸ºçš„ç»„ä»¶é—´é€šè®¯çš„æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸šåŠ¡é€»è¾‘ä¸­ä½¿ç”¨ç™»å½•åŠŸèƒ½</span></span><br><span class="line">Login l = AOPHelper.get(<span class="string">"login"</span>);</span><br><span class="line">l.login();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æ¨¡å—æ¥å£æè¿°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Login</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Interface</span>(<span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æ¨¡å—å®ç°ç±»ï¼Œæ³¨æ„è¿™ä¸ªå®ç°å¯èƒ½æ˜¯åœ¨ç™»å½•ç»„ä»¶ä¸­çš„ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦å°†ä¸šåŠ¡é€»è¾‘å’ŒLoginImplå®ç°ç›´æ¥è€¦åˆåœ¨ä¸€èµ·</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginImpl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Impl</span>(<span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Log.e(<span class="string">"test"</span>, <span class="string">"ç™»å½•æˆåŠŸ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡AOPHelperç±»ï¼Œå°†å®ç°å’Œæ¥å£ä¹‹é—´é€šè¿‡æ³¨è§£çš„æ–¹å¼è¿æ¥èµ·æ¥ã€‚</span></span><br><span class="line"><span class="comment">// é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ—¢åšåˆ°äº†ç»„ä»¶å’Œä¸šåŠ¡çš„è§£è€¦ï¼Œä¹Ÿåšåˆ°äº†å…·ä½“å®ç°çš„è°ƒç”¨è¿æ¥ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AOPHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ”¶é›†æ³¨è§£ä¿¡æ¯ï¼Œç„¶åå°†æ¥å£å’Œå®ç°å…³è”èµ·æ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.cnblogs.com/techyc/p/3455950.html" target="_blank" rel="noopener">https://www.cnblogs.com/techyc/p/3455950.html</a><br><a href="https://zhuanlan.zhihu.com/p/29188162" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/29188162</a></p>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­æ¨¡å—ç®¡ç†ä»‹ç»</title>
      <link href="/2018/12/16/Node-JS%E4%B8%AD%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D/"/>
      <url>/2018/12/16/Node-JS%E4%B8%AD%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="exportsã€module-exportsã€requireçš„ä½¿ç”¨ä»‹ç»"><a href="#exportsã€module-exportsã€requireçš„ä½¿ç”¨ä»‹ç»" class="headerlink" title="exportsã€module.exportsã€requireçš„ä½¿ç”¨ä»‹ç»"></a>exportsã€module.exportsã€requireçš„ä½¿ç”¨ä»‹ç»</h2><p>exportså’Œmodule.exportséƒ½æ˜¯ç”¨æ¥æŒ‡å®šjsæ–‡ä»¶éœ€è¦å¯¼å‡ºçš„å±æ€§å€¼ã€‚æœ¬è´¨ä¸Šï¼Œexportsåªæ˜¯module.exportsçš„å¼•ç”¨ï¼Œè¾…åŠ©åè€…æ·»åŠ å†…å®¹ç”¨çš„ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹æ–¹ç­‰ä»·ï¼Œå› ä¸ºexportsç›¸å½“äºmodule.exportsçš„å¼•ç”¨</span></span><br><span class="line">exports.func1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line"><span class="built_in">module</span>.exports.func1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹æ–¹ä»£ç ä¸ç­‰ä»·ï¼Œå› ä¸ºå¯¹exportsè¿›è¡Œç›´æ¥å¤åˆ¶ï¼Œç›¸å½“äºå°†exportsçš„å†…å­˜æŒ‡å‘æ”¹å˜äº†ã€‚æ‰€ä»¥ä¸å†æ˜¯module.exportsçš„å¼•ç”¨</span></span><br><span class="line">exports = &#123;</span><br><span class="line">func1 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">func1 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>requireæ–¹æ³•æŒ‰ç…§ä¸‹é¢é¡ºåºï¼ŒæŸ¥æ‰¾æ¨¡å—å¹¶å¯¼å‡ºæ¨¡å—å¯¹è±¡ã€‚</p><blockquote><p><strong>ç¼“å­˜æ¨¡å—ï¼š</strong>å¦‚æœXå­˜åœ¨äºå†…å­˜ç¼“å­˜ä¸­ï¼Œåˆ™ç›´æ¥ä»å†…å­˜ç¼“å­˜ä¸­è¯»å–æ–‡ä»¶<br><strong>æ ¸å¿ƒæ¨¡å—ï¼š</strong>å¦‚æœ X æ˜¯å†…ç½®æ¨¡å—ï¼ˆæ¯”å¦‚ require(â€˜httpâ€™ï¼‰)<br>ã€€ã€€1. è¿”å›è¯¥æ¨¡å—<br>ã€€ã€€2. ä¸å†ç»§ç»­æ‰§è¡Œ<br><strong>æ–‡ä»¶æ¨¡å—ï¼š</strong>å¦‚æœ X ä»¥ â€œ./â€œ æˆ–è€… â€œ/â€œ æˆ–è€… â€œ../â€œ å¼€å¤´<br>ã€€ã€€1. æ ¹æ® X æ‰€åœ¨çš„çˆ¶æ¨¡å—ï¼Œç¡®å®š X çš„ç»å¯¹è·¯å¾„<br>ã€€ã€€2. å°† X å½“æˆæ–‡ä»¶ï¼Œä¾æ¬¡æŸ¥æ‰¾ X ï¼Œ X.js ï¼Œ X.jsonï¼Œ X.node ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¿”å›è¯¥æ–‡ä»¶ï¼Œä¸å†ç»§ç»­æ‰§è¡Œ<br>ã€€ã€€3. å°† X å½“æˆç›®å½•ï¼Œä¾æ¬¡æŸ¥æ‰¾ X/package.jsonï¼ˆmainå­—æ®µï¼‰ï¼Œ X/index.jsï¼Œ X/index.jsonï¼Œ X/index.nodeï¼Œ åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¿”å›è¯¥æ–‡ä»¶ï¼Œä¸å†ç»§ç»­æ‰§è¡Œ<br><strong>è‡ªå®šä¹‰æ¨¡å—ï¼š</strong>. å¦‚æœ X ä¸å¸¦è·¯å¾„ï¼Œæ ¹æ® X æ‰€åœ¨çš„çˆ¶æ¨¡å—ï¼Œç¡®å®š X å¯èƒ½çš„å®‰è£…ç›®å½•ã€‚ ä¾æ¬¡åœ¨æ¯ä¸ªç›®å½•ä¸­ï¼Œå°† X å½“æˆæ–‡ä»¶åæˆ–ç›®å½•ååŠ è½½<br><strong>æœªæ‰¾åˆ°æ¨¡å—ï¼š</strong> æŠ›å‡º â€œnot foundâ€</p></blockquote><h2 id="jsä¸­çš„é»˜è®¤å˜é‡"><a href="#jsä¸­çš„é»˜è®¤å˜é‡" class="headerlink" title="jsä¸­çš„é»˜è®¤å˜é‡"></a>jsä¸­çš„é»˜è®¤å˜é‡</h2><ul><li>exportsï¼šå£°æ˜å¯¼å‡ºå¯¹è±¡å±æ€§</li><li>requireï¼šå¯¼å…¥æ¨¡å—æ–¹æ³•</li><li>moduleï¼šæ¨¡å—å¯¹è±¡</li><li>__filenameï¼šjsæ–‡ä»¶å</li><li>__dirnameï¼šjsç›®å½•å</li></ul><p>è¿™äº›é»˜è®¤å±æ€§æ˜¯åœ¨jsç¼–è¯‘æ—¶ï¼Œé€šè¿‡å¯¹jsæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…è®¾ç½®è¿›å»çš„ã€‚å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤´å°¾åŒ…è£…ä¼ªä»£ç </span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">exports, require, module, __filename, __dirname</span>) </span>&#123;\n æ–‡ä»¶å†…å®¹ \n&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// jsæ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">exports.area = <span class="function"><span class="keyword">function</span> (<span class="params">radius</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.PI * radius * radius; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼–è¯‘æ—¶çš„å¤´å°¾åŒ…è£…</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">exports, require, module, __filename, __dirname</span>) </span>&#123; </span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">exports.area = <span class="function"><span class="keyword">function</span> (<span class="params">radius</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.PI * radius * radius; </span><br><span class="line">&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h2 id="jsä¸­çš„åŒ…ç»“æ„"><a href="#jsä¸­çš„åŒ…ç»“æ„" class="headerlink" title="jsä¸­çš„åŒ…ç»“æ„"></a>jsä¸­çš„åŒ…ç»“æ„</h2><ul><li>package.jsonï¼šåŒ…æè¿°æ–‡ä»¶</li><li>binï¼šå­˜æ”¾å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•</li><li>libï¼šå­˜æ”¾jsä»£ç çš„ç›®å½•</li><li>docï¼šå­˜æ”¾æ–‡æ¡£çš„ç›®å½•</li><li>testï¼šå­˜æ”¾å•å…ƒæµ‹è¯•ç”¨ä¾‹ä»£ç çš„ç›®å½•</li></ul><p>åŒ…æè¿°ä¿¡æ¯ä»‹ç»<br>package.jsonä½äºåŒ…çš„æ ¹ç›®å½•ï¼Œæ˜¯å¯¹äºåŒ…çš„æè¿°ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ã€‚å­—æ®µè§„èŒƒå¦‚ä¸‹ï¼š</p><table><thead><tr><th>key</th><th>æè¿°</th></tr></thead><tbody><tr><td>name</td><td>å</td></tr><tr><td>description</td><td>ç®€ä»‹</td></tr><tr><td>version</td><td>ç‰ˆæœ¬å·</td></tr><tr><td>keywords</td><td>å…³é”®è¯æ•°ç»„</td></tr><tr><td>maintainers</td><td>ç»´æŠ¤è€…åˆ—è¡¨</td></tr><tr><td>contributors</td><td>è´¡çŒ®è€…åˆ—è¡¨</td></tr><tr><td>bugs</td><td>å¯ä»¥åé¦ˆbugçš„ç½‘é¡µæˆ–é‚®ç®±åœ°å€</td></tr><tr><td>licenses</td><td>è®¸å¯è¯åˆ—è¡¨</td></tr><tr><td>respositories</td><td>æ‰˜ç®¡æºç çš„ä½ç½®åˆ—è¡¨</td></tr><tr><td>dependencies</td><td>ä¾èµ–é¡¹åˆ—è¡¨</td></tr><tr><td>homepage</td><td>ç½‘ç«™åœ°å€</td></tr><tr><td>os</td><td>æ“ä½œç³»ç»Ÿæ”¯æŒåˆ—è¡¨</td></tr><tr><td>cpu</td><td>CPUæ¶æ„æ”¯æŒåˆ—è¡¨</td></tr><tr><td>engine</td><td>æ”¯æŒçš„JSå¼•æ“åˆ—è¡¨</td></tr><tr><td>builten</td><td>æ˜¯å¦å†…å»ºåœ¨åº•å±‚ç³»ç»Ÿçš„æ ‡å‡†ç»„ä»¶</td></tr><tr><td>directories</td><td>ç›®å½•è¯´æ˜</td></tr><tr><td>implements</td><td>å®ç°è§„èŒƒçš„åˆ—è¡¨</td></tr><tr><td>scripts</td><td>è„šæœ¬è¯´æ˜å¯¹è±¡</td></tr><tr><td>authoer</td><td>ä½œè€…</td></tr><tr><td>bin</td><td>é…ç½®ä¸ºå‘½ä»¤è¡Œå·¥å…·</td></tr><tr><td>main</td><td>å…¥å£æ–‡ä»¶</td></tr><tr><td>devDependencies</td><td>å¼€å‘ä¾èµ–é¡¹åˆ—è¡¨</td></tr></tbody></table><h2 id="npmå‘½ä»¤"><a href="#npmå‘½ä»¤" class="headerlink" title="npmå‘½ä»¤"></a>npmå‘½ä»¤</h2><table><thead><tr><th>å‘½ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>$ npm</td><td>æŸ¥çœ‹NPMå¸®åŠ©è¯´æ˜</td></tr><tr><td>$ npm -v</td><td>æŸ¥çœ‹å½“å‰NPMç‰ˆæœ¬</td></tr><tr><td>$ npm init</td><td>åˆå§‹åŒ–åŒ…(é…ç½®package.json)</td></tr><tr><td>$ npm <command></td><td>æŸ¥çœ‹å…·ä½“å‘½ä»¤å¸®åŠ©è¯´æ˜</td></tr><tr><td>$ npm install <package></package></td><td>å®‰è£…ç¬¬ä¸‰æ–¹åŒ…</td></tr><tr><td>$ npm uninstall <package></package></td><td>å¸è½½åŒ…</td></tr><tr><td>$ npm install <package> â€“save-dev</package></td><td>å®‰è£…åŒ…å¹¶å°†å®‰è£…ä¿¡æ¯å†™å…¥package.json(devDependencies)</td></tr><tr><td>$ npm install <package> â€“dev</package></td><td>å®‰è£…ç¬¬åŒ…å¹¶å°†å®‰è£…ä¿¡æ¯å†™å…¥package.json(dependencies)</td></tr><tr><td>$ npm install <package> -g</package></td><td>å…¨å±€å®‰è£…ç¬¬ä¸‰æ–¹åŒ…</td></tr><tr><td>$ npm install <file-url></file-url></td><td>å®‰è£…æœ¬åœ°åŒ…</td></tr><tr><td>$ npm adduser</td><td>æ³¨å†Œnpmè´¦å·</td></tr><tr><td>$ npm publish <folder></folder></td><td>ä¸Šä¼ åŒ…</td></tr><tr><td>$ npm owner ls <package-name></package-name></td><td>æŸ¥çœ‹åŒ…æ‹¥æœ‰è€…</td></tr><tr><td>$ npm owner add <user> <package-name></package-name></user></td><td>æ·»åŠ åŒ…æ‹¥æœ‰è€…</td></tr><tr><td>$ npm owner rm <user> <package-name></package-name></user></td><td>åˆ é™¤åŒ…æ‹¥æœ‰è€…</td></tr><tr><td>$ npm ls</td><td>åˆ†æåŒ…</td></tr></tbody></table><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="http://www.ruanyifeng.com/blog/2015/05/require.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/05/require.html</a><br><a href="https://blog.csdn.net/q1056843325/article/details/54948719" target="_blank" rel="noopener">https://blog.csdn.net/q1056843325/article/details/54948719</a></p>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­å£°æ˜å±æ€§å’Œæ–¹æ³•</title>
      <link href="/2018/12/09/Node-JS%E4%B8%AD%E5%A3%B0%E6%98%8E%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95/"/>
      <url>/2018/12/09/Node-JS%E4%B8%AD%E5%A3%B0%E6%98%8E%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å£°æ˜ç±»"><a href="#å£°æ˜ç±»" class="headerlink" title="å£°æ˜ç±»"></a>å£°æ˜ç±»</h1><p>es6ä¸­çš„classå…³é”®å­—ï¼Œå…¶å®åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹åŸå‹é“¾çš„ä¸€ä¸ªå°è£…ã€‚</p><h1 id="å£°æ˜å±æ€§"><a href="#å£°æ˜å±æ€§" class="headerlink" title="å£°æ˜å±æ€§"></a>å£°æ˜å±æ€§</h1><p>æˆªæ­¢es6ï¼Œå£°æ˜å±æ€§çš„æœ€ä½³å®è·µå¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// å£°æ˜ç±»</span><br><span class="line">class Clazz &#123;</span><br><span class="line">  constructor()&#123;</span><br><span class="line">    // å»ºè®®å°†é™æ€å±æ€§å’Œå¯¹è±¡å±æ€§çš„å£°æ˜çš„åˆå§‹åŒ–éƒ½æ”¾åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œ</span><br><span class="line">    // å£°æ˜å¯¹è±¡å±æ€§</span><br><span class="line">    this.field = &quot;å¯¹è±¡å±æ€§&quot;;</span><br><span class="line">    // å£°æ˜é™æ€å±æ€§</span><br><span class="line">    Test.sField = &quot;é™æ€å±æ€§&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ¬è´¨è¯´æ˜"><a href="#æœ¬è´¨è¯´æ˜" class="headerlink" title="æœ¬è´¨è¯´æ˜"></a>æœ¬è´¨è¯´æ˜</h3><ul><li>é™æ€å±æ€§çš„æœ¬è´¨å°±æ˜¯åœ¨ç±»ä¸ŠæŒ‚åœ¨å¯¹è±¡ï¼Œè€Œç±»æœ¬è´¨ä¸Šå°±æ˜¯æ„é€ å‡½æ•°functionï¼Œæ‰€ä»¥é™æ€å±æ€§å°±æ˜¯ç›´æ¥åœ¨æ„é€ å‡½æ•°ä¸ŠæŒ‚åœ¨å¯¹è±¡ã€‚</li><li>å¯¹è±¡å±æ€§çš„æœ¬è´¨å°±æ˜¯åœ¨å¯¹è±¡ä¸ŠæŒ‚åœ¨å¯¹è±¡ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å®ç°å¯¹è±¡å±æ€§çš„æ•ˆæœ</span><br><span class="line">let clazz = new Clazz();</span><br><span class="line">clazz.field =  &quot;å¯¹è±¡å±æ€§â€œ;</span><br><span class="line"></span><br><span class="line">// å®ç°é™æ€å±æ€§çš„æ•ˆæœ</span><br><span class="line">Clazz.sField = &quot;é™æ€å±æ€§&quot;;</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜æ–¹æ³•"><a href="#å£°æ˜æ–¹æ³•" class="headerlink" title="å£°æ˜æ–¹æ³•"></a>å£°æ˜æ–¹æ³•</h2><p>æˆªæ­¢es6ï¼Œå£°æ˜æ–¹æ³•çš„æœ€ä½³å®è·µå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// å£°æ˜ç±»</span><br><span class="line">class Clazz &#123;</span><br><span class="line">  </span><br><span class="line">  func()&#123;</span><br><span class="line">    console.log(&quot;å£°æ˜å¯¹è±¡æ–¹æ³•&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  static sFunc()&#123;</span><br><span class="line">    console.log(&quot;å£°æ˜é™æ€æ–¹æ³•&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨å¯¹è±¡æ–¹æ³•</span><br><span class="line">let clazz = new Clazz();</span><br><span class="line">clazz.func();</span><br><span class="line">// è°ƒç”¨é™æ€æ–¹æ³•</span><br><span class="line">Clazz.sFunc();</span><br></pre></td></tr></table></figure><h3 id="æœ¬è´¨è¯´æ˜-1"><a href="#æœ¬è´¨è¯´æ˜-1" class="headerlink" title="æœ¬è´¨è¯´æ˜"></a>æœ¬è´¨è¯´æ˜</h3><ul><li>é™æ€æ–¹æ³•æœ¬è´¨å’Œé™æ€å±æ€§ç±»ä¼¼ï¼Œå°±æ˜¯åœ¨æ„é€ å‡½æ•°ä¸ŠæŒ‚åœ¨æ–¹æ³•ã€‚</li><li>å¯¹è±¡æ–¹æ³•æœ¬è´¨æ˜¯åœ¨æ„é€ å‡½æ•°çš„åŸå‹é“¾ä¸ŠæŒ‚åœ¨å¯¹è±¡ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// å£°æ˜ç±»</span><br><span class="line">class Clazz &#123;</span><br><span class="line">  </span><br><span class="line">  func()&#123;</span><br><span class="line">    console.log(&quot;å£°æ˜å¯¹è±¡æ–¹æ³•&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  static sFunc()&#123;</span><br><span class="line">    console.log(&quot;å£°æ˜é™æ€æ–¹æ³•&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç­‰ä»·äº</span><br><span class="line">function Clazz()&#123;&#125;</span><br><span class="line"></span><br><span class="line">Clazz.prototype.func = &#123;</span><br><span class="line">  console.log(&quot;å£°æ˜å¯¹è±¡æ–¹æ³•&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Clazz.sFunc = &#123;</span><br><span class="line">  console.log(&quot;å£°æ˜é™æ€æ–¹æ³•&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­Promiseçš„ç†è§£</title>
      <link href="/2018/11/25/Node-JS%E4%B8%ADPromise%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2018/11/25/Node-JS%E4%B8%ADPromise%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Promiseç®€ä»‹"><a href="#Promiseç®€ä»‹" class="headerlink" title="Promiseç®€ä»‹"></a>Promiseç®€ä»‹</h1><p>Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶çš„ç»“æœã€‚å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚</p><ul><li>Promiseå¯¹è±¡æœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€resolveï¼ˆå·²æˆåŠŸï¼‰å’Œrejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚</li><li>Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»pendingå˜ä¸ºresolveå’Œä»pendingå˜ä¸ºrejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚</li><li>Promiseå¯¹è±¡çš„å›è°ƒï¼Œå¯ä»¥æš‚å­˜çŠ¶æ€ã€‚å³ï¼Œå¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹Promiseå¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚</li></ul><h1 id="PromiseåŸºæœ¬ä½¿ç”¨"><a href="#PromiseåŸºæœ¬ä½¿ç”¨" class="headerlink" title="PromiseåŸºæœ¬ä½¿ç”¨"></a>PromiseåŸºæœ¬ä½¿ç”¨</h1><h3 id="åŸºç¡€è¯­æ³•ä»‹ç»"><a href="#åŸºç¡€è¯­æ³•ä»‹ç»" class="headerlink" title="åŸºç¡€è¯­æ³•ä»‹ç»"></a>åŸºç¡€è¯­æ³•ä»‹ç»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚setTimeoutæ–¹æ³•</span></span><br><span class="line">  <span class="comment">// ä½†å½“å‰ä½ç½®ä»£ç è¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ“ä½œçš„</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'do something'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Date</span>.now() % <span class="number">2</span> === <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="comment">// æˆåŠŸå›è°ƒ</span></span><br><span class="line">    resolve(<span class="string">'success value'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤±è´¥å›è°ƒ</span></span><br><span class="line">    reject(<span class="string">'failed value'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ“ä½œ</span></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æˆåŠŸå›è°ƒ</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¤±è´¥å›è°ƒï¼Œæ˜¯å¯é€‰çš„</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="Promiseä»£ç æ‰§è¡Œé¡ºåº"><a href="#Promiseä»£ç æ‰§è¡Œé¡ºåº" class="headerlink" title="Promiseä»£ç æ‰§è¡Œé¡ºåº"></a>Promiseä»£ç æ‰§è¡Œé¡ºåº</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// new Promise() æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨æ„é€ å‡½æ•°çš„æ“ä½œ</span></span><br><span class="line">  <span class="comment">// å› æ­¤ï¼Œä¸‹é¢ä»£ç ä¼šåœ¨å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå°±è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒç”¨resolvedå‡½æ•°ï¼Œå°†Promiseä¸­çš„resolved</span></span><br><span class="line">  <span class="comment">// çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œå¾…thenæ—¶å‡ºå‘resolvedçŠ¶æ€</span></span><br><span class="line">  resolved();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="comment">// å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'resolved.'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰è„šæœ¬çš„åŒæ­¥æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hi!'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°å†…å®¹</span></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// resolved</span></span><br></pre></td></tr></table></figure><h3 id="Promiseè¿”å›ä¸€ä¸ªPromiseç»“æœ"><a href="#Promiseè¿”å›ä¸€ä¸ªPromiseç»“æœ" class="headerlink" title="Promiseè¿”å›ä¸€ä¸ªPromiseç»“æœ"></a>Promiseè¿”å›ä¸€ä¸ªPromiseç»“æœ</h3><p>p1å’Œp2éƒ½æ˜¯ Promise çš„å®ä¾‹ï¼Œä½†æ˜¯p2çš„resolveæ–¹æ³•å°†p1ä½œä¸ºå‚æ•°ï¼Œå³ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ˜¯è¿”å›å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p><p>è¿™æ—¶p1çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™p2ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œp1çš„çŠ¶æ€å†³å®šäº†p2çš„çŠ¶æ€ã€‚å¦‚æœp1çš„çŠ¶æ€æ˜¯pendingï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…p1çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœp1çš„çŠ¶æ€å·²ç»æ˜¯resolvedæˆ–è€…rejectedï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ p1æ—¶ï¼Œå¼€å§‹3sè®¡æ—¶æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'fail'</span>)), <span class="number">3000</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ p1æ—¶ï¼Œå¼€å§‹1sè®¡æ—¶æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1såï¼Œå°†p1ç»“æœä¿å­˜ä¸‹æ¥</span></span><br><span class="line">  <span class="comment">// ç”±äºp1æ˜¯Promiseå¯¹è±¡ï¼Œå› æ­¤p1å½“å‰çš„çŠ¶æ€ç¡®å®šäº†p2çš„çŠ¶æ€ï¼Œå½“å‰ä¸ºpendingçŠ¶æ€</span></span><br><span class="line">  <span class="comment">// 2såï¼Œp1è¿”å›rejectçŠ¶æ€ï¼Œäºæ˜¯p2ä¹Ÿè¿”å›äº†rejectçŠ¶æ€</span></span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(p1), <span class="number">1000</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p2.then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br><span class="line">  .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°å†…å®¹</span></span><br><span class="line"><span class="comment">// Error: fail</span></span><br></pre></td></tr></table></figure><h1 id="Promiseç‰¹æ€§ä»‹ç»"><a href="#Promiseç‰¹æ€§ä»‹ç»" class="headerlink" title="Promiseç‰¹æ€§ä»‹ç»"></a>Promiseç‰¹æ€§ä»‹ç»</h1><h3 id="Promise-prototype-then-ä»‹ç»"><a href="#Promise-prototype-then-ä»‹ç»" class="headerlink" title="Promise.prototype.then()ä»‹ç»"></a>Promise.prototype.then()ä»‹ç»</h3><p>thenè¿”å›çš„ä½œç”¨æ˜¯ä¸º Promise å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p><ul><li>thenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯resolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</li><li>thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// thenå‡½æ•°ï¼Œå°†è¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ„é€ Promiseå¯¹è±¡</span></span><br><span class="line">  resolved(<span class="string">'first'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'second'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// ç›¸å½“äº Promise.reject('third');</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="string">'third'</span></span><br><span class="line">&#125;).then(<span class="literal">null</span>, () =&gt; &#123;</span><br><span class="line">  <span class="comment">// ç›¸å½“äº Promise.resolved('fourth');</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'fourth'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="Promise-prototype-catch-ä»‹ç»"><a href="#Promise-prototype-catch-ä»‹ç»" class="headerlink" title="Promise.prototype.catch()ä»‹ç»"></a>Promise.prototype.catch()ä»‹ç»</h3><ul><li>Promise.prototype.catchæ–¹æ³•æ˜¯Promise.prototype.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚</li><li>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ªcatchè¯­å¥æ•è·ã€‚</li></ul><p>ä¸€èˆ¬åœ¨ä½¿ç”¨promiseæ—¶ï¼Œæœ€å¥½åœ¨åé¢æ·»åŠ catchæ“ä½œã€‚ç”¨catchæ¥æ›¿ä»£then(resolved, reject)çš„å¤„ç†èŒƒå¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨è</span></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èï¼Œåœ¨promiseæœ€åç»Ÿä¸€å¤„ç†erroræƒ…å†µ</span></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123; <span class="comment">//cb</span></span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="Promise-prototype-finally-ä»‹ç»"><a href="#Promise-prototype-finally-ä»‹ç»" class="headerlink" title="Promise.prototype.finally()ä»‹ç»"></a>Promise.prototype.finally()ä»‹ç»</h3><ul><li>finallyæ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚</li><li>finallyæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå› æ­¤æ²¡æœ‰åŠæ³•çŸ¥é“å‰é¢ Promise çŠ¶æ€åˆ°åº•æ˜¯resolvedè¿˜æ˜¯rejectedã€‚</li></ul><p>finallyæ–¹æ³•çš„æœ¬è´¨å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">promise</span><br><span class="line">.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¯­å¥</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">promise</span><br><span class="line">.then(</span><br><span class="line">  result =&gt; &#123;</span><br><span class="line">    <span class="comment">// è¯­å¥</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="comment">// è¯­å¥</span></span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="å¸¸ç”¨é™æ€æ–¹æ³•"><a href="#å¸¸ç”¨é™æ€æ–¹æ³•" class="headerlink" title="å¸¸ç”¨é™æ€æ–¹æ³•"></a>å¸¸ç”¨é™æ€æ–¹æ³•</h1><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p>Promise.allæ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.all([p1, p2, p3]);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise.allæ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1ã€p2ã€p3éƒ½æ˜¯ Promise å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚</p><p>pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</p><ul><li>åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</li><li>åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</li></ul><h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p>Promise.raceæ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.race([p1, p2, p3]);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise.allæ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1ã€p2ã€p3éƒ½æ˜¯ Promise å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚</p><p>pçš„çŠ¶æ€ç”±ä»¥ä¸‹æ¡ä»¶å†³å®šã€‚</p><ul><li>åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</li></ul><h3 id="Promise-resolve-amp-Promise-reject"><a href="#Promise-resolve-amp-Promise-reject" class="headerlink" title="Promise.resolve() &amp; Promise.reject()"></a>Promise.resolve() &amp; Promise.reject()</h3><p>Promise.resolve()çš„æœ¬è´¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(p);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve = <span class="function"><span class="keyword">function</span>(<span class="params">p</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="comment">/** p ä¸º Promiseå®ä¾‹ **/</span>) &#123;</span><br><span class="line"><span class="comment">// ç›´æ¥è¿”å›Promiseå®ä¾‹</span></span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="comment">/** p ä¸­å­˜åœ¨æœ‰thenableå±æ€§ **/</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, reject</span>) </span>&#123;</span><br><span class="line">resolved(p.thenable());</span><br><span class="line">&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="comment">/** p å­˜åœ¨ **/</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, reject</span>) </span>&#123;</span><br><span class="line">resolved(p);</span><br><span class="line">&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">/** p ä¸å­˜åœ¨ **/</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, reject</span>) </span>&#123;</span><br><span class="line">resolved();</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Promise.reject()çš„æœ¬è´¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.reject(<span class="string">'å‡ºé”™äº†'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject(<span class="string">'å‡ºé”™äº†'</span>))</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="http://es6.ruanyifeng.com/#docs/promise#Promise-prototype-then" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/promise#Promise-prototype-then</a></p>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Node-JSä¸­åŸå‹çš„ç†è§£</title>
      <link href="/2018/11/10/Node-JS%E4%B8%AD%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2018/11/10/Node-JS%E4%B8%AD%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="prototypeä¸-proto-çš„åŒºåˆ«"><a href="#prototypeä¸-proto-çš„åŒºåˆ«" class="headerlink" title="prototypeä¸__proto__çš„åŒºåˆ«"></a>prototypeä¸__proto__çš„åŒºåˆ«</h1><h3 id="æ¦‚å¿µä»‹ç»"><a href="#æ¦‚å¿µä»‹ç»" class="headerlink" title="æ¦‚å¿µä»‹ç»"></a>æ¦‚å¿µä»‹ç»</h3><ol><li>æ‰€æœ‰å¯¹è±¡éƒ½å…·æœ‰__proto__å±æ€§ã€‚åœ¨JSä¸­ï¼Œä¸€åˆ‡çš†å¯¹è±¡ã€‚æ–¹æ³•ï¼ˆFunctionï¼‰æ˜¯å¯¹è±¡ï¼Œæ–¹æ³•çš„åŸå‹(Function.prototype)ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å®ƒä»¬éƒ½æœ‰__proto__å±æ€§ã€‚</li><li>æ–¹æ³•(Function)æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒé™¤äº†æœ‰__proto__å±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰è‡ªå·±ç‰¹æœ‰çš„prototypeå±æ€§ã€‚prototypeå±æ€§æŒ‡å‘ä¸€ä¸ªæ‰€æœ‰å®ä¾‹å…±äº«çš„åŸå‹å¯¹è±¡ã€‚åŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å›åˆ°åŸå‡½æ•°ã€‚</li><li>å¯¹è±¡çš„__proto__å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ï¼Œè¿™ä¿è¯äº†å¯¹è±¡èƒ½å¤Ÿè®¿é—®æ„é€ å‡½æ•°çš„prototypeå±æ€§ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ã€‚</li></ol><h3 id="ä¸¾ä¾‹åˆ†æ"><a href="#ä¸¾ä¾‹åˆ†æ" class="headerlink" title="ä¸¾ä¾‹åˆ†æ"></a>ä¸¾ä¾‹åˆ†æ</h3><p><img src="/image/js_prototype.jpg" alt="åŸå‹é“¾å›¾"></p><ol><li>æ„é€ å‡½æ•°ï¼ˆFoo()ï¼‰<ul><li>æ„é€ å‡½æ•°çš„Foo.prototypeå±æ€§æŒ‡å‘äº†åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡é‡Œæœ‰å…±æœ‰æ–¹æ³•ï¼Œæ‰€æœ‰æ„é€ å‡½æ•°å£°æ˜çš„å®ä¾‹ï¼ˆf1ï¼Œf2ï¼‰éƒ½å¯ä»¥å…±äº«è¿™äº›å…±ç”¨æ–¹æ³•ã€‚</li><li>æ„é€ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿæœ‰__proto__å±æ€§ã€‚æŒ‡å‘è°å‘¢ï¼ŸæŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡å‘—ã€‚å‡½æ•°çš„æ„é€ å‡½æ•°ä¸å°±æ˜¯Functionå˜›ï¼Œå› æ­¤è¿™é‡Œçš„__proto__æŒ‡å‘äº†Function.prototypeã€‚</li></ul></li><li>åŸå‹å¯¹è±¡ï¼ˆFoo.prototypeï¼‰<ul><li>åŸå‹å¯¹è±¡Foo.prototypeä¿å­˜ç€å®ä¾‹å…±äº«çš„æ–¹æ³•ï¼Œè¿˜æœ‰å±æ€§constructoræŒ‡å›æ„é€ å‡½æ•°ã€‚</li></ul></li><li>å®ä¾‹ï¼ˆf1ï¼Œf2ï¼‰<ul><li>f1ï¼Œf2æ˜¯Fooçš„ä¸¤ä¸ªå®ä¾‹ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æœ‰å±æ€§__proto__ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è®¿é—®åŸå‹å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•å•¦ã€‚</li></ul></li></ol><p><strong>æ€»ç»“</strong></p><ol><li>å¯¹è±¡æœ‰å±æ€§__proto__ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</li><li>æ–¹æ³•é™¤äº†æœ‰å±æ€§__proto__,è¿˜æœ‰å±æ€§prototypeï¼ŒprototypeæŒ‡å‘è¯¥æ–¹æ³•çš„åŸå‹å¯¹è±¡ã€‚</li></ol><h1 id="newæ“ä½œåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#newæ“ä½œåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="newæ“ä½œåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ"></a>newæ“ä½œåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Base();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¬è´¨ä¸Šç­‰ä»·äº</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡obj</span></span><br><span class="line"><span class="keyword">let</span> obj  = &#123;&#125;; </span><br><span class="line"><span class="comment">// æˆ‘ä»¬å°†è¿™ä¸ªç©ºå¯¹è±¡çš„__proto__æˆå‘˜æŒ‡å‘äº†Baseå‡½æ•°å¯¹è±¡prototypeæˆå‘˜å¯¹è±¡</span></span><br><span class="line">obj.__proto__ = Base.prototype;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬å°†Baseå‡½æ•°å¯¹è±¡çš„thisæŒ‡é’ˆæ›¿æ¢æˆobjï¼Œå¹¶è°ƒç”¨Baseæ–¹æ³•å¯¹objè¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">Base.call(obj);</span><br></pre></td></tr></table></figure><h1 id="ä¸ºå•¥constructoræŒ‡å‘ä¼šé”™ä¹±"><a href="#ä¸ºå•¥constructoræŒ‡å‘ä¼šé”™ä¹±" class="headerlink" title="ä¸ºå•¥constructoræŒ‡å‘ä¼šé”™ä¹±?"></a>ä¸ºå•¥constructoræŒ‡å‘ä¼šé”™ä¹±?</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> F();</span><br><span class="line">F.prototype = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> F()</span><br><span class="line"><span class="built_in">console</span>.log(p1.constructor)<span class="comment">//F</span></span><br><span class="line"><span class="built_in">console</span>.log(p2.constructor)<span class="comment">//Object</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆä½ è¦æ˜ç™½ï¼ŒF.prototype æ˜¯å¯¹ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡åœ¨ä½ åˆ›å»ºå‡½æ•° F( ) çš„æ—¶å€™åŒæ—¶è¢«ç”Ÿæˆï¼Œå¦‚æœæˆ‘ä»¬ç»™è¿™ä¸ªå¯¹è±¡èµ·ä¸ªåå­—å«åš Aï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šA æ˜¯ä¸€ä¸ªè¢«å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè€Œ F.prototype æ˜¯æŒ‡å‘ A çš„ä¸€ä¸ªæŒ‡é’ˆã€‚</p><p>åŒæ—¶ï¼ŒA å¯¹è±¡å†…ä¹Ÿæœ‰ä¸€ä¸ªæŒ‡é’ˆ constructor ï¼Œå®ƒæŒ‡å‘äº†å‡½æ•° F()ã€‚</p><p>é‚£ä¹ˆå½“ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ new F( ) æ—¶ï¼Œç”Ÿæˆäº†ä¸€ä¸ªæ–°å¯¹è±¡ a ï¼Œp1 æ˜¯å¯¹è±¡ a çš„ä¸€ä¸ªå¼•ç”¨ï¼ˆå³pæ˜¯æŒ‡å‘açš„ä¸€ä¸ªæŒ‡é’ˆï¼‰ï¼Œè€Œ a çš„ __proto__ å±æ€§åœ¨æ­¤æ—¶ä¹Ÿå·²ç»è¢«æŒ‡å‘ä¸º Aã€‚</p><p>å³ç›®å‰ï¼ŒæŒ‡å‘å¯¹è±¡å®ä¾‹ A çš„æŒ‡é’ˆæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ a.__proto__ å’Œ F.prototypeã€‚</p><p>ä¹‹åä½ å¯¹ F.prototype è¿›è¡Œèµ‹å€¼æ—¶ï¼Œå®é™…ä¸Šæ”¹å˜äº† F.prototype çš„æŒ‡å‘ï¼Œè¯•ä»–æŒ‡å‘äº†å¦ä¸€ä¸ªä¸ªå®ä¾‹å¯¹è±¡{}ï¼Œæˆ‘ä»¬ç®¡è¿™ä¸ªå®ä¾‹å¯¹è±¡å« B å¥½äº†ï¼Œå¯¹äºè¿™ä¸ªå®ä¾‹å¯¹è±¡ Bï¼Œå®ƒçš„ constructor çš„å±æ€§æŒ‡å‘äº† Objectã€‚</p><p>è¯·æ³¨æ„ï¼Œæ­¤æ—¶ a çš„ __proto__ çš„æŒ‡å‘å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä»æ˜¯æŒ‡å‘äº†å®ä¾‹å¯¹è±¡Aã€‚</p><p>é‚£ä¹ˆå½“ä½ ç¬¬äºŒæ¬¡è°ƒç”¨ new F( ) çš„æ—¶å€™ï¼Œå®é™…ä¸Šç”Ÿæˆäº†å¦ä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡ b, b çš„ __proto__ å±æ€§æŒ‡å‘çš„æ˜¯Bã€‚</p><p>æ‰€ä»¥åœ¨ p1.constructor çš„èƒŒåå…¶å®æ˜¯ç›¸å½“äº:<br>p1 -&gt; a, a.__proto__ -&gt; A, A.constructor -&gt; F( )</p><p>è€Œåœ¨ p2.constructor çš„èƒŒååˆ™ä¸ºï¼š<br>p2 -&gt; b, b.__proto__ -&gt; B, B.constructor -&gt; Object( )</p><p><img src="/image/js_construct.png" alt="ConstructæŒ‡å‘å›¾"></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://segmentfault.com/q/1010000006918070" target="_blank" rel="noopener">https://segmentfault.com/q/1010000006918070</a></li><li><a href="https://www.zhihu.com/question/34183746" target="_blank" rel="noopener">https://www.zhihu.com/question/34183746</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åå° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç½‘ç»œ-å¯¹äºã€ŠSocketå¿ƒè·³åŒ…ã€‹çš„æ€è€ƒ</title>
      <link href="/2018/11/04/%E7%BD%91%E7%BB%9C-%E5%AF%B9%E4%BA%8E%E3%80%8ASocket%E5%BF%83%E8%B7%B3%E5%8C%85%E3%80%8B%E7%9A%84%E6%80%9D%E8%80%83/"/>
      <url>/2018/11/04/%E7%BD%91%E7%BB%9C-%E5%AF%B9%E4%BA%8E%E3%80%8ASocket%E5%BF%83%E8%B7%B3%E5%8C%85%E3%80%8B%E7%9A%84%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆéœ€è¦Socketå¿ƒè·³åŒ…"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Socketå¿ƒè·³åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Socketå¿ƒè·³åŒ…"></a>ä¸ºä»€ä¹ˆéœ€è¦Socketå¿ƒè·³åŒ…</h2><p>å®ç°æ–¹å¼ä¸Šï¼ŒTCP keepalive å’ŒSocketå¿ƒè·³åŒ…æœºåˆ¶ç±»ä¼¼ã€‚TCP keepalive æœºåˆ¶é€šè¿‡ï¼Œåœ¨è¿›è¡ŒTCPè¿æ¥æ—¶ï¼Œå‘é€keepaliveæ•°æ®åŒ…ï¼Œæ¥åˆ¤æ–­å½“å‰TCPè¿æ¥æ˜¯å¦ä»ç„¶æœ‰æ•ˆã€‚é—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶å·²ç»æœ‰äº†TCP keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦Socketå¿ƒè·³æœºåˆ¶å‘¢ï¼Ÿ</p><p>ä¸ªäººè®¤ä¸ºï¼Œéœ€è¦Socketå¿ƒè·³æœºåˆ¶çš„åŸå› å¦‚ä¸‹ï¼š</p><ol><li>çœŸå®ç½‘è·¯ç¯å¢ƒä¸­ï¼ŒTCP keepaliveæ¶ˆæ¯ï¼Œå¯èƒ½ä¼šè¢«ä¸­ç»§è®¾å¤‡å’Œè·¯ç”±è®¾å¤‡ç»ˆç»“ã€‚</li><li>è‡ªå·±å®ç°Socketå¿ƒè·³æœºåˆ¶ï¼Œå¤„ç†æ–­çº¿é‡è¿çš„çµæ´»æ€§æ›´é«˜ã€‚</li><li>TCP keepaliveæœ¬èº«æ˜¯OSIæ¨¡å‹ä¸­çš„ä¼ è¾“å±‚å¤„ç†é€»è¾‘ï¼Œç”±æ“ä½œç³»ç»Ÿè´Ÿè´£æ¢æŸ¥ï¼Œå³ä¾¿æœåŠ¡è¿›ç¨‹æ­»é”æˆ–é˜»å¡ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¼šå¦‚å¸¸å¤„ç†TCP keepaliveæ¶ˆæ¯ï¼Œå› æ­¤TCP keepaliveçš„ç›®æ ‡æ˜¯ä¿è¯ä¼ è¾“å±‚çš„ç½‘è·¯é€šç•…ã€‚è€ŒSocketå¿ƒè·³æœºåˆ¶ï¼Œæ˜¯OSIæ¨¡å‹ä¸­çš„åº”ç”¨å±‚å¤„ç†é€»è¾‘ï¼Œç”±æœåŠ¡ç¨‹åºè´Ÿè´£æ¢æŸ¥ï¼Œä¸ä½†èƒ½ä¿è¯åº”ç”¨ç¨‹åºå­˜æ´»ï¼Œç½‘ç»œé€šç•…ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¤Ÿä¿è¯åº”ç”¨ç¨‹åºä»åœ¨æ­£å¸¸å·¥ä½œã€‚</li></ol><h2 id="é€šè®¯æ–¹å¼"><a href="#é€šè®¯æ–¹å¼" class="headerlink" title="é€šè®¯æ–¹å¼"></a>é€šè®¯æ–¹å¼</h2><ul><li>å•å·¥ï¼šåªå…è®¸ç”²æ–¹å‘ä¹™æ–¹ä¼ é€ä¿¡æ¯ï¼Œè€Œä¹™æ–¹ä¸èƒ½å‘ç”²æ–¹ä¼ é€ï¼Œä¾‹å¦‚æ±½è½¦çš„å•è¡Œé“ã€‚</li><li>å…¨åŒå·¥ï¼šå…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠåŒæ—¶è¿›è¡Œä¼ é€æ“ä½œï¼Œä¾‹å¦‚æ±½è½¦çš„åŒè¡Œé“ã€‚</li><li>åŠåŒå·¥ï¼šå…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šè¿›è¡Œä¼ é€æ“ä½œï¼Œä½†æ˜¯ä¸¤ç«¯ä¸èƒ½åŒæ—¶ä¼ é€ã€‚ä¾‹å¦‚ä¸€æ¡çª„çª„çš„é©¬è·¯ï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€è¾†è½¦é€šè¿‡ï¼Œå½“ç›®å‰æœ‰ä¸¤è¾†è½¦å¯¹å¼€ï¼Œè¿™ç§æƒ…å†µä¸‹å°±åªèƒ½ä¸€è¾†å…ˆè¿‡ï¼Œç­‰åˆ°å¤´å„¿åå¦ä¸€è¾†å†å¼€ã€‚</li></ul><h2 id="WebSocketæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#WebSocketæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="WebSocketæ˜¯ä»€ä¹ˆï¼Ÿ"></a>WebSocketæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸­æ–‡ç¿»è¯‘</p><ul><li><a href="https://www.jianshu.com/p/867274a5e054" target="_blank" rel="noopener">https://www.jianshu.com/p/867274a5e054</a></li><li><a href="https://www.jianshu.com/p/fc09b0899141" target="_blank" rel="noopener">https://www.jianshu.com/p/fc09b0899141</a></li></ul><p>è‹±æ–‡åŸæ–‡</p><ul><li><a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc6455</a></li></ul><h2 id="OkHttp3ä¸­WebSocketå¿ƒè·³è®¾è®¡"><a href="#OkHttp3ä¸­WebSocketå¿ƒè·³è®¾è®¡" class="headerlink" title="OkHttp3ä¸­WebSocketå¿ƒè·³è®¾è®¡"></a>OkHttp3ä¸­WebSocketå¿ƒè·³è®¾è®¡</h2><p>OkHttp3åœ¨3.5ç‰ˆæœ¬ä¹‹åï¼Œå¯¹WebSocketè¿›è¡Œäº†æ”¯æŒã€‚</p><p>OkHttp3:3.5~3.10</p><ul><li>æ²¡æœ‰åšå¿ƒè·³å¤±æ•ˆæ“ä½œï¼Œæ‰‹æœºç«¯åªè´Ÿè´£å‘é€pingæ“ä½œï¼Œä¸ç®¡pongæ˜¯å¦æœ‰æ”¶åˆ°ã€‚</li></ul><p>OkHttp3:3.11.0~ä¹‹å</p><ul><li>åšäº†ç®€å•çš„å¿ƒè·³å¤±æ•ˆæ“ä½œï¼Œå½“å‘é€ç¬¬äºŒæ¬¡pingæ—¶ï¼Œç¬¬ä¸€æ¬¡pingçš„æœåŠ¡ç«¯pongè¿˜æ²¡æœ‰å¾—åˆ°å›åº”ï¼Œåˆ™è¯´æ˜å¿ƒè·³å¤±æ•ˆã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Android-å¤§æœè½¦çš„æ³¨è§£æ”¶é›†å™¨</title>
      <link href="/2018/10/30/%E5%A4%A7%E6%90%9C%E8%BD%A6%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%94%B6%E9%9B%86%E5%99%A8/"/>
      <url>/2018/10/30/%E5%A4%A7%E6%90%9C%E8%BD%A6%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%94%B6%E9%9B%86%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡ä¸»è¦æ˜¯å¯¹ç¼–è¯‘æ—¶æ³¨è§£å±•å¼€è®¨è®ºã€‚Androidç«¯å¯¹è‡ªå®šä¹‰æ³¨è§£çš„åº”ç”¨ç¨‹åº¦è¿œæ²¡æœ‰è¾¾åˆ°Java Webç«¯çš„é‚£ç§ç¨‹åº¦ï¼Œè€Œä¸”å¸‚é¢ä¸Šä¹Ÿæ²¡æœ‰ä¸€ä¸ªä¸“æ³¨äºæŠ½è±¡ç¼–è¯‘æ—¶æ³¨è§£åº•å±‚æŠ€æœ¯çš„åº“ã€‚</p><p>åœ¨çœŸå®å¼€å‘åœºæ™¯ä¸­ï¼Œå¦‚æœæƒ³è¦å®ç°ä¸€ä¸ªåˆ©ç”¨ç¼–è¯‘æ—¶æ³¨è§£çš„åŠŸèƒ½ï¼Œå¾€å¾€éœ€è¦èŠ±å¤§é‡ç²¾åŠ›æ¥å¤„ç†APTè¿™å—çš„ç¹çé€»è¾‘ã€‚ä¾‹å¦‚ï¼Œéå†æ‰€æœ‰æ³¨è§£ç›¸å…³ç±»ç„¶åç”Ÿæˆä¸€å®šè§„å¾‹çš„ä»£ç ã€‚è¿™äº›ç¹çæ“ä½œé˜»ç¢äº†å¤§å®¶ä½¿ç”¨æ³¨è§£çš„çƒ­æƒ…ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½¿ç”¨ç¼–è¯‘æ—¶æ³¨è§£åªéœ€è¦å¢åŠ ä¸€ä¸¤è¡Œä»£ç ï¼Œé‚£ä½ ä¼šä¸ä¼šæ›´æ„¿æ„ä½¿ç”¨æ³¨è§£å‘¢ï¼Ÿ</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨æƒ³æ˜¯å¦èƒ½å¤Ÿå¯¹ç¼–è¯‘æ—¶æ³¨è§£åšè¿›ä¸€æ­¥çš„æŠ½è±¡ï¼Œå¸®åŠ©å¼€å‘è€…å°†é‡ç‚¹æ”¾åœ¨å…·ä½“çš„åŠŸèƒ½å®ç°ä¸Šï¼Œè€Œä¸æ˜¯å¤„ç†ç¼–è¯‘æ—¶æ³¨è§£çš„ç¹çæ“ä½œä¸Šï¼Ÿ</p><h1 id="Naraçš„è¯ç”Ÿ"><a href="#Naraçš„è¯ç”Ÿ" class="headerlink" title="Naraçš„è¯ç”Ÿ"></a>Naraçš„è¯ç”Ÿ</h1><p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼„æ¸…æ¥šå¤§å®¶åˆ©ç”¨æ³¨è§£éƒ½åšäº†å“ªäº›äº‹æƒ…ã€‚æ¸…æ¥šæ³¨è§£çš„ä½¿ç”¨åœºæ™¯ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬æŠ½è±¡å‡ºä¸€ä¸ªæ›´å¥½ç”¨çš„æ³¨è§£æ¡†æ¶ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬è°ƒç ”äº†Androidç«¯ä¸Šå¸¸ç”¨çš„æ³¨è§£æ¡†æ¶ï¼Œçœ‹çœ‹ä»–ä»¬åˆ©ç”¨æ³¨è§£éƒ½åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p><ul><li><p>ButterKnifeï¼šä¾‹å¦‚@BindViewsï¼ŒButterKnifeåœ¨ç¼–è¯‘æœŸï¼Œåˆ©ç”¨@BindViewå°†æ§ä»¶IDå’Œç±»å±æ€§å»ºç«‹å¯¹åº”å…³ç³»ã€‚ç„¶ååœ¨é¡µé¢å¯åŠ¨æ—¶ï¼Œæ ¹æ®æ§ä»¶IDé€šè¿‡findViewByIdæ–¹æ³•å°†æ§ä»¶èµ‹å€¼åˆ°ç±»å±æ€§ä¸Šã€‚</p></li><li><p>EventBusï¼šé€šè¿‡@Subscribeå¯¹æ™®é€šæ–¹æ³•è¿›è¡Œæ ‡è®°ã€‚ç„¶åï¼ŒEventBusåœ¨ç¼–è¯‘æœŸé€šè¿‡@Subscribeå°†è¿™äº›æ–¹æ³•æ”¶é›†èµ·æ¥ï¼Œä½œä¸ºEventBusçš„è®¢é˜…æ–¹æ³•ã€‚</p></li><li><p>Retrofitï¼šé€šè¿‡åå°„æ–¹å¼å¤„ç†æ³¨è§£ï¼Œä¸å†æœ¬æ–‡èŒƒç•´ã€‚</p></li></ul><p>ç¼–è¯‘æ—¶æ³¨è§£çš„ä¸»è¦ç”¨é€”åœ¨äºï¼Œæ”¶é›†æ³¨è§£å¹¶é€šè¿‡æ³¨è§£ä¿¡æ¯ç”Ÿæˆä¸€äº›æœ‰è§„å¾‹çš„ä»£ç ã€‚</p><p>è€Œè¿™äº›æœ‰è§„å¾‹çš„ä»£ç ï¼Œä¸€èˆ¬éƒ½æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼æ¥é—´æ¥å®ç°çš„ã€‚æ¯”å¦‚è¯´ï¼ŒButterKnifeçš„å±æ€§èµ‹å€¼å¯ä»¥é€šè¿‡åå°„æ¥å®ç°ï¼ŒEventBusçš„æ–¹æ³•æ”¶é›†å¯ä»¥ç›´æ¥æ¢ä¸ªå†™æ³•ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦å¯¹ç¼–è¯‘æ—¶æ³¨è§£åšè¿›ä¸€æ­¥æŠ½è±¡ï¼Œæˆ‘ä»¬è®¤ä¸ºå¯ä»¥ä»æ³¨è§£æ”¶é›†æ–¹é¢å…¥æ‰‹ã€‚ç”±æ­¤ï¼ŒNaraæ³¨è§£æ”¶é›†å™¨è¯ç”Ÿäº†ã€‚</p><h2 id="APIçš„è®¾è®¡"><a href="#APIçš„è®¾è®¡" class="headerlink" title="APIçš„è®¾è®¡"></a>APIçš„è®¾è®¡</h2><p>å¯¹äºåº•å±‚åº“è€Œè¨€ï¼Œè®¾è®¡ä¸€å¥—å¥½ç”¨çš„APIæ˜¯å¾ˆé‡è¦çš„ã€‚ä»åº“çš„ä½¿ç”¨è€…è§’åº¦çœ‹ï¼Œå¸Œæœ›æ³¨è§£æ”¶é›†å™¨èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°å“ªäº›åŠŸèƒ½å‘¢ï¼Ÿ</p><ul><li>æ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼šé€šè¿‡åˆ†æå¸‚é¢ä¸Šç¼–è¯‘æ—¶æ³¨è§£çš„ä½¿ç”¨åœºæ™¯ï¼Œå‘ç°å¯¹æ³¨è§£çš„åº”ç”¨ä¸»è¦åœ¨äºç±»ï¼Œæ–¹æ³•å’Œå±æ€§ä¸Šã€‚</li><li>è‡ªå®šä¹‰æ³¨è§£ï¼šä½œä¸ºæ³¨è§£æŠ½è±¡åº“ï¼Œå¦‚æœæ— æ³•æ”¯æŒè‡ªå®šä¹‰æ³¨è§£ï¼Œé‚£å¯¹å¯æ‰©å±•æ€§ç®€ç›´å°±æ˜¯è‡´å‘½çš„æ‰“å‡»ã€‚æ‰€ä»¥éœ€è¦æä¾›è‡ªå®šä¹‰æ³¨è§£åŠŸèƒ½ã€‚</li><li>æ³¨è§£æ”¶é›†ï¼šæ³¨è§£æ”¶é›†ä½œä¸ºæ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»è¦æä¾›ä¸€å¥—å¥½ç”¨çš„æ”¶é›†æ“ä½œã€‚æˆ‘ä»¬è€ƒè™‘ç”¨é“¾å¼Builderæ¥å®Œæˆæ³¨è§£æ”¶é›†åŠŸèƒ½ã€‚</li></ul><p>æœ€ç»ˆè®¾è®¡çš„APIå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰æ³¨è§£API</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE, ElementType.METHOD, ElementType.FIELD)</span><br><span class="line"><span class="meta">@ShadowBinding</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> CustomAnnotation &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨è§£çš„ä½¿ç”¨API</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@CustomAnnotation</span> <span class="comment">// ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationClass</span> <span class="keyword">extends</span> <span class="title">Activity</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CustomAnnotation</span> <span class="comment">// å‡½æ•°</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">AnnotationMethod</span><span class="params">(<span class="keyword">int</span> p1, String p2, AnnotationClass p3, T p4)</span></span>&#123;</span><br><span class="line">    Log.e(<span class="string">"souche"</span>, <span class="string">"test2("</span> + <span class="string">"p1("</span> + p1 + <span class="string">"),p2("</span> + p2 + <span class="string">"),p3("</span> + p3 + <span class="string">"),p4("</span> + p4 + <span class="string">"));"</span>);</span><br><span class="line">    <span class="keyword">return</span> p4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CustomAnnotation</span> <span class="comment">// æˆå‘˜å±æ€§</span></span><br><span class="line"><span class="keyword">public</span> List&lt;AnnotationClass&gt; annotationField;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¶é›†æ³¨è§£çš„ä½¿ç”¨APIï¼Œä»¥Classçš„æ”¶é›†ä¸¾ä¾‹</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">List&lt;ClassDesc&gt; listClass = Nara</span><br><span class="line">                .findClass(CustomAnnotation.class) <span class="comment">// æŸ¥æ‰¾ç±»ï¼Œå‚æ•°ä¸ºå…¶æ‰€åœ¨æ³¨è§£</span></span><br><span class="line">                .withExtends(Activity.class) <span class="comment">// ç­›é€‰æ¡ä»¶ï¼šæŸ¥æ‰¾çš„ç±»ï¼Œéœ€è¦ç»§æ‰¿Activityç±»</span></span><br><span class="line">                .withAnnotations(Collect.class) <span class="comment">// ç­›é€‰æ¡ä»¶ï¼šæŸ¥æ‰¾çš„ç±»ï¼Œéœ€è¦è¢«@Collectæ³¨è§£</span></span><br><span class="line">                .filter(<span class="keyword">new</span> AnnotationFilter&lt;ClassDesc&gt;() &#123; <span class="comment">// è‡ªå®šä¹‰ç­›é€‰æ¡ä»¶ï¼šreturn true è¡¨ç¤ºè¿‡æ»¤æ‰å½“å‰ç±»</span></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">doFilter</span><span class="params">(ClassDesc obj)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .list(); <span class="comment">// è¿”å›ç¬¦åˆæ¡ä»¶çš„ç±»é›†åˆ</span></span><br></pre></td></tr></table></figure><h1 id="å®ç°çš„ç—›ç‚¹"><a href="#å®ç°çš„ç—›ç‚¹" class="headerlink" title="å®ç°çš„ç—›ç‚¹"></a>å®ç°çš„ç—›ç‚¹</h1><p>ä¸€ä¸ªä¼˜ç§€çš„åº•å±‚åº“ï¼Œåº”è¯¥å°†å¤æ‚å®ç°éšè—èµ·æ¥ï¼Œå¹¶ä¸”åšåˆ°å®ç°å¯¹äºä¸Šå±‚ä½¿ç”¨è€…é€æ˜ã€‚ä¸‹é¢ç®€å•åˆ†äº«ä¸‹å®ç°Naraæ—¶ï¼Œé‡åˆ°çš„å‡ ä¸ªæŠ€æœ¯ç—›ç‚¹ã€‚</p><h3 id="å¯¹æ³›å‹çš„æ”¯æŒ"><a href="#å¯¹æ³›å‹çš„æ”¯æŒ" class="headerlink" title="å¯¹æ³›å‹çš„æ”¯æŒ"></a>å¯¹æ³›å‹çš„æ”¯æŒ</h3><p>åœ¨æ”¶é›†æ³¨è§£ä¿¡æ¯æ—¶ï¼Œä¼šé‡åˆ°æ–¹æ³•å‚æ•°æˆ–è€…å±æ€§ä¸­å¸¦æœ‰æ³›å‹ä¿¡æ¯çš„æƒ…å†µã€‚ä¸ºäº†æ”¶é›†è¿™äº›æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†Gsonå®ç°çš„TypeTokenæ³›å‹Typeè½¬åŒ–å·¥å…·ã€‚å°†TypeTokençš„ç›¸å…³ä»£ç æ‹·è´åˆ°äº†Naraå†…éƒ¨ã€‚Gsonè·å–Typeçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type type = <span class="keyword">new</span> TypeToken&lt;clazz&gt;() &#123;&#125;.getType();</span><br></pre></td></tr></table></figure><h2 id="è¢«æ³¨è§£å¯¹è±¡çš„åŒ…çº§ä½œç”¨åŸŸé—®é¢˜"><a href="#è¢«æ³¨è§£å¯¹è±¡çš„åŒ…çº§ä½œç”¨åŸŸé—®é¢˜" class="headerlink" title="è¢«æ³¨è§£å¯¹è±¡çš„åŒ…çº§ä½œç”¨åŸŸé—®é¢˜"></a>è¢«æ³¨è§£å¯¹è±¡çš„åŒ…çº§ä½œç”¨åŸŸé—®é¢˜</h2><p>Naraæ³¨è§£æ”¶é›†æ˜¯æ”¯æŒåŒ…çº§ä½œç”¨åŸŸçš„ä¿¡æ¯æ”¶é›†çš„ã€‚è¿™é‡Œå°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼ŒåŒ…ä½œç”¨åŸŸçš„ç±»ï¼Œæ–¹æ³•å’Œå±æ€§æ˜¯ä¸å…è®¸è·¨åŒ…è®¿é—®çš„ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•åœ¨ä¸åŒåŒ…ä¸‹è·å–åŒ…çº§ä½œç”¨åŸŸä¸‹çš„ä¿¡æ¯å‘¢ï¼Ÿæˆ‘ä»¬é‡‡å–çš„æ–¹å¼æ˜¯åˆ©ç”¨ç¼–è¯‘æ—¶æ³¨è§£ç”Ÿæˆè¢«æ³¨è§£ç±»çš„åŒåŒ…åä¸‹çš„ç±»ï¼Œç„¶åå°†åŒ…çº§ä½œç”¨åŸŸçš„ä¿¡æ¯ç”¨publicçš„å½¢å¼æš´éœ²å‡ºæ¥ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å¦‚åŒ…çº§ä½œç”¨åŸŸçš„å±æ€§</span></span><br><span class="line"><span class="keyword">package</span> com.example.souche.annotation;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CustomAnnotation</span></span><br><span class="line">String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºäº†å°†People.nameçš„getå’Œsetæ–¹æ³•çš„ä½œç”¨åŸŸæš´éœ²å‡ºæ¥</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶ï¼Œç”Ÿæˆäº†publicä½œç”¨åŸŸçš„getå’Œsetæ–¹æ³•</span></span><br><span class="line"><span class="keyword">package</span> com.example.souche.annotation;</span><br><span class="line"><span class="comment">/** This class is generated by SouChe Annotation Collection, do not edit. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompilerCollection</span>$<span class="title">AdaptableClass1540292058755_29</span> </span></span><br><span class="line"><span class="class"><span class="keyword">extends</span> <span class="title">com</span>.<span class="title">souche</span>.<span class="title">android</span>.<span class="title">annotation</span>.<span class="title">core</span>.<span class="title">FieldDesc</span>.<span class="title">BeanMethod</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(Object... params)</span></span>&#123; </span><br><span class="line">                <span class="keyword">if</span> (params.length != <span class="number">1</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"set argument format error!"</span>);</span><br><span class="line">                com.example.souche.annotation.People.name = (java.lang.String)params[<span class="number">0</span>];</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(Object... params)</span></span>&#123; </span><br><span class="line">                <span class="keyword">if</span> (params.length != <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"get argument format error!"</span>);</span><br><span class="line">                <span class="keyword">return</span> com.example.souche.annotation.People.name;</span><br><span class="line">            &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶åŒ–ä¸‹çš„ç¼–è¯‘æ—¶æ³¨è§£é—®é¢˜"><a href="#ç»„ä»¶åŒ–ä¸‹çš„ç¼–è¯‘æ—¶æ³¨è§£é—®é¢˜" class="headerlink" title="ç»„ä»¶åŒ–ä¸‹çš„ç¼–è¯‘æ—¶æ³¨è§£é—®é¢˜"></a>ç»„ä»¶åŒ–ä¸‹çš„ç¼–è¯‘æ—¶æ³¨è§£é—®é¢˜</h2><p>æˆ‘ä»¬å›¢é˜Ÿæ˜¯é‡‡ç”¨çš„æ˜¯æ¨¡å—åŒ–çš„å¼€å‘å½¢å¼ï¼Œæ¨¡å—å°†ä»£ç å°†aaråŒ…ä¸Šä¼ åˆ°mavenä»“åº“ï¼Œä¸»å·¥ç¨‹å†é€šè¿‡gradleæ¥ä¾èµ–æ¨¡å—aaråŒ…ã€‚è¿™æ ·å°±ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºç¼–è¯‘æ—¶æ³¨è§£çš„ä½œç”¨èŒƒå›´æ˜¯æºç çº§åˆ«çš„ï¼Œæ‰€ä»¥æ— æ³•å¯¹aaråŒ…ä¸­çš„æ³¨è§£è¿›è¡Œæ”¶é›†ã€‚</p><p>æˆ‘ä»¬çš„è§£å†³æ€è·¯æ˜¯ï¼Œå¦‚æœæ¨¡å—éœ€è¦ä½¿ç”¨Naraæ³¨è§£æ”¶é›†å™¨ï¼Œåœ¨æ¨¡å—æ‰“åŒ…æ—¶ï¼Œå°±å°†Naraç›¸å…³ä»£ç æ‰“è¿›aaråŒ…ï¼Œç„¶ååœ¨ä¸»å·¥ç¨‹æ‰“åŒ…æ—¶ï¼Œé€šè¿‡gradleæ’ä»¶æ‰«ææ•´ä¸ªappçš„å­—èŠ‚ç ï¼Œæ‰¾åˆ°Naraç›¸å…³ä»£ç ï¼Œå°†è¿™äº›ä»£ç æ•´åˆèµ·æ¥ï¼Œç”Ÿæˆä¸€ä¸ªNaraåˆå§‹åŒ–ä¸»ç±»ã€‚æ€»ä½“æ‰“åŒ…æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/image/nara_compile_flowchat.png" alt="ç¼–è¯‘æµç¨‹å›¾"></p><h1 id="æ¡†æ¶æ„¿æ™¯"><a href="#æ¡†æ¶æ„¿æ™¯" class="headerlink" title="æ¡†æ¶æ„¿æ™¯"></a>æ¡†æ¶æ„¿æ™¯</h1><p>Naraæ˜¯å¯¹ç¼–è¯‘æ—¶æ³¨è§£çš„ä¸Šå±‚æŠ½è±¡ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡Naraæ¥é™ä½ç¼–è¯‘æ—¶æ³¨è§£çš„å¼€å‘æˆæœ¬ã€‚è®©ä½¿ç”¨è€…æŠŠç²¾åŠ›æ”¾åœ¨é€»è¾‘å®ç°ä¸Šï¼Œè€Œä¸æ˜¯åœ¨æ³¨è§£ä¿¡æ¯æ”¶é›†ä¸Šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç½‘ç»œ-OSI ä¸ƒå±‚é€šè®¯</title>
      <link href="/2018/10/11/%E7%BD%91%E7%BB%9C-OSI-%E4%B8%83%E5%B1%82%E9%80%9A%E8%AE%AF/"/>
      <url>/2018/10/11/%E7%BD%91%E7%BB%9C-OSI-%E4%B8%83%E5%B1%82%E9%80%9A%E8%AE%AF/</url>
      
        <content type="html"><![CDATA[<style>table th:nth-of-type(1) {    width: 100px;}</style><h2 id="OSIä¸ƒå±‚é€šè®¯"><a href="#OSIä¸ƒå±‚é€šè®¯" class="headerlink" title="OSIä¸ƒå±‚é€šè®¯"></a>OSIä¸ƒå±‚é€šè®¯</h2><table><thead><tr><th>é€šè®¯å±‚</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>å®ƒçš„ä½œç”¨fancyboxæ˜¯ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡å¹¶è§„å®šåº”ç”¨ç¨‹åºä¸­é€šè®¯ç›¸å…³çš„ç»†èŠ‚ã€‚æ˜¯æœ€è´´è¿‘åº”ç”¨å¼€å‘äººå‘˜çš„ç½‘ç»œå±‚ã€‚å¸¸è§çš„åè®®æœ‰ HTTPï¼ŒFTPï¼ŒTELNETã€SMTP ç­‰ã€‚</td></tr><tr><td>è¡¨ç¤ºå±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯å°†åº”ç”¨å±‚å¤„ç†çš„ä¿¡æ¯ä»ä¸»æœºç‰¹æœ‰çš„æ ¼å¼è½¬æ¢ä¸ºç½‘ç»œæ ‡å‡†ä¼ è¾“æ ¼å¼</td></tr><tr><td>ä¼šè¯å±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯ç¡®å®šå»ºç«‹å’Œæ–­å¼€ç½‘ç»œçš„æ—¶æœºï¼Œå¹¶ç®¡ç†ç½‘ç»œè¿æ¥</td></tr><tr><td>ä¼ è¾“å±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œåˆ›å»ºé€»è¾‘ä¸Šçš„é€šä¿¡è¿æ¥ï¼Œä»é€»è¾‘ä¸Šå°†æ•°æ®å‘é€åˆ°ç›®æ ‡å¯¹è±¡</td></tr><tr><td>ç½‘ç»œå±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯å°†æ•°æ®ä¼ è¾“åˆ°ç›®æ ‡åœ°å€ï¼Œé‡ç‚¹åœ¨äºå¯»æ‰¾ç›®æ ‡åœ°å€ã€‚å¯èƒ½éœ€è¦é€šè¿‡å¤šä¸ªè·¯ç”±å™¨è¿æ¥æ‰èƒ½åˆ°è¾¾ç›®æ ‡åœ°å€ã€‚</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯ç‰©ç†å±‚é¢ä¸Šäº’è¿çš„èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä¼ è¾“ã€‚ä¾‹å¦‚ä¸1ä¸ªä»¥å¤ªç½‘ç›¸è¿çš„ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„é€šè®¯ã€‚</td></tr><tr><td>ç‰©ç†å±‚</td><td>å®ƒçš„ä½œç”¨æ˜¯å°†0ã€1æ¯”ç‰¹æµï¼ˆ0ã€1åºåˆ—ï¼‰ä¸ç”µä¿¡å·å’Œå…‰ä¿¡å·è¿›è¡Œè½¬åŒ–ã€‚å®ç°ç‰©ç†å±‚é¢ä¸Šçš„æ•°æ®ä¼ è¾“ã€‚</td></tr></tbody></table><h2 id="ç½‘ç»œè®¾å¤‡å¯¹åº”çš„OSIé€šè®¯å±‚"><a href="#ç½‘ç»œè®¾å¤‡å¯¹åº”çš„OSIé€šè®¯å±‚" class="headerlink" title="ç½‘ç»œè®¾å¤‡å¯¹åº”çš„OSIé€šè®¯å±‚"></a>ç½‘ç»œè®¾å¤‡å¯¹åº”çš„OSIé€šè®¯å±‚</h2><ul><li><p>ç‰©ç†å±‚ï¼šä¸­ç»§å™¨<br><img src="/image/network_ä¸­ç»§å™¨.png" alt="ç½‘ç»œè®¾å¤‡å›¾"></p></li><li><p>æ•°æ®é“¾è·¯å±‚ï¼šç½‘æ¡¥<br><img src="/image/network_ç½‘æ¡¥.png" alt="ç½‘ç»œè®¾å¤‡å›¾"></p></li><li><p>ç½‘ç»œå±‚ï¼šè·¯ç”±å™¨<br><img src="/image/network_è·¯ç”±å™¨.png" alt="ç½‘ç»œè®¾å¤‡å›¾"></p></li><li><p>ä¸Šå±‚åº”ç”¨ï¼šç½‘å…³<br><img src="/image/network_ç½‘å…³.png" alt="ç½‘ç»œè®¾å¤‡å›¾"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Effective Java åŒæ­¥</title>
      <link href="/2018/10/03/Effective-Java-%E5%90%8C%E6%AD%A5/"/>
      <url>/2018/10/03/Effective-Java-%E5%90%8C%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®"><a href="#åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®" class="headerlink" title="åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®"></a>åŒæ­¥è®¿é—®å…±äº«çš„å¯å˜æ•°æ®</h2><p>å½“å¤šçº¿ç¨‹å…±äº«å¯å˜æ•°æ®æ—¶ï¼Œæ¯ä¸ªè¯»æˆ–è€…å†™æ•°æ®çš„çº¿ç¨‹éƒ½å¿…é¡»æ‰§è¡ŒåŒæ­¥ã€‚åŒæ­¥æ–¹å¼å¯ä»¥æ˜¯åŠ é”ï¼Œä¹Ÿå¯ä»¥æ˜¯volatileã€‚å¦‚æœæ²¡æœ‰åŒæ­¥ï¼Œå°±æ— æ³•ç¡®ä¿ä¸€ä¸ªçº¿ç¨‹æ‰€åšçš„ä¿®æ”¹å¯ä»¥è¢«å¦ä¸€ä¸ªçº¿ç¨‹è·çŸ¥ã€‚</p><h2 id="é¿å…è¿‡åº¦åŒæ­¥"><a href="#é¿å…è¿‡åº¦åŒæ­¥" class="headerlink" title="é¿å…è¿‡åº¦åŒæ­¥"></a>é¿å…è¿‡åº¦åŒæ­¥</h2><ul><li>åœ¨è®¾è®¡ä¸€ä¸ªå¯å˜ç±»çš„æ—¶å€™ï¼Œè¦è€ƒè™‘ä¸€ä¸‹å®ƒä»¬æ˜¯å¦åº”è¯¥è‡ªå·±å®ŒæˆåŒæ­¥æ“ä½œã€‚è¿‡åº¦çš„å¸®åŠ©ç±»è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¼šå¸¦æ¥æ€§èƒ½ä¸Šçš„æŸè€—</li><li><p>ä¸ºäº†é¿å…ä¸å¯æ§æ€§ï¼Œåƒä¸‡ä¸è¦åœ¨åŒæ­¥åŒºåŸŸä¸­è°ƒç”¨å¤–æ¥æ–¹æ³•ã€‚è¦æŠŠåŒæ­¥æ“ä½œçš„æ§åˆ¶æƒç‰¢ç‰¢æŠ“åœ¨è‡ªå·±æ‰‹ä¸­</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SetObserver</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">added</span><span class="params">(ObservableSet set, Object element)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ObservableSet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;SetObserver&gt; observers</span><br><span class="line">                        = <span class="keyword">new</span> ArrayList&lt;SetObserver&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addObserver</span><span class="params">(SetObserver observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (observers) &#123;</span><br><span class="line">            observers.add(observer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é”™è¯¯é€šçŸ¥ç¤ºèŒƒï¼š</span></span><br><span class="line">    <span class="comment">// å¦‚æœåœ¨SetObserverçš„added()æ–¹æ³•ä¸­è°ƒç”¨å¤æ‚çš„addObserver()æ–¹æ³•ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä¼šå¯¼è‡´ConcurrentModificationExceptionå¼‚å¸¸ï¼Œç›¸å½“äºå¤–éƒ¨è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// æ¥å½±å“åŒæ­¥ä»£ç å—ä¸­çš„æ“ä½œé€»è¾‘</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyElementAdded</span><span class="params">(Object element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (observers) &#123;</span><br><span class="line">            <span class="keyword">for</span> (SetObserver observer : observers)</span><br><span class="line">                observer.added(<span class="keyword">this</span>, element);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­£ç¡®é€šçŸ¥ç¤ºèŒƒï¼š</span></span><br><span class="line">    <span class="comment">// å°†å¤–æ¥è°ƒç”¨æ–¹æ³•æ”¾åˆ°åŒæ­¥å—å¤–é¢ï¼ŒåŒæ­¥å—ä¸­åªåšæå°‘çš„äº‹æƒ…</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyElementAdded</span><span class="params">(Object element)</span> </span>&#123;</span><br><span class="line">        List&lt;SetObserver&gt; tempObservers;</span><br><span class="line">        <span class="keyword">synchronized</span> (observers) &#123;</span><br><span class="line">            tempObservers = <span class="keyword">new</span> ArrayList(observers);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (SetObserver observer : tempObservers)</span><br><span class="line">            observer.added(<span class="keyword">this</span>, element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(Object element)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®æ­¥éª¤çœç•¥</span></span><br><span class="line">        <span class="comment">// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (added)</span><br><span class="line">            notifyElementAdded(element);</span><br><span class="line">        <span class="keyword">return</span> added;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="executorå’Œtaskä¼˜å…ˆäºçº¿ç¨‹"><a href="#executorå’Œtaskä¼˜å…ˆäºçº¿ç¨‹" class="headerlink" title="executorå’Œtaskä¼˜å…ˆäºçº¿ç¨‹"></a>executorå’Œtaskä¼˜å…ˆäºçº¿ç¨‹</h2><p>Executor Frameworkæä¾›äº†çµæ´»çš„ä»»åŠ¡æ‰§è¡Œå·¥å…·ï¼Œæ”¯æŒå„ç§ç±»å‹çš„çº¿ç¨‹æ± ã€‚å¼•å¯¼å¼€å‘è€…å°†çº¿ç¨‹å·¥ä½œæ‹†åˆ†æˆäº†ç‹¬ç«‹ä»»åŠ¡å•å…ƒ(Runnable)ã€‚å› æ­¤ï¼Œæ¨èå¼€å‘è€…ä½¿ç”¨Executorè§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ›å»ºçº¿ç¨‹ã€‚</p><h2 id="æ…ç”¨å»¶è¿Ÿåˆå§‹åŒ–"><a href="#æ…ç”¨å»¶è¿Ÿåˆå§‹åŒ–" class="headerlink" title="æ…ç”¨å»¶è¿Ÿåˆå§‹åŒ–"></a>æ…ç”¨å»¶è¿Ÿåˆå§‹åŒ–</h2><ul><li>å¤§å¤šæ•°åŸŸåº”è¯¥æ­£å¸¸åœ°è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸æ˜¯å»¶è¿Ÿåˆå§‹åŒ–ã€‚å»¶è¿Ÿåˆå§‹åŒ–ä¼šå¸¦æ¥åŒæ­¥é—®é¢˜ï¼Œäº§ç”Ÿä¸å¿…è¦çš„é”™è¯¯</li><li><p>æŸäº›åœºæ™¯å¿…é¡»è¦ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–ï¼Œæœ‰å¦‚ä¸‹å»ºè®®ï¼š</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºé™æ€ä½œç”¨åŸŸï¼Œå»ºè®®ä½¿ç”¨Class Holderåˆå§‹åŒ–æ¨¡å¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldHolder</span> </span>&#123;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> FieldType field = computeFieldValue();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> FieldType <span class="title">getField</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> FieldHolder.field;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹äºå®ä¾‹åŸŸï¼Œåˆ™å»ºè®®ä½¿ç”¨åŒé‡æ£€æŸ¥æ¨¡å¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> FieldType field;</span><br><span class="line"><span class="function">FieldValue <span class="title">getField</span><span class="params">()</span> </span>&#123;</span><br><span class="line">FieldType result = field;</span><br><span class="line"><span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">    result = field;</span><br><span class="line"><span class="keyword">if</span> (result == <span class="keyword">null</span>)</span><br><span class="line">    field = result = computeFieldValue();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹äºå¯ä»¥æ¥å—é‡å¤åˆå§‹åŒ–çš„å®ä¾‹åŸŸï¼Œåˆ™è€ƒè™‘ä½¿ç”¨å•é‡æ£€æµ‹æ¨¡å¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> FieldType field;</span><br><span class="line"><span class="function"><span class="keyword">private</span> FieldType <span class="title">getField</span><span class="params">()</span></span>&#123;</span><br><span class="line">FieldType result = field;</span><br><span class="line"><span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">field = result = computeFieldValue();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="ä¸è¦ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨"><a href="#ä¸è¦ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨" class="headerlink" title="ä¸è¦ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨"></a>ä¸è¦ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨</h2><p>ä»»ä½•ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨æ¥è¾¾åˆ°æ­£ç¡®æ€§æˆ–è€…æ€§èƒ½è¦æ±‚çš„ç¨‹åºï¼Œå¾ˆæœ‰å¯èƒ½éƒ½æ˜¯ä¸å¯ç§»æ®–çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Effective Java å¼‚å¸¸</title>
      <link href="/2018/10/01/Effective-Java-%E5%BC%82%E5%B8%B8/"/>
      <url>/2018/10/01/Effective-Java-%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<h2 id="åªé’ˆå¯¹å¼‚å¸¸æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸"><a href="#åªé’ˆå¯¹å¼‚å¸¸æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸" class="headerlink" title="åªé’ˆå¯¹å¼‚å¸¸æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸"></a>åªé’ˆå¯¹å¼‚å¸¸æƒ…å†µæ‰ä½¿ç”¨å¼‚å¸¸</h2><p>æ§åˆ¶æ­£å¸¸æµç¨‹æ—¶ä¸åº”è¯¥ä½¿ç”¨å¼‚å¸¸ï¼Œåªæœ‰å½“ç¨‹åºå‘ç”Ÿå¼‚å¸¸æ—¶æ‰åº”è¯¥æŠ›å‡ºExceptionã€‚Exceptionå°±æ˜¯æ¥æè¿°ç¨‹åºå‘ç”Ÿå¼‚å¸¸çš„ï¼Œä¸è¦èŒè´£ä¸æ¸…åœ°è®©å¼‚å¸¸æ¥å¤„ç†éå¼‚å¸¸çš„äº‹æƒ…ã€‚ä¾‹å¦‚ä¸‹é¢çš„for-eachå¾ªç¯ï¼Œä¸åº”è¯¥ç”¨å¼‚å¸¸æ¥æ§åˆ¶å¾ªç¯ï¼Œè€Œåº”è¯¥ç”¨çŠ¶æ€æµ‹è¯•æ¥æ§åˆ¶å¾ªç¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºèŒƒï¼Œé€šè¿‡å¼‚å¸¸æ¥æ§åˆ¶for-eachå¾ªç¯æµç¨‹</span></span><br><span class="line"><span class="comment">// é€šè¿‡Iterator.next()çš„NoSuchElementExceptionæ¥åˆ¤æ–­å¾ªç¯æ˜¯å¦ç»“æŸ</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Iterator&lt;Foo&gt; i = collection.iterator();</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">Foo foo = i.next();</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchElementException e)&#123;</span><br><span class="line">    <span class="comment">// ç»ˆæ­¢å¾ªç¯</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­£ç¡®ç¤ºèŒƒï¼Œé€šè¿‡çŠ¶æ€æµ‹è¯•æ–¹æ³•æ¥æ§åˆ¶for-eachå¾ªç¯æµç¨‹</span></span><br><span class="line"><span class="comment">// é€šè¿‡Iterator.hasNext()æ–¹æ³•æ¥åˆ¤æ–­å¾ªç¯æ˜¯å¦ç»“æŸ</span></span><br><span class="line">Iterator&lt;Foo&gt; i = collection.iterator();</span><br><span class="line"><span class="keyword">while</span>(i.hasNext())&#123;</span><br><span class="line">Foo foo = i.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹äºå¯æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹äºç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸"><a href="#å¯¹äºå¯æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹äºç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸" class="headerlink" title="å¯¹äºå¯æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹äºç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸"></a>å¯¹äºå¯æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹äºç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸</h2><ul><li>å—æ£€å¼‚å¸¸ï¼šå¦‚æœæœŸæœ›è°ƒç”¨è€…èƒ½å¤Ÿé€‚å½“åœ°æ¢å¤ï¼Œå¯¹äºè¿™ç§æƒ…å†µå°±åº”è¯¥ä½¿ç”¨å—æ£€çš„å¼‚å¸¸ã€‚ä¾‹å¦‚æ–‡ä»¶æ“ä½œåï¼Œæ–‡ä»¶æµçš„å…³é—­æ“ä½œã€‚</li><li>éå—æ£€å¼‚å¸¸ï¼šå¦‚æœç¨‹åºæŠ›å‡ºæœªå—æ£€å¼‚å¸¸æˆ–è€…é”™è¯¯ï¼Œå¾€å¾€å°±å±äºä¸å¯æ¢å¤çš„æƒ…å½¢ï¼Œç»§ç»­æ‰§è¡Œä¸‹å»æœ‰å®³æ— ç›Šã€‚ä¾‹å¦‚List.get()çš„æ•°æ®è¶Šç•Œæ“ä½œã€‚</li></ul><h2 id="é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨å—æ£€å¼‚å¸¸"><a href="#é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨å—æ£€å¼‚å¸¸" class="headerlink" title="é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨å—æ£€å¼‚å¸¸"></a>é¿å…ä¸å¿…è¦åœ°ä½¿ç”¨å—æ£€å¼‚å¸¸</h2><p>å½“æ–¹æ³•å­˜åœ¨å—æ£€å¼‚å¸¸æ—¶ï¼Œä¼šç»™APIè°ƒç”¨è€…å¢åŠ ä½¿ç”¨æˆæœ¬ï¼Œä¾‹å¦‚æ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œéƒ½è¦åŠ try-catchä»£ç å—ã€‚åº”å½“å°‘ç”¨å—æ£€å¼‚å¸¸ã€‚</p><p>ä½¿ç”¨å—æ£€å¼‚å¸¸çš„åŸåˆ™</p><ul><li>æ­£ç¡®åœ°ä½¿ç”¨APIå¹¶ä¸èƒ½é˜»æ­¢è¿™ç§å¼‚å¸¸æ¡ä»¶çš„äº§ç”Ÿã€‚å‚è€ƒæ–‡ä»¶æ“ä½œï¼Œæ— æ³•ä¿è¯æ–‡ä»¶æ“ä½œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>äº§ç”Ÿå¼‚å¸¸åï¼ŒAPIè°ƒç”¨è€…å¯ä»¥ç«‹å³é‡‡ç”¨æœ‰æ•ˆæ“ä½œã€‚å‚è€ƒæ–‡ä»¶æ“ä½œï¼Œæ–‡ä»¶æ“ä½œæŠ›å‡ºå¼‚å¸¸åï¼Œé©¬ä¸Šå…³é—­æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œæ–‡ä»¶å¤„ç†å¤±è´¥é€»è¾‘ã€‚</li></ul><h2 id="ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸"><a href="#ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸" class="headerlink" title="ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸"></a>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸</h2><p>åˆ©ç”¨Javaæä¾›çš„æ ‡å‡†å¼‚å¸¸ï¼Œç›¸å½“äºç«™åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šã€‚å¯ä»¥ä½¿ä½ çš„APIæ›´åŠ æ˜“äºå­¦ä¹ ï¼Œæ˜“äºä½¿ç”¨ï¼Œæ›´åŠ å¯è¯»ã€‚</p><h2 id="æŠ›å‡ºä¸æŠ½è±¡ç›¸å¯¹åº”çš„å¼‚å¸¸"><a href="#æŠ›å‡ºä¸æŠ½è±¡ç›¸å¯¹åº”çš„å¼‚å¸¸" class="headerlink" title="æŠ›å‡ºä¸æŠ½è±¡ç›¸å¯¹åº”çš„å¼‚å¸¸"></a>æŠ›å‡ºä¸æŠ½è±¡ç›¸å¯¹åº”çš„å¼‚å¸¸</h2><p>æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼Œåº”è¯¥ä¸å½“å‰æ–¹æ³•æœ‰è”ç³»ã€‚ä¸Šå±‚å®ç°åº”è¯¥æ•è·ä¸‹å±‚å¼‚å¸¸ï¼ŒåŒæ—¶æŠ›å‡ºç¬¦åˆä¸Šå±‚è¯­ä¹‰çš„å¼‚å¸¸ã€‚ä¾‹å¦‚é›†åˆä¸­çš„å¼‚å¸¸å¤„ç†ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†NoSuchElementExceptionæ”¹ä¸ºIndexOutOfBoundException</span></span><br><span class="line"><span class="comment">// ä½¿æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸æ›´ç¬¦åˆè¯­ä¹‰ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">ListIterator&lt;E&gt; i = listIterator(index);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> i.next();</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchElementException e)&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundException(<span class="string">"Index:"</span> + index);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼‚å¸¸ä¸­åŒ…å«èƒ½æ•è·å¤±è´¥çš„ä¿¡æ¯"><a href="#å¼‚å¸¸ä¸­åŒ…å«èƒ½æ•è·å¤±è´¥çš„ä¿¡æ¯" class="headerlink" title="å¼‚å¸¸ä¸­åŒ…å«èƒ½æ•è·å¤±è´¥çš„ä¿¡æ¯"></a>å¼‚å¸¸ä¸­åŒ…å«èƒ½æ•è·å¤±è´¥çš„ä¿¡æ¯</h2><p>å¼‚å¸¸é¢å‘çš„ç”¨æˆ·æ˜¯å¼€å‘è€…ï¼Œå¼‚å¸¸ä¿¡æ¯çš„å†…å®¹ï¼Œåº”è¯¥æä¾›å¼‚å¸¸å †æ ˆä¿¡æ¯ï¼Œå¼‚å¸¸ä¿¡æ¯æè¿°çš„è¯¦ç»†å†…å®¹ç­‰ã€‚å› ä¸ºå¼‚å¸¸é¢å‘å¼€å‘è€…ï¼Œæ‰€ä»¥æè¿°ä¿¡æ¯æœ€å¥½ä¸ºè‹±æ–‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Effective Java é€šç”¨ç¨‹åºè®¾è®¡</title>
      <link href="/2018/09/29/Effective-Java-%E9%80%9A%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
      <url>/2018/09/29/Effective-Java-%E9%80%9A%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–"><a href="#å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–" class="headerlink" title="å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–"></a>å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–</h2><p>å°†å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæœ€å°åŒ–ï¼Œä½¿ä»£ç å‡å°‘å‡ºé”™ï¼Œæ›´åŠ å¯è¯»ã€‚</p><ul><li><p>é™ä½å‡ºé”™çš„å¯èƒ½æ€§</p><blockquote><p>å¦‚æœå˜é‡åœ¨å®ƒçš„ç›®æ ‡ä½¿ç”¨åŒºåŸŸä¹‹å‰æˆ–è€…ä¹‹åè¢«æ„å¤–åœ°ä½¿ç”¨çš„è¯ï¼Œä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p></blockquote>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºèŒƒ</span></span><br><span class="line">Iterator&lt;Element&gt; i = c.iterator();</span><br><span class="line"><span class="keyword">while</span>(i.hasNext())&#123;</span><br><span class="line">doSomething(i.next());</span><br><span class="line">&#125;</span><br><span class="line">Â·Â·Â·</span><br><span class="line">Iterator&lt;Element&gt; i2 = c2.iterator();</span><br><span class="line"><span class="comment">// BUGï¼Œè¯¯å°†i2å†™æˆäº†iï¼Œå¯¼è‡´ä¸å¿…è¦çš„é”™è¯¯</span></span><br><span class="line"><span class="keyword">while</span>(i.hasNext())&#123;</span><br><span class="line">doSomethingElse(i2.next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æä¾›ä½œç”¨åŸŸçš„æœ€å°èŒƒå›´ï¼Œå¯ä»¥é¿å…æ­¤ç±»é”™è¯¯çš„å‘ç”Ÿ</span></span><br><span class="line">;</span><br><span class="line"><span class="keyword">for</span>(Iterator&lt;Element&gt; i = c.iterator(); i.hasNext(); )&#123;</span><br><span class="line">doSomething(i.next());</span><br><span class="line">&#125;</span><br><span class="line">Â·Â·Â·</span><br><span class="line"><span class="keyword">for</span>(Iterator&lt;Element&gt; i = c2.iterator(); i.hasNext(); )&#123;</span><br><span class="line">doSomethingElse(i.next);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¢å¼ºå¯è¯»æ€§</p><blockquote><p>å°†å˜é‡æ”¾åœ¨ä½¿ç”¨ä¹‹å‰å£°æ˜ï¼Œä¼šåˆ†æ•£è¯»è€…æ³¨æ„åŠ›ã€‚ç­‰åˆ°ç”¨åˆ°è¯¥å˜é‡çš„æ—¶å€™ï¼Œè¯»è€…å¯èƒ½å·²ç»è®°ä¸èµ·è¯¥å˜é‡çš„ç±»å‹å’Œåˆå§‹å€¼äº†ã€‚</p></blockquote></li></ul><h2 id="for-eachå¾ªç¯ä¼˜å…ˆäºä¼ ç»Ÿçš„forå¾ªç¯"><a href="#for-eachå¾ªç¯ä¼˜å…ˆäºä¼ ç»Ÿçš„forå¾ªç¯" class="headerlink" title="for-eachå¾ªç¯ä¼˜å…ˆäºä¼ ç»Ÿçš„forå¾ªç¯"></a>for-eachå¾ªç¯ä¼˜å…ˆäºä¼ ç»Ÿçš„forå¾ªç¯</h2><p>èƒ½ç”¨for-eachå¾ªç¯å®ç°åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨for-eachå¾ªç¯ã€‚</p><ul><li>for-eachå¾ªç¯å†…éƒ¨å¸®ä½ ç»´æŠ¤äº†è¿­ä»£å™¨ï¼Œé™ä½äº†è‡ªå·±ç»´æŠ¤è¿­ä»£å™¨äº§ç”Ÿé”™è¯¯çš„é£é™©ã€‚</li><li>for-eachå¾ªç¯è®©ä»£ç å˜å¾—å°½é‡ç®€æ´ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</li></ul><h2 id="å¦‚æœéœ€è¦ç²¾ç¡®çš„æ•°å€¼ï¼Œè¯·é¿å…ä½¿ç”¨floatå’Œdouble"><a href="#å¦‚æœéœ€è¦ç²¾ç¡®çš„æ•°å€¼ï¼Œè¯·é¿å…ä½¿ç”¨floatå’Œdouble" class="headerlink" title="å¦‚æœéœ€è¦ç²¾ç¡®çš„æ•°å€¼ï¼Œè¯·é¿å…ä½¿ç”¨floatå’Œdouble"></a>å¦‚æœéœ€è¦ç²¾ç¡®çš„æ•°å€¼ï¼Œè¯·é¿å…ä½¿ç”¨floatå’Œdouble</h2><ul><li>floatå’Œdoubleç±»å‹ï¼Œå¹¶æ²¡æœ‰æä¾›å®Œå…¨ç²¾ç¡®çš„ç»“æœã€‚æ‰€ä»¥ä¸åº”è¯¥è¢«ç”¨äºéœ€è¦ç²¾ç¡®ç»“æœçš„åœºåˆã€‚å°¤å…¶ä¸é€‚åˆç”¨äºè´§å¸è®¡ç®—ï¼Œæœ€å¥½ç”¨intï¼Œlongæˆ–BigDecimalä»£æ›¿ã€‚</li></ul><h2 id="åŸºæœ¬ç±»å‹ä¼˜å…ˆäºè£…ç®±åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹ä¼˜å…ˆäºè£…ç®±åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹ä¼˜å…ˆäºè£…ç®±åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹ä¼˜å…ˆäºè£…ç®±åŸºæœ¬ç±»å‹</h2><p>èƒ½ç”¨åŸºæœ¬ç±»å‹å°±å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹ã€‚è£…ç®±åŸºæœ¬ç±»å‹å­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ul><li>ä¸¤ä¸ªè£…ç®±åŸºæœ¬ç±»å‹ï¼Œå­˜åœ¨ç›¸åŒçš„æ•°å€¼ï¼Œå´åªæƒ³ä¸åŒçš„å†…å­˜å¯¹è±¡ã€‚è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œéœ€è¦è°ƒç”¨equilï¼ŒåŒæ—¶è¿˜éœ€è€ƒè™‘NullPointExceptionå¼‚å¸¸ã€‚æé«˜äº†ä½¿ç”¨çš„æˆæœ¬ï¼ŒåŠ å¤§äº†åœ¨å¼€å‘ä¸­å‡ºé”™çš„é£é™©ã€‚</li><li>åŸºæœ¬ç±»å‹æ¯”è£…ç®±åŸºæœ¬ç±»å‹æ›´èŠ‚çœå†…å­˜ç©ºé—´ï¼Œåœ¨è¿›è¡Œè¿ç®—æ“ä½œæ—¶ä¹Ÿæ›´èŠ‚çœè¿è¡Œæ—¶é—´ã€‚è£…ç®±åŸºæœ¬ç±»å‹å¯èƒ½ä¼šå­˜åœ¨é¢‘ç¹çš„è£…ç®±å’Œæ‹†ç®±ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>äº§å“-è§„åˆ’ä¸è¿­ä»£</title>
      <link href="/2018/09/24/%E4%BA%A7%E5%93%81-%E8%A7%84%E5%88%92%E4%B8%8E%E8%BF%AD%E4%BB%A3/"/>
      <url>/2018/09/24/%E4%BA%A7%E5%93%81-%E8%A7%84%E5%88%92%E4%B8%8E%E8%BF%AD%E4%BB%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ€è¿‘åœ¨çœ‹ã€Šäººäººéƒ½æ˜¯äº§å“ç»ç†ã€‹ï¼Œå¸®åŠ©ç¨‹åºå‘˜æå‡å…¨å±€æ„è¯†ï¼Œè¿˜æ˜¯è›®æœ‰ç”¨çš„ã€‚æœ¬æ¬¡ä¸»è¦è®°å½•äº†ã€Šç¬¬å…«ç«  æˆé•¿ï¼šè§„åˆ’ä¸è¿­ä»£ã€‹çš„å†…å®¹æ‘˜è¦ã€‚</p><p>è§„åˆ’æ˜¯æˆ˜ç•¥å¸ƒå±€ï¼Œæ˜¯å®šæ–¹å‘ï¼Œåšæ­£ç¡®çš„äº‹ï¼›è¿­ä»£æ˜¯æˆ˜æœ¯å®æ–½ï¼Œæ˜¯å®šèµ°æ³•ï¼Œæ­£ç¡®åœ°åšäº‹ã€‚è§„åˆ’çš„é‡ç‚¹åœ¨äºæƒ³ï¼Œè¿­ä»£çš„é‡ç‚¹åœ¨äºåŠ¨æ‰‹å®ç°ã€‚</p><ul><li>è§„åˆ’ï¼Œæ˜¯ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒï¼Œä»¥å…¬å¸ä¸ºä¸­å¿ƒçš„ï¼Œæ˜¯ç”Ÿäº§é©±åŠ¨çš„ã€‚</li><li>è¿­ä»£ï¼Œæ˜¯éœ€æ±‚é©±åŠ¨çš„ï¼Œæ˜¯å¯¹ç”¨æˆ·åé¦ˆçš„ä¸æ–­å“åº”ï¼Œéœ€è¦æ ¹æ®å¸‚åœºä¿¡æ¯çš„å˜åŒ–ä¸€æ­¥æ­¥çš„è°ƒæ•´ã€‚</li></ul><h2 id="è§„åˆ’"><a href="#è§„åˆ’" class="headerlink" title="è§„åˆ’"></a>è§„åˆ’</h2><p>ç”±äºäº’è”ç½‘å¤„äºå¿«é€Ÿå˜åŒ–çš„å¤§ç¯å¢ƒä¸­ï¼Œå› æ­¤ä¼šå­˜åœ¨è§„åˆ’æ›´ä¸ä¸Šå˜åŒ–çš„æƒ…å†µã€‚æœ€å¥½åªåšä¸¤ä¸ªè§„åˆ’ï¼Œæœ€é•¿è§„åˆ’å’Œæœ€çŸ­è§„åˆ’ã€‚æœ€çŸ­è§„åˆ’æŒ‡æœ€è¿‘1ä¸ªæœˆåˆ°3ä¸ªæœˆï¼Œæœ€å¤š6ä¸ªæœˆçš„æ—¶é—´æ®µé‡Œï¼Œè¦åšä»€ä¹ˆï¼Œå…¶å®æ›´åƒæ˜¯ä¸€ä¸ªé¡¹ç›®è®¡åˆ’ã€‚é•¿è®¡åˆ’æ˜¯è¿™ä¸ªäº§å“çš„ç»ˆæç›®æ ‡ï¼Œæ¯”å¦‚3åˆ°5å¹´ï¼Œç”šè‡³10å¹´ä»¥åä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œè¦æ€è€ƒé‚£ä¸ªæ—¶å€™æˆ‘ä»¬èƒ½å¤„äºäº§ä¸šé“¾çš„ä»€ä¹ˆä½ç½®ã€‚</p><h2 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h2><p>è¿­ä»£çš„é‡ç‚¹åœ¨äºå®ç°ï¼Œå»ºè®®ä½¿ç”¨æ•æ·å¼€å‘çš„æ–¹å¼ï¼Œæ•æ·å¼€å‘æœ‰ä¸€ä¸‹å‡ ä¸ªå…³é”®ç‚¹ã€‚</p><ul><li>æ²Ÿé€šï¼Œå›¢é˜Ÿä¹‹é—´è¦è¿›è¡Œå¿«é€Ÿæ²Ÿé€šï¼Œå»ºç«‹ç›¸äº’ä¿¡ä»»ç›¸äº’è®¤å¯çš„å›¢é˜Ÿæ°›å›´ã€‚</li><li>ç®€å•ï¼Œåšæœ€ç®€å•çš„äº‹ï¼Œå®ç°æƒ³è¦çš„ç›®çš„ã€‚</li><li>åé¦ˆï¼Œæ‹¥æŠ±å˜åŒ–ï¼Œç”¨åŒ…å®¹çš„å¿ƒæ€å»é¢å¯¹å¤šæ–¹åé¦ˆï¼Œæ¥è‡ªåŒäº‹ï¼Œç”¨æˆ·ç­‰ã€‚</li><li>å‹‡æ°”ï¼Œä¸æ€•çŠ¯é”™ï¼Œç”¨äºå°è¯•æ–°äº‹ç‰©ï¼Œç”¨äºåˆ›æ–°ã€‚</li><li>è°¦é€Šï¼Œæ‰¿è®¤è‡ªå·±çš„ç‰‡é¢æ€§ï¼Œè™šå¿ƒæ¥å—æ¥è‡ªå¤šæ–¹çš„å»ºè®®ï¼Œå–„äºå€ŸåŠ©å¤šæ–¹çš„ä¼˜åŠ¿ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> äº§å“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>äº§å“-ç¡®å®šåŠŸèƒ½çš„ä»·å€¼</title>
      <link href="/2018/09/24/%E4%BA%A7%E5%93%81-%E7%A1%AE%E5%AE%9A%E5%8A%9F%E8%83%BD%E7%9A%84%E4%BB%B7%E5%80%BC/"/>
      <url>/2018/09/24/%E4%BA%A7%E5%93%81-%E7%A1%AE%E5%AE%9A%E5%8A%9F%E8%83%BD%E7%9A%84%E4%BB%B7%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ€è¿‘åœ¨çœ‹ã€Šäººäººéƒ½æ˜¯äº§å“ç»ç†ã€‹ï¼Œå¸®åŠ©ç¨‹åºå‘˜æå‡å…¨å±€æ„è¯†ï¼Œè¿˜æ˜¯è›®æœ‰ç”¨çš„ã€‚æœ¬æ¬¡ä¸»è¦è®°å½•äº†ã€Šç¬¬å…­ç«  åŠŸèƒ½ï¼šç»†åŒ–ä¸æ‰“åŒ…ã€‹çš„å†…å®¹æ‘˜è¦ã€‚</p><h2 id="åŠŸèƒ½è¯„ä¼°"><a href="#åŠŸèƒ½è¯„ä¼°" class="headerlink" title="åŠŸèƒ½è¯„ä¼°"></a>åŠŸèƒ½è¯„ä¼°</h2><p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œåº”è¯¥å…ˆå¯¹åŠŸèƒ½è¿›è¡Œè¯„ä¼°ã€‚åŠŸèƒ½çš„è¯„ä¼°ï¼Œä¸»è¦ä»ä»·å€¼ï¼Œæˆæœ¬ï¼ŒåŠŸèƒ½å®šä½ä¸‰ä¸ªè§’åº¦è¿›è¡Œè€ƒé‡ã€‚å‚è€ƒä¸€ä¸ªæ€§ä»·æ¯”å…¬å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»·å€¼æœ€å¥½åˆ†ä¸º6ä¸ªç­‰çº§ï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œæ— é™é«˜ï¼‰ æˆæœ¬æœ€å¥½æŒ‰ç…§ äºº/å¤© ä¸ºå•ä½</span></span><br><span class="line">æ€§ä»·æ¯” = ä»·å€¼/æˆæœ¬</span><br></pre></td></tr></table></figure><p>ä»ç†è®ºä¸Šè®²ï¼Œæ€§ä»·æ¯”é«˜çš„åŠŸèƒ½ä¼˜å…ˆçº§ä¹Ÿå°±é«˜ï¼Œåº”è¯¥å…ˆåšã€‚ä¸è¿‡è¿˜åº”è¯¥è€ƒè™‘åŠŸèƒ½çš„å®šä½ï¼Œå¦‚æœæ˜¯åŸºç¡€åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯ä»˜å®çš„æ”¯ä»˜åŠŸèƒ½ï¼Œä¸ç®¡ä»£ä»·å¤šå¤§éƒ½è¦åšäº†ã€‚</p><h2 id="åŠŸèƒ½çš„ä»·å€¼åˆ¤æ–­"><a href="#åŠŸèƒ½çš„ä»·å€¼åˆ¤æ–­" class="headerlink" title="åŠŸèƒ½çš„ä»·å€¼åˆ¤æ–­"></a>åŠŸèƒ½çš„ä»·å€¼åˆ¤æ–­</h2><p>ä»ä¸‰ä¸ªè§’åº¦æ¥åˆ¤æ–­åŠŸèƒ½çš„ä»·å€¼ï¼Œåˆ†åˆ«æ˜¯å¹¿åº¦ï¼Œé¢‘åº¦ï¼Œå¼ºåº¦ã€‚</p><ul><li>å¹¿åº¦ï¼šæ½œåœ¨ç”¨æˆ·æ•° * å•ç”¨æˆ·ä»·å€¼ å¯ä»¥ç”¨æ¥åˆ¤æ–­åŠŸèƒ½å¯¹åº”çš„å¸‚åœºå®¹é‡åŠå¹¿åº¦ã€‚<ul><li>ä¾‹å¦‚æ‰“è½¦è½¯ä»¶ï¼Œæ½œåœ¨ç”¨æˆ·å¯èƒ½æ˜¯å‡ äº¿äººçš„æ‰“è½¦éœ€æ±‚ï¼Œå› ä¸ºç”¨æˆ·ä½¿ç”¨åŸºæ•°å¤§ï¼Œæ‰€ä»¥ä»·å€¼é«˜ã€‚</li><li>ä¾‹å¦‚ç§äººé“¶è¡Œä¸šåŠ¡ï¼Œè™½ç„¶æ½œåœ¨ç”¨æˆ·æ¯”è¾ƒå°‘ï¼Œä½†æ¯ä¸ªæ½œåœ¨ç”¨æˆ·éƒ½ä¼šæœ‰å‡ ä¸ªäº¿çš„å­˜æ¬¾ï¼Œå› ä¸ºå•ç”¨æˆ·ä»·å€¼é«˜ï¼Œæ‰€ä»¥ä»·å€¼é«˜ã€‚</li></ul></li><li>é¢‘åº¦ï¼šç”¨æˆ·ä½¿ç”¨åŠŸèƒ½çš„é¢‘ç‡ * æ¯æ¬¡ä½¿ç”¨çš„è½¬åŒ–ç‡ã€‚<ul><li>ä¾‹å¦‚å¤–å–è½¯ä»¶ï¼Œç”¨æˆ·å¯èƒ½ä¸€å¤©è¦ç”¨å¥½å‡ æ¬¡ï¼Œæ¯æ¬¡å¯ä»¥ä»ä¸­è½¬åŒ–å‡ å…ƒé’±ï¼Œå› ä¸ºç”¨æˆ·ä½¿ç”¨é¢‘åº¦å¤§ï¼Œæ‰€ä»¥ä»·å€¼é«˜ã€‚</li><li>ä¾‹å¦‚ç»“å©šè½¯ä»¶ï¼Œç”¨æˆ·å¯èƒ½ä¸€è¾ˆå­ç”¨ä¸€æ¬¡ï¼Œä½†æ¯æ¬¡å¯ä»¥ä»ä¸­è½¬åŒ–å‡ ä¸‡ç”šè‡³æ˜¯å‡ åä¸‡ï¼Œå› ä¸ºä½¿ç”¨è½¬åŒ–ç‡å¤§ï¼Œæ‰€ä»¥ä»·å€¼é«˜ã€‚</li></ul></li><li>å¼ºåº¦ï¼šå¼ºåº¦å¯ä»¥ç†è§£ä¸ºç”¨æˆ·åˆšéœ€ã€‚å¯ä»¥ä»ä¸å¯æ›¿ä»£æ€§ï¼Œç´§æ€¥ç¨‹åº¦ï¼ŒæŒä¹…ç¨‹åº¦è¿™å‡ æ–¹é¢æ¥çœ‹åŠŸèƒ½çš„å¼ºåº¦ã€‚<ul><li>ä¾‹å¦‚ï¼Œå½“å‰åŠŸèƒ½æ˜¯å¦å¯ä»¥è¢«å…¶ä»–åŠŸèƒ½é—´æ¥æ›¿ä»£ã€‚</li><li>ä¾‹å¦‚å½“å‰åŠŸèƒ½æ˜¯å¦ååˆ†ç´§æ€¥ï¼Œå¯èƒ½æ˜¯æ”¿åºœè¦æ±‚ç­‰ã€‚</li><li>ä¾‹å¦‚å½“å‰åŠŸèƒ½åšå‡ºæ¥ä¹‹åæ˜¯å¦å¯ä»¥é•¿ä¹…æŠ•å…¥ä½¿ç”¨ï¼Œå¹¿å‘Šé¡µéœ€æ±‚ä¸èƒ½æŒä¹…æŠ•å…¥ä½¿ç”¨ã€‚</li></ul></li></ul><h2 id="åŠŸèƒ½çš„å®ç°æˆæœ¬"><a href="#åŠŸèƒ½çš„å®ç°æˆæœ¬" class="headerlink" title="åŠŸèƒ½çš„å®ç°æˆæœ¬"></a>åŠŸèƒ½çš„å®ç°æˆæœ¬</h2><p>ç¡®å®šåŠŸèƒ½ä¹‹åï¼Œç²—ç²’åº¦çš„è¯„ä¼°å‡ºå®Œæˆè¯¥åŠŸèƒ½éœ€è¦èŠ±è´¹çš„äººåŠ›æˆæœ¬ä¸ºå¤šå°‘ï¼Œä»¥ äºº/å¤© ä¸ºå•ä½ã€‚</p><h2 id="åŠŸèƒ½çš„å®šä½"><a href="#åŠŸèƒ½çš„å®šä½" class="headerlink" title="åŠŸèƒ½çš„å®šä½"></a>åŠŸèƒ½çš„å®šä½</h2><p>ç¡®å®šä¸€ä¸ªåŠŸèƒ½çš„å®šä½ï¼ŒåŒæ ·æ˜¯éå¸¸é‡è¦çš„ã€‚å¸®åŠ©æˆ‘ä»¬åœ¨è¯„ä¼°åŠŸèƒ½çš„æ—¶å€™ï¼Œäº†è§£è¯¥åŠŸèƒ½çš„é‡è¦ç¨‹åº¦ã€‚</p><ul><li>åŸºç¡€åŠŸèƒ½ï¼šåŸºç¡€åŠŸèƒ½æ˜¯æ¯ä¸ªè½¯ä»¶çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚ä¾‹å¦‚æ”¯ä»˜å®çš„æ”¯ä»˜åŠŸèƒ½ï¼Œæ·˜å®çš„è´­ç‰©åŠŸèƒ½ç­‰ã€‚</li><li>äº®ç‚¹åŠŸèƒ½ï¼šäº®ç‚¹åŠŸèƒ½æ˜¯æå‡ç”¨æˆ·å¿ è¯šåº¦å’Œå£ç¢‘ä¼ æ’­çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæ²¡æœ‰äº®ç‚¹çš„äº§å“ï¼Œç”¨æˆ·ä¹Ÿè®¸å¶å°”ä¼šç”¨ï¼Œä½†ä¸ä¼šå»ºç«‹æ­£å‘æ„Ÿæƒ…è¿æ¥ï¼Œæ›´ä¸ä¼šä¸»åŠ¨å¸®æˆ‘ä»¬ä¼ æ’­ã€‚ç®—æ˜¯åº”ç”¨å¸å¼•å®¢æˆ·çš„åŠ åˆ†é¡¹ã€‚ä¾‹å¦‚Chromeçš„404é¡µé¢ï¼ŒiPhone5sçš„æŒ‡çº¹è¯†åˆ«</li><li>æœŸæœ›åŠŸèƒ½ï¼šæœŸæœ›åŠŸèƒ½æ˜¯éƒ¨åˆ†ç”¨æˆ·æœŸæœ›å®ç°çš„åŠŸèƒ½ã€‚è¿™ç±»åŠŸèƒ½å±äºæœ‰åˆ™æ›´å¥½çš„ç±»å‹ï¼Œé”¦ä¸Šæ·»èŠ±ã€‚ä¾‹å¦‚ç½‘æ˜“äº‘éŸ³ä¹çš„éŸ³ä¹é—¹é’Ÿã€‚</li><li>åå‘åŠŸèƒ½ï¼šåå‘åŠŸèƒ½æ˜¯å‡ºç°äº†ä¼šè®©ç”¨æˆ·è®¨åŒä½†æ˜¯åˆæœ‰åˆ©å¯å›¾çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œè½¯ä»¶å¹¿å‘Šï¼Œè¿…é›·éä¼šå‘˜é™é€ŸåŠŸèƒ½ç­‰ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨ç¡®å®šåŠŸèƒ½æ—¶ï¼Œé¦–å…ˆåº”è¯¥ç¡®å®šåŠŸèƒ½å®šä½ï¼›ç„¶åä»å¹¿åº¦ï¼Œé¢‘åº¦å’Œå¼ºåº¦ä¸‰ä¸ªæ–¹é¢è¿›è¡Œè¯„ä¼°åŠŸèƒ½çš„ä»·å€¼ï¼›æœ€åç¡®å®šå¼€å‘æˆæœ¬ã€‚æœ€åæ ¹æ®æ€§ä»·æ¯”å…¬å¼ï¼ŒæŠŠåŠŸèƒ½çš„æ€§ä»·æ¯”ç®—å‡ºæ¥ã€‚ç„¶åå‚è€ƒæ€§ä»·æ¯”æ¥å®ç°ä¼˜å…ˆå®ç°ç®€å•ä¸”é‡è¦çš„åŠŸèƒ½ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>äººäººéƒ½æ˜¯äº§å“ç»ç† ç¬¬äºŒç‰ˆ</p>]]></content>
      
      
      <categories>
          
          <category> äº§å“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Google I/O&#39; 2018 æ‘˜è¦</title>
      <link href="/2018/09/22/Google-I-O-2018-%E6%91%98%E8%A6%81/"/>
      <url>/2018/09/22/Google-I-O-2018-%E6%91%98%E8%A6%81/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä¸»è¦æ˜¯äº†è§£ä¸‹æœªæ¥çš„è¶‹åŠ¿ï¼Œå¼€é˜”çœ¼ç•Œã€‚</p><h2 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h2><p>ä»Šå¹´å¤§ä¼šçš„é‡ç‚¹ä¹‹ä¸€ï¼Œæ„Ÿè§‰è¿™æ–¹é¢æ˜¯æœªæ¥çš„å¤§åŠ¿æ‰€è¶‹ã€‚é™ä½ç”Ÿäº§åŠ›æˆæœ¬ï¼Œæ”¹å–„ç”Ÿæ´»ã€‚</p><ul><li><p>Googleä¸ºäº†æ¨å¹¿TensorFlowï¼Œä½œå‡ºäº†å¾ˆå¤šåŠªåŠ›ã€‚åœ¨ç¤¾åŒºä¸Šç§¯æå¸®åŠ©å¼€å‘è€…è§£å†³æœºå™¨å­¦ä¹ é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œå¸Œæœ›å°†TensorFlowæ¨å¹¿åˆ°å„ä¸ªé¢†åŸŸã€‚</p></li><li><p>ä»‹ç»äº†TensorFlowåº”ç”¨äºåŒ»å­¦çš„æ¡ˆä¾‹ï¼Œå¸Œæœ›é€šè¿‡æœºå™¨å­¦ä¹ ä¸ºæ›´å¤šäººæä¾›åŒ»ç–—æ”¯æŒã€‚ä¸¾ä¾‹åœ¨ç³–å°¿ç—…çœ¼çƒç—…å˜æ£€æµ‹ä¸“ä¸šï¼Œå·²ç»åšåˆ°äº†ä¸“å®¶çº§çš„å‡†ç¡®ç‡ã€‚</p></li><li><p>ä»‹ç»TensorFlowé«˜å±‚APIï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿé«˜æ•ˆçš„æ­å»ºå’Œè®­ç»ƒæ¨¡å‹ã€‚</p></li><li><p>TensorFlowæ”¯æŒSwiftå’ŒJavaScriptè¯­è¨€ã€‚JavaScriptæ”¯æŒæµè§ˆå™¨å’ŒNodeç¯å¢ƒã€‚å¸Œæœ›å°†TensorFlowå’Œæ›´å¤šçš„å¼€å‘ä½“ç³»ç›¸èåˆã€‚</p></li><li><p>ç§»åŠ¨ç«¯çš„TensorFlow Liteæ–¹æ¡ˆï¼ŒTensorFlowåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œæœºå™¨å­¦ä¹ çš„ç»ˆç«¯è§£å†³æ–¹æ¡ˆï¼Œå…·å¤‡ä½å»¶è¿Ÿï¼Œruntimeå’Œå°ä½“ç§¯çš„ç‰¹ç‚¹ã€‚é€šè¿‡åˆ©ç”¨ç§»åŠ¨ç«¯ç¡¬ä»¶ï¼Œæå‡è§£æé€Ÿåº¦ã€‚</p></li></ul><h3 id="é—²é±¼TensorFlow-Liteçš„åº”ç”¨ï¼š"><a href="#é—²é±¼TensorFlow-Liteçš„åº”ç”¨ï¼š" class="headerlink" title="é—²é±¼TensorFlow Liteçš„åº”ç”¨ï¼š"></a>é—²é±¼TensorFlow Liteçš„åº”ç”¨ï¼š</h3><ul><li><p>ä»èŠ‚çœäººå·¥æˆæœ¬è§’åº¦ï¼šåšäº†è§†é¢‘å°é¢çš„æŠ½å–åŠŸèƒ½ï¼Œåšåˆ°è‡ªåŠ¨æå–è§†é¢‘é¢„è§ˆé¡µ</p></li><li><p>ä»ç¼“è§£æœåŠ¡ç«¯è®¡ç®—å‹åŠ›è§’åº¦ï¼šåšäº†è§†é¢‘æŒ‡çº¹ï¼Œå»é™¤é‡å¤ä¸Šä¼ çš„è§†é¢‘</p></li><li><p>ä»äº¤äº’æ™ºèƒ½åŒ–è§’åº¦ï¼šåšäº†AIç‰ˆæˆ¿ç§Ÿä¿¡æ¯å‘å¸ƒé¡µé¢ï¼Œæä¾›äº†ç”¨æˆ·æ“ä½œçš„AIäº¤äº’æ–¹å¼</p></li></ul><h3 id="ç«¯ä¾§AIä¼˜åŠ¿"><a href="#ç«¯ä¾§AIä¼˜åŠ¿" class="headerlink" title="ç«¯ä¾§AIä¼˜åŠ¿"></a>ç«¯ä¾§AIä¼˜åŠ¿</h3><ul><li><p>æ— ç½‘ç»œå»¶æ—¶</p></li><li><p>æ›´é«˜ç¨³å®šæ€§</p></li><li><p>æ•°æ®éšç§æ€§</p></li><li><p>å“åº”å®æ—¶æ€§</p></li></ul><h2 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h2><p>å› ä¸ºFlutterä»‹ç»ï¼Œæ‰¾ä¸åˆ°è§†é¢‘ï¼Œæ‰€ä»¥æ‘˜å½•äº†é—²é±¼çš„æ€»ç»“</p><ul><li><p>Flutter ä¸ åŸç”Ÿæ··åˆå¼€å‘çš„æ”¯æŒæ–¹å¼</p></li><li><p>å¦‚ä½•åœ¨æ··åˆå¼€å‘æ—¶ï¼Œæ›´å¥½çš„åˆ©ç”¨hot reloadæœºåˆ¶</p></li><li><p>Flutterå’ŒåŸç”Ÿç»„ä»¶çš„ç»„åˆä½¿ç”¨å¯è¡Œæ€§ä»‹ç»</p></li><li><p>Flutter æ¸²æŸ“åŸç†å±‚ä»‹ç»<br><img src="/image/flutter_draw.png" alt="Flutteræ¸²æŸ“åŸç†å›¾"></p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>Flutterç›¸å…³ï¼š<a href="https://yq.aliyun.com/articles/643698" target="_blank" rel="noopener">https://yq.aliyun.com/articles/643698</a></p><p>AIè§†é¢‘ï¼š<a href="https://live.iqiyi.com/s/19rqqzqp9v.html" target="_blank" rel="noopener">https://live.iqiyi.com/s/19rqqzqp9v.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Effective Java æ–¹æ³•è®¾è®¡</title>
      <link href="/2018/09/20/Effective-Java-%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1/"/>
      <url>/2018/09/20/Effective-Java-%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="æ£€éªŒå‚æ•°çš„æœ‰æ•ˆæ€§"><a href="#æ£€éªŒå‚æ•°çš„æœ‰æ•ˆæ€§" class="headerlink" title="æ£€éªŒå‚æ•°çš„æœ‰æ•ˆæ€§"></a>æ£€éªŒå‚æ•°çš„æœ‰æ•ˆæ€§</h2><ul><li><p>åº”è¯¥åœ¨æ–¹æ³•å¼€å¤´å°±æ£€éªŒå‚æ•°çš„æœ‰æ•ˆæ€§ï¼ŒåŠæ—¶æŠ¥å‡ºå‚æ•°é”™è¯¯ã€‚</p><blockquote><p>ä¼ é€’æ— æ•ˆå‚æ•°ç»™æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œä¹‹å‰å…ˆå¯¹å‚æ•°è¿›è¡Œæ£€éªŒï¼Œé‚£ä¹ˆä»–å¾ˆå¿«å°±ä¼šå¤±è´¥ï¼Œå¹¶ä¸”æ¸…æ¥šåœ°å‘ˆç°å‡ºé€‚å½“çš„å¼‚å¸¸ã€‚å¦‚æœè¿™ä¸ªæ–¹æ³•æ²¡æœ‰æ£€æŸ¥ä»–çš„å‚æ•°ï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿä»¥ä¸‹å‡ ç§æƒ…æ™¯ã€‚è¯¥æ–¹æ³•å¯èƒ½åœ¨å¤„ç†è¿‡ç¨‹ä¸­å¤±è´¥ï¼Œå¹¶ä¸”äº§ç”Ÿä»¤äººè´¹è§£çš„å¼‚å¸¸ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ­£å¸¸æ–¹æ³•ï¼Œä½†æ˜¯ä¼šæ‚„æ‚„åœ°è®¡ç®—å‡ºé”™è¯¯ç»“æœã€‚æœ€ç³Ÿç³•çš„æ˜¯ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ­£å¸¸è¿”å›ï¼Œä½†æ˜¯å´ä½¿å¾—æŸä¸ªå¯¹è±¡å¤„äºè¢«ç ´åçš„çŠ¶æ€ï¼Œå°†æ¥åœ¨æŸä¸ªä¸ç¡®å®šçš„æ—¶å€™ï¼Œåœ¨æŸä¸ªä¸ç›¸å…³çš„ç‚¹ä¸Šä¼šå¼•å‘é”™è¯¯ã€‚</p></blockquote></li><li><p>publicæ–¹æ³•çš„å‚æ•°æ ¡éªŒç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼ŒåŒ…å†…æ–¹æ³•åˆ™ä½¿ç”¨assertæ–­è¨€æ ¡éªŒå‚æ•°ã€‚</p><blockquote><p>å¯¹äºæœªè¢«å¯¼å‡ºæ–¹æ³•ï¼Œä½œä¸ºåŒ…çš„åˆ›å»ºè€…ï¼Œä½ å¯ä»¥æ§åˆ¶è¿™ä¸ªæ–¹æ³•å°†åœ¨å“ªäº›æƒ…å†µä¸‹è¢«è°ƒç”¨ï¼Œå› æ­¤ä½ å¯ä»¥ï¼Œä¹Ÿåº”è¯¥ç¡®ä¿åªå°†æœ‰æ•ˆçš„å‚æ•°å€¼ä¼ é€’è¿›æ¥ã€‚å› æ­¤ï¼Œéå…¬æœ‰çš„æ–¹æ³•é€šå¸¸åº”è¯¥ä½¿ç”¨æ–­è¨€æ¥æ£€æŸ¥å®ƒä»¬çš„å‚æ•°ã€‚</p></blockquote></li></ul><h2 id="å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´"><a href="#å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´" class="headerlink" title="å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´"></a>å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´</h2><ul><li><p>æ–¹æ³•çš„å…¥å‚å’Œå‡ºå‚éƒ½éœ€è¦è€ƒè™‘ä¿æŠ¤æ€§æ‹·è´ã€‚é˜²æ­¢å¤–éƒ¨æ–¹æ³•å¯¹å…¶è¿›è¡Œç ´åæ€§æ“ä½œã€‚è¿™é‡Œçš„å¤–éƒ¨æ–¹æ³•æ˜¯æŒ‡ä½¿ç”¨ç±»çš„ç¬¬ä¸‰æ–¹æ–¹æ³•ã€‚ä¿æŠ¤æ€§æ‹·è´ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯æ¯æ¬¡åœ¨ä»£ç çš„æ—¶å€™ï¼Œéƒ½åº”è¯¥è€ƒè™‘åˆ°è¿™ä¸€æ­¥æ“ä½œã€‚å°¤å…¶æ˜¯å†™åº•å±‚åº“çš„æ—¶å€™ã€‚</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¥å‚çš„ä¿æŠ¤æ€§æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">newClass</span><span class="params">(List&lt;String&gt; args)</span></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.list = <span class="keyword">new</span> ArrayList&lt;String&gt;(args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡ºå‚çš„ä¿æŠ¤æ€§æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">getList</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;(<span class="keyword">this</span>.list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="è°¨æ…è®¾è®¡æ–¹æ³•ç­¾å"><a href="#è°¨æ…è®¾è®¡æ–¹æ³•ç­¾å" class="headerlink" title="è°¨æ…è®¾è®¡æ–¹æ³•ç­¾å"></a>è°¨æ…è®¾è®¡æ–¹æ³•ç­¾å</h2><ul><li><p>æ–¹æ³•åç§°å¾ˆé‡è¦ï¼Œåœ¨è®¾è®¡æ–¹æ³•åæ—¶ï¼Œåº”è¯¥å§‹ç»ˆéµå®ˆæ ‡å‡†çš„å‘½åä¹ æƒ¯ã€‚</p><blockquote><p>å°½é‡è®©è‡ªå·±çš„æ–¹æ³•åçœ‹èµ·æ¥åƒä¸€å¥è¯ä¸€æ ·ã€‚åœ¨å®šå¥½è‡ªå·±çš„æ–¹æ³•åä¹‹åï¼Œæœ€åå†™ä¼ªä»£ç è°ƒç”¨è‡ªå·±çš„æ–¹æ³•ï¼ŒéªŒè¯æ–¹æ³•çš„å¯è¯»æ€§ã€‚è®¾è®¡åº•å±‚åº“æ—¶å¾ˆé‡è¦ã€‚</p></blockquote></li><li><p>é¿å…è¿‡é•¿çš„æ–¹æ³•å‚æ•°åˆ—è¡¨ã€‚</p><blockquote><p>æ–¹æ³•çš„å‚æ•°æœ€å¥½ä¸è¶…è¿‡4ä¸ªã€‚å¦‚æœæ–¹æ³•å‚æ•°çœŸçš„å¾ˆé•¿ï¼Œå¯ä»¥è€ƒè™‘Buildæ¨¡å¼ï¼Œè®©ä½¿ç”¨è€…ä¼˜é›…çš„è®¾å€¼ï¼Œæˆ–è€…è€ƒè™‘å¤–è§‚ç±»ï¼Œç»™å¤æ‚çš„å®ç°æ–¹æ³•å¥—ä¸€å±‚ç®€å•çš„å£³ã€‚</p></blockquote></li><li><p>booleanç±»å‹å‚æ•°æœ€å¥½ç”¨æšä¸¾æ›¿ä»£ã€‚</p><blockquote><p>è¿™æ˜¯booleanç±»å‹å‚æ•°çš„å°å°å»ºè®®ã€‚å¦‚æœè¦åœ¨å‚æ•°ä¸­ä½¿ç”¨booleanç±»å‹ï¼Œæœ€å¥½ç”¨æšä¸¾ç±»å‹è¿›è¡Œæ›¿ä»£ã€‚é¦–å…ˆæšä¸¾æ›´å…·æœ‰å¯è¯»æ€§ï¼Œå…¶æ¬¡æšä¸¾æ›´åˆ©äºä»¥åçš„æ‰©å±•ã€‚</p></blockquote></li></ul><h2 id="æ…ç”¨é‡è½½"><a href="#æ…ç”¨é‡è½½" class="headerlink" title="æ…ç”¨é‡è½½"></a>æ…ç”¨é‡è½½</h2><ul><li><p>Javaè¯­è¨€è¦è°ƒç”¨å“ªä¸ªé‡è½½æ–¹æ³•æ˜¯åœ¨ç¼–è¯‘æ—¶åšå‡ºå†³å®šçš„ã€‚è¿™ä¸€ç‚¹ä¸ç¬¦åˆJavaè¯­è¨€çš„è¿è¡Œæ—¶ç‰¹æ€§ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºè¦†ç›–æ“ä½œæ¯”è¾ƒç¬¦åˆJavaæ ‡å‡†çš„è¿è¡Œæ—¶ç‰¹æ€§ã€‚</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡è½½äº†classifyæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionClassifier</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">classify</span><span class="params">(Set&lt;?&gt; s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Set"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">classify</span><span class="params">(List&lt;?&gt; lst)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"List"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">classify</span><span class="params">(Collection&lt;?&gt; c)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Unknown Collection"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Collection&lt;?&gt;[] collections = &#123; <span class="keyword">new</span> HashSet&lt;String&gt;(),</span><br><span class="line"><span class="keyword">new</span> ArrayList&lt;BigInteger&gt;(),</span><br><span class="line"><span class="keyword">new</span> HashMap&lt;String, String&gt;().values() &#125;;</span><br><span class="line"><span class="keyword">for</span> (Collection&lt;?&gt; c : collections)</span><br><span class="line">System.out.println(classify(c));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é¢„æœŸæ˜¯æ‰“å°å‡ºSetï¼ŒListï¼ŒUnknown Collectionã€‚ä½†æ˜¯å®é™…ä¸Šæ˜¯æ‰“å°å‡ºUnknown Collectionï¼Œ</span></span><br><span class="line"><span class="comment">// Unknown Collectionï¼ŒUnknown Collectionã€‚å› ä¸ºé‡è½½æ˜¯æ ¹æ®ç¼–è¯‘æ—¶å†³å®šè¦è°ƒç”¨çš„æ˜¯å“ªä¸ªæ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ç”±äºé‡è½½å®¹æ˜“å¼•èµ·ç¼–ç¨‹æ—¶çš„æƒ³æ³•å’Œè¿è¡Œç»“æœä¸ä¸€è‡´ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨é‡è½½ç¼–å†™è®¾è®¡APIçš„æ—¶å€™ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ã€‚é˜²æ­¢APIä½¿ç”¨è€…å¼•èµ·è¯¯ä¼šã€‚å¦‚æœé‡è½½æ–¹æ³•çš„å‚æ•°çš„ç±»å‹æœ‰ç»§æ‰¿å…³ç³»ï¼Œä¾‹å¦‚parse(String content)å’Œparse(Object content)ï¼Œæœ€å¥½ç”¨æ–¹æ³•ååŒºåˆ†å¼€ï¼ŒpaeseString(String content)å’ŒparseObject(Object content)ã€‚<strong>æ€»ä¹‹ï¼Œæ–¹æ³•å‚æ•°æ•°ç›®ç›¸åŒçš„æ–¹æ³•ï¼Œåº”è¯¥å°½é‡é¿å…é‡è½½ã€‚</strong></p></blockquote></li></ul><h2 id="è¿”å›é›¶é•¿åº¦çš„é›†åˆï¼Œè€Œä¸æ˜¯null"><a href="#è¿”å›é›¶é•¿åº¦çš„é›†åˆï¼Œè€Œä¸æ˜¯null" class="headerlink" title="è¿”å›é›¶é•¿åº¦çš„é›†åˆï¼Œè€Œä¸æ˜¯null"></a>è¿”å›é›¶é•¿åº¦çš„é›†åˆï¼Œè€Œä¸æ˜¯null</h2><ul><li><p>æ–¹æ³•è¿”å›é›†åˆæ—¶ï¼Œå¦‚æœé›†åˆå†…å®¹ä¸ºç©ºï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„é›†åˆå¯¹è±¡ï¼Œè€Œä¸æ˜¯nullã€‚</p><blockquote><p>å› ä¸ºå¯¹äºè¿”å›nullè€Œä¸æ˜¯é›¶é•¿åº¦é›†åˆçš„æ–¹æ³•æ¥è¯´ï¼Œæ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶éƒ½éœ€è¦åˆ¤æ–­ä¸‹è¿”å›å¯¹è±¡æ˜¯éƒ½ä¸ºnullï¼Œä»è€Œé˜²æ­¢NullPointerExceptionï¼Œå¯¹äºæ–¹æ³•ä½¿ç”¨è€…å¾ˆä¸å‹å¥½ã€‚</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®¢æˆ·ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å»ºç«™åˆè¡·</title>
      <link href="/2018/09/19/%E5%BB%BA%E7%AB%99%E5%88%9D%E8%A1%B7/"/>
      <url>/2018/09/19/%E5%BB%BA%E7%AB%99%E5%88%9D%E8%A1%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆè¡·"><a href="#åˆè¡·" class="headerlink" title="åˆè¡·"></a>åˆè¡·</h1><p>å·¥ä½œè§’è‰²é€æ¸ä»å®¢æˆ·ç«¯å¼€å‘è€…è½¬å˜ä¸ºç‹¬ç«‹å¼€å‘è€…ã€‚ä¹‹å‰è¯»å¤§å­¦çš„æ—¶å€™ï¼Œè¿˜æœ‰å†™åšå®¢çš„ä¹ æƒ¯ï¼Œåæ¥æ…¢æ…¢è½¬å˜ä¸ºåšç¬”è®°ï¼Œæœ€è¿‘å˜æˆäº†åªçœ‹ä¹¦ä¸åšç¬”è®°äº†ã€‚æ„Ÿè§‰åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œç¼ºä¹äº†æ·±åº¦æ€è€ƒçš„è¿‡ç¨‹ã€‚äºæ˜¯ï¼Œæ‰“ç®—æ­å»ºä¸ªäººåšå®¢ï¼Œé€¼ç€è‡ªå·±åšäº›æ·±åº¦æ€è€ƒçš„äº‹æƒ…å§ã€‚å°†åšå®¢äº§å‡ºä½œä¸ºå­¦ä¹ çš„è€ƒæ ¸æ ‡å‡†ã€‚è´µåœ¨åšæŒï¼ŒæŒä¹‹ä»¥æ’~</p><blockquote><p>åšå®¢åœ°å€: <a href="http://blog.daiyibo.cn">http://blog.daiyibo.cn</a></p></blockquote><h1 id="å®‰è£…æ–¹æ³•"><a href="#å®‰è£…æ–¹æ³•" class="headerlink" title="å®‰è£…æ–¹æ³•"></a>å®‰è£…æ–¹æ³•</h1><p>Hexoæ­å»ºï¼Œç®—æ˜¯æ¯”è¾ƒç®€å•äº†ã€‚åœ¨å®‰è£…å¥½gitå¼€å‘ç¯å¢ƒå’Œnodeå¼€å‘ç¯å¢ƒçš„æƒ…å†µä¸‹ã€‚éœ€è¦åšçš„äº‹æƒ…å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// å®‰è£…Hexo</span><br><span class="line"></span><br><span class="line">npm install -g hexo</span><br><span class="line"></span><br><span class="line">// æ–°å»ºåšå®¢ç›®å½•</span><br><span class="line"></span><br><span class="line">mkdir blog</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–Hexoæ¨¡æ¿</span><br><span class="line"></span><br><span class="line">hexo init</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨4000ç«¯å£ï¼Œè¿è¡Œåšå®¢ï¼Œä¸»è¦æ˜¯æœ¬åœ°æµ‹è¯•ç”¨</span><br><span class="line"></span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// æ–°å»ºåšå®¢ï¼Œä¸‹é¢å‘½ä»¤ä¼šæ–°å»ºä¸€ä¸ªXXX.mdçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">hexo new XXX</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
  
  
</search>
