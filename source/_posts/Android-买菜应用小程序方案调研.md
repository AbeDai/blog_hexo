---
title: Android - 买菜应用小程序方案调研
date: 2020-12-13 11:09:18
categories: 客户端
---

### 美团优选

**美团地图View实现方案：**
https://tech.meituan.com/2020/10/30/native-web-pratice-in-meituan.html

**美图架构演化参考：**
https://tech.meituan.com/2020/09/30/waimai-mobile-architecture-evolution.html

#### 美团优选购物页分析：

![367f3b0b23c95793bddd1fa8a15935de](/image/95f9176f28e5b83227ff2b4f3e614570.png)

从布局中，可以排除 Flutter 实现的可能性。肉眼可见的WebView组件。整个布局都是用WebView来实现的。只有 导航栏使用了 Native组件，其余组件都是在WebView中渲染的。同时又做到了秒开，使用了离线化技术。

#### 美团优先地址选择页分析：

![52f86f9c42103958bad452149e98cbe5](/image/d6b9007bfd40067904c9df186b65b498.png)

地图页相对而言比较复杂些。从布局上看，地图组件为原生实现，且不再WebView节点下，从而可以判断不是使用了同层渲染技术。而且，美团App只有100M，打开地址页时， 并没有做浏览器引擎的下载操作，因此更进一步确定了美团优选没有使用同层渲染技术。

#### 美团优选任务管理器多任务分析
发现美团优选小程序，在多任务里面是能够看到两个卡片页同时存在的。
好奇他的小程序是不是多进程的方式实现的。通过ADB看了下他的进程数，发现只是实现了多Tab而已。

参考：
https://www.jianshu.com/p/7f6f98da691e

![e28667d4c677dc4947487f9e39bc00b9](/image/040ced6345cec29c153978165b1dff2b.png)

### 多多买菜

#### 多多买菜首页

![37870b49097ee168974ed3da32803823](/image/20FECA73-29C0-4E5C-826D-403C02E29DB1.png)

拼多多从产品形态上看就是一个H5的形式。查看布局发现，拼多多内核居然是腾讯内核。 多多买菜首次打开后，H5做了离线缓存，下次打开时，能做到基本秒开。后续进一步加深合作不知道能够暴露出同层渲染能力呢？

**多多买菜不支持地图操作，从产品交互上阉割了地图定位功能。**
