---
title: 工作回顾-通用容器框架
date: 2019-09-22 09:41:09
categories: 回顾
---

<style>
table th:first-of-type {
	width: 200px;
}
</style>

## 介绍

H5 容器是一款移动端 Hybrid 解决方案 SDK，提供标准且健全的H5运行环境。
抹平公司多SaaS平台标准不统一的问题，降低业务在各App之间的迁移成本。
为工程标准化，业务单元化打下坚实的基础。

## 工作职责

通用容器框架，主要负责：

- 规划端上通用容器的重点方向；
- 主导端上接入、集成、使用相关的API设计；
- 端上具体实现的技术方案选型；
- 端上接入和使用文档的官方文档建设；
- 端上通用容器的接入技术支持；

## 框架概览

<img width="900" src="/image/jarvis_整体架构图.png">

### 标准化UI样式

**效果图**

<img width="400" src="/image/jarvis_ui_1.png">
<img width="400" src="/image/jarvis_ui_2.png">
<img width="400" src="/image/jarvis_ui_3.png">
<img width="400" src="/image/jarvis_ui_4.png">

**自定义配置方式**
- 协议内配置方式
- 初始化配置方式
- 配置文件配置方式

**自定义配置支持以下内容**

| 类型  | 详情 |
|---|---|
| 导航栏-主题配置 | - 主题色</br>- 是否采用沉浸式导航栏</br>- 加载进度条</br>- 导航栏分割线 |
| 导航栏-左侧模式 | - 返回按钮</br>- 关闭按钮</br>- 自定义按钮 |
| 导航栏-右侧模式 | - 刷新按钮</br>- 更多按钮</br>- 自定义按钮 |
| 导航栏-居中模式 | - 标题模式</br>- Tab模式</br>- 搜索模式 |
| 下拉刷新 | - 下拉刷新动画</br>- 刷新状态文案</br> |
| 启动页 | - 启动页动画</br> |

### 离线包优化

引入离线包机制，降低H5网络请求而导致的用户体验延时问题。引入离线包后，H5页基本能达到秒开效果。

**离线包加载机制**
<img width="900" src="/image/jarvis_bundle.png">

**Webview网络请求拦截**
<img width="900" src="/image/jarvis_vritual_host.png">

### 统一标准能力

**提供协议标准规范**

> 协议格式为：scheme://xxx/su_xxxxx
> su表示 standard unify 规范统一

返回值
```{
    "data": "",
    "message": "",
    "success": "",
    "code": ""
}
```

| code编码值 | 说明 |
|---|---|
| 200 | 正常 |
| 2101 | 没有权限 |
| 2102 | 必选参数缺失 |
| 2103 | 失败 |
| 2104 | 参数格式错误 |
| 2105 | 系统错误 |
| 2106 | 目标不存在 |
| 2107 | 协议调起失败 |

**提供通用能力列表**
- 定位
- 持久存储
- 运行期间存储
- 剪切板
- 获取通讯录
- 获取设备信息
- 拍照
- 打开相册
- 保存图片到相册

### 小程序样式

搜车小程序样式，是一种全新的展现形式，帮助业务打造强感知的共享业务应用概念，提供标准化容器，来提高业务稳定性，动态性，可移植性。

**代码结构分布**
<img width="700" src="/image/jarvis_mina.png">

**小程序效果展示**
<img width="1200" src="/image/jarvis_mina_demo.jpg">
